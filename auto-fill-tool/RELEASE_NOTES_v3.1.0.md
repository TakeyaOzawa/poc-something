# Auto-Fill Tool v3.1.0 - リリースノート

**リリース日**: 2025年10月18日
**バージョン**: 3.1.0
**リリースタイプ**: 機能追加（マイナーアップデート）

---

## 🎉 新機能: 画面遷移対応自動入力

v3.1.0では、**複数ページにまたがるフォーム入力を自動的に継続・再開できる機能**を追加しました。

これまでは1ページ内でのみ自動入力が可能でしたが、今回のアップデートにより、ページをまたぐ複雑なフォーム（会員登録、チェックアウトフローなど）でも、途切れることなく自動入力を継続できるようになりました。

---

## ✨ 主な特徴

### 1. 自動進捗保存

ページ遷移時に、現在の実行位置を自動的に保存します。

- **保存タイミング**: 「次のページへ」ボタンをクリックしてページ遷移する際
- **保存内容**:
  - 現在のステップ番号
  - 全体のステップ数
  - 最後に実行したページのURL
- **パフォーマンス**: わずか3%の軽微なオーバーヘッド

### 2. 自動再開

次のページを開くと、自動的に続きから実行が再開されます。

- **検出方式**: ページ読み込み時に実行中の自動入力を自動検出
- **再開条件**:
  - 24時間以内の実行
  - 同じWebサイト設定
  - URLが一致するページ
- **ユーザー操作**: 不要（完全自動）

### 3. 中断復旧

ブラウザを閉じてしまった場合でも、24時間以内なら自動的に再開できます。

- **復旧可能期間**: 24時間以内
- **復旧方法**: 次のページを開くだけ（自動検出・自動再開）
- **データ保存**: Chrome Storage（ローカルに安全に保存）

---

## 🎯 ユーザーへのメリット

### メリット1: 複雑なフォームにも対応

これまで手動で行う必要があった複雑な複数ページフォームも、完全自動化できます。

**対応例**:
- ✅ 会員登録フロー（個人情報 → 住所 → アカウント作成）
- ✅ ECサイトのチェックアウト（カート → 配送先 → 支払い → 確認）
- ✅ 多段階の申し込みフォーム（基本情報 → 詳細情報 → 確認 → 完了）
- ✅ 就職サイトのエントリーフォーム（基本 → 学歴 → 職歴 → 志望動機）

### メリット2: 中断しても安心

途中でブラウザを閉じてしまっても、24時間以内なら自動的に続きから再開できます。

**シナリオ例**:
1. 長い登録フォームの途中でブラウザを誤って閉じてしまった
2. 10分後、同じフォームのページを開く
3. **自動的に続きから再開される** → 最初からやり直す必要なし！

### メリット3: 設定は不要

既存のXPath設定に少し追加するだけで、すぐに使えます。

**必要な変更**:
- ページ遷移箇所に「CHANGE_URL」アクションを追加するだけ
- 他の設定変更は一切不要

---

## 📘 使い方

### ステップ1: XPath設定にCHANGE_URLアクションを追加

ページ遷移が発生する箇所に、`CHANGE_URL`アクションを追加してください。

**設定例**:

```
ステップ1: 名前を入力（TYPE）
ステップ2: メールアドレスを入力（TYPE）
ステップ3: 「次へ」ボタンをクリック（CLICK）
ステップ4: 次のページへ遷移（CHANGE_URL） ← これを追加
ステップ5: 住所を入力（TYPE）
ステップ6: 電話番号を入力（TYPE）
...
```

**CHANGE_URLアクションの設定内容**:
- **Action Type**: `CHANGE_URL`
- **URL**: 次のページのURL（例: `https://example.com/register/step2`）
- **Value**: 次のページのURL（URLと同じ）
- **Execution Order**: 適切な順序番号

### ステップ2: 通常通り自動入力を実行

XPath管理画面から「▶️ 自動入力実行」ボタンをクリックするだけです。

- ページ1で自動入力開始
- ページ遷移時に進捗が自動保存される
- ページ2に移動すると自動的に続きから実行される
- すべてのページで自動入力が完了する

### ステップ3: 必要に応じて中断・再開

途中でブラウザを閉じても、24時間以内に次のページを開けば、自動的に続きから再開されます。

**何もする必要はありません** - 完全に自動です！

---

## 📋 動作例: 3ページ登録フォーム

### シナリオ

あるWebサイトの会員登録が3ページに分かれている場合:

1. **ページ1**: 個人情報（名前、メールアドレス、生年月日）
2. **ページ2**: 住所情報（住所、郵便番号、電話番号）
3. **ページ3**: アカウント作成（ユーザー名、パスワード）

### 従来（v3.0.0以前）

- ページ1でのみ自動入力可能
- ページ2以降は手動で入力する必要があった
- または、各ページごとに別々のXPath設定を作成し、手動で切り替える必要があった

### v3.1.0以降

1. XPath設定を1つ作成（全3ページ分）
2. ページ1→2、ページ2→3の遷移箇所にCHANGE_URLアクションを追加
3. 「自動入力実行」をクリック
4. **すべてのページで自動的に入力が完了** ✨

**もし途中でブラウザを閉じても**:
- 24時間以内に同じフォームのページを開けば、自動的に続きから再開
- 例: ページ2まで完了していれば、ページ3から自動再開

---

## ⚙️ 技術仕様

### パフォーマンス

- **オーバーヘッド**: 3.16%（目標5%未満を達成）
- **進捗保存時間**: アクションあたり約3.3ms
- **メモリ使用量**: 実行あたり約200バイト（無視できるレベル）

### データ保存

- **保存先**: Chrome Local Storage（ブラウザ内に安全に保存）
- **保存タイミング**: CHANGE_URLアクション実行時のみ
- **保持期間**: 24時間（24時間以上経過した実行は自動的に無効化）

### 対応ブラウザ

- Google Chrome（拡張機能）
- Chromium系ブラウザ（Edge、Brave等）

---

## 🔒 既存機能への影響

### 互換性

✅ **既存の自動入力設定はそのまま動作します**

- CHANGE_URLアクションを追加しない場合、従来通り1ページ内での自動入力として動作
- 既存のXPath設定、変数設定、システム設定はすべてそのまま使用可能
- 設定ファイルのフォーマット変更なし（後方互換性完全維持）

### データ

✅ **既存データはそのまま使用可能**

- 過去の実行履歴はそのまま閲覧可能
- AutomationVariables、XPathデータ、システム設定に変更不要
- マイグレーションスクリプトは不要（自動的に後方互換性を保証）

---

## 🚀 アップグレード手順

### インストール方法

**Chrome拡張機能の更新**:

1. Chrome拡張機能管理画面を開く（`chrome://extensions/`）
2. 「デベロッパーモード」をONにする
3. 既存の「Auto-Fill Tool」拡張機能を削除
4. 最新版（v3.1.0）の`dist`フォルダを「パッケージ化されていない拡張機能を読み込む」から読み込む
5. 拡張機能が読み込まれたら完了

### アップグレード後の確認事項

✅ **何も変更する必要はありません**

- 既存の設定はすべてそのまま動作します
- データの移行は不要です
- 新機能を使いたい場合のみ、XPath設定にCHANGE_URLアクションを追加してください

### 新機能を使い始める場合

1. XPath管理画面を開く
2. 複数ページフォームに対応したいWebサイトを選択
3. ページ遷移箇所に「CHANGE_URLアクション」を追加
4. 保存して実行

---

## ❓ よくある質問（FAQ）

### Q1: 既存の設定に影響はありますか？

**A**: いいえ、全く影響ありません。既存のXPath設定、変数、システム設定はすべてそのまま動作します。

### Q2: CHANGE_URLアクションを追加しないとどうなりますか？

**A**: 従来通り、1ページ内での自動入力として動作します。新機能を使わない場合は何も変更する必要はありません。

### Q3: 複数のページでフォームを入力中にブラウザを閉じてしまいました。続きから再開できますか？

**A**: はい、24時間以内であれば、次のページを開くだけで自動的に続きから再開されます。

### Q4: 24時間以上経過した場合はどうなりますか？

**A**: 24時間以上経過した実行は自動的に無効化され、新規実行として扱われます（最初からやり直し）。

### Q5: 同じWebサイトを複数のタブで同時に実行できますか？

**A**: 現在のバージョンでは、複数タブでの同時実行は推奨されません。最初に見つかった実行が使用されます。将来のバージョンでタブ別管理機能を追加予定です。

### Q6: URLマッチングで正規表現を使っている場合、動作に影響はありますか？

**A**: 正規表現を使用している場合、意図しないページで再開される可能性があります。可能な限り、具体的なURLを指定することを推奨します。

### Q7: パフォーマンスへの影響は？

**A**: 測定結果では、わずか3.16%のオーバーヘッドです。ほとんど体感できないレベルです。

### Q8: ページ遷移のたびにChrome Storageに書き込まれますか？

**A**: はい、ただしCHANGE_URLアクション実行時のみです。通常の入力アクション（TYPE、CLICK等）では書き込まれないため、書き込み回数は最小限に抑えられています。

### Q9: 進捗データはどこに保存されますか？

**A**: Chrome Local Storage（ブラウザ内のローカルストレージ）に保存されます。外部サーバーには一切送信されません。

### Q10: 古い進捗データは自動的に削除されますか？

**A**: 24時間以上経過した進捗データは無効化されますが、自動削除機能は現在実装されていません。将来のバージョンで定期クリーンアップ機能を追加予定です。

---

## 🐛 既知の制約事項

### 1. 24時間制限

- **制約**: 24時間以上前の実行は自動再開されません
- **理由**: 古い実行状態の蓄積を防ぎ、ストレージを効率的に管理
- **回避策**: なし（新規実行として扱われます）

### 2. WebsiteId一致が必要

- **制約**: 実行中状態のwebsiteIdと現在のページのwebsiteIdが一致する必要があります
- **理由**: 異なるWebサイトの実行を誤って再開しないため
- **回避策**: 正しいWebsiteIdを設定してください

### 3. CHANGE_URLアクションが必須

- **制約**: 進捗保存はCHANGE_URLアクション実行時のみ行われます
- **理由**: 書き込み頻度を最小限に抑えるため
- **回避策**: ページ遷移箇所にCHANGE_URLアクションを設定してください

### 4. 複数タブでの実行

- **制約**: 同じWebサイトを複数タブで実行した場合、最初に見つかった実行が使用されます
- **理由**: 現在のバージョンではタブ別の実行管理に対応していません
- **回避策**: 1つのタブで実行してください（将来的な改善予定）

---

## 🔧 トラブルシューティング

### 問題: 自動再開されない

**原因1: 24時間以上経過している**
- 確認方法: 自動化変数管理画面から実行履歴を確認
- 対処法: 新規実行として開始してください

**原因2: WebsiteIdが一致していない**
- 確認方法: XPath管理画面でWebsiteId設定を確認
- 対処法: 正しいWebsiteIdを設定してください

**原因3: CHANGE_URLアクションが設定されていない**
- 確認方法: XPath設定にCHANGE_URLアクションが含まれているか確認
- 対処法: ページ遷移箇所にCHANGE_URLアクションを追加してください

**原因4: URLマッチングが不正**
- 確認方法: XPathデータのurlフィールドと現在のURLが一致するか確認
- 対処法: URLパターンを見直し、より具体的なURLに変更してください

### 問題: 意図しないページで再開される

**原因: URL正規表現パターンが広すぎる**
- 確認方法: XPathデータのurlフィールドを確認
- 対処法: より具体的なURLパターンに変更するか、完全一致のURLを使用してください

### 問題: 古い実行状態が残っている

**原因: 24時間以内の実行が複数残っている**
- 確認方法: 自動化変数管理画面から実行履歴を確認
- 対処法: 古い実行状態を手動で削除してください

---

## 📞 サポート

### バグ報告・機能要望

GitHub Issuesをご利用ください:
- リポジトリ: （プロジェクトのGitHub URLを記載）
- Issue作成: 「New Issue」から報告してください

### ドキュメント

詳細なドキュメントは以下をご覧ください:

1. **README.md**:
   - 画面遷移対応機能セクション（使い方、ユースケース例、制約事項）

2. **CHANGELOG.md**:
   - v3.1.0の技術的な変更内容

3. **docs/page-transition-resume/**:
   - `IMPLEMENTATION_PLAN.md`: 実装計画書
   - `TECHNICAL_DESIGN.md`: 技術設計書
   - `PERFORMANCE_TEST_REPORT.md`: パフォーマンステスト結果
   - `task-list.md`: タスク一覧と進捗

### コミュニティ

- 質問・相談: GitHub Discussions（予定）
- Twitter: （プロジェクトのTwitterアカウント）

---

## 🙏 謝辞

この機能の実装にあたり、多くのテストとフィードバックをいただきありがとうございました。

v3.1.0では、以下の成果を達成しました:
- ✅ 21個のテストケース実装（16統合テスト + 5 E2Eテスト）
- ✅ 全テスト合格（100%成功率）
- ✅ パフォーマンス劣化3.16%（目標5%未満を達成）
- ✅ 包括的なドキュメント作成

今後も継続的な改善を行ってまいります。

---

## 📅 今後の予定

### v3.2.0（予定）

- タブ別実行管理機能
- ビジュアル進捗インジケーター（ポップアップUI）
- 手動再開トリガーオプション
- 進捗履歴の可視化

### v3.3.0（予定）

- 定期的な古い進捗データの自動クリーンアップ
- より高度なURL マッチング機能
- デバッグモードの追加

---

## 📄 ライセンス

MIT License

---

## 📌 変更履歴

### v3.1.0 (2025-10-18) - 今回のリリース

- 🎉 **新機能**: 画面遷移対応自動入力
- ✨ **追加**: 自動進捗保存・自動再開・中断復旧機能
- 📝 **ドキュメント**: 包括的なユーザーガイド追加
- 🚀 **パフォーマンス**: 3.16%の軽微なオーバーヘッド
- ✅ **テスト**: 21テストケース追加（100%合格）

### v3.0.0 (2025-10-17)

- UI/UX大幅改善（5フェーズ完了）
- 統一されたデザインシステム
- ナビゲーション改善

### v2.7.0 (2025-01-16)

- データ同期機能実装
- Phase 2.4: Use Cases テスト実装完了

### v2.6.0 (2025-10-16)

- タブ録画機能実装

---

**v3.1.0のダウンロード**: [リリースページ]（URLを記載）

**インストールガイド**: README.mdの「インストール方法」セクションを参照

---

**最終更新日**: 2025年10月18日
**ドキュメントバージョン**: 1.0
**対応バージョン**: Auto-Fill Tool v3.1.0
