## 🤖 1. 機能要件 (Functional Requirements)

| ID | 機能名 | 概要 | 担当エージェント |
| :--- | :--- | :--- | :--- |
| **FR-001** | **初期タスク受付** | ユーザーの自然言語による開発要求を受け付け、開発プロセスを開始する。 | PlannerAgent |
| **FR-002** | **タスク分解・指示** | 要求を「設計」「実装」「テスト」などのサブタスクに分解し、適切な専門エージェントに指示する。 | PlannerAgent |
| **FR-003** | **システム設計** | 要求に基づき、技術スタック、アーキテクチャ、データモデルなどの設計仕様を生成・確定する。 | ArchitectAgent |
| **FR-004** | **コード生成・修正** | 設計仕様およびテストフィードバックに基づき、アプリケーションのソースコードを生成・修正し、共有ファイルシステムに書き込む。 | CoderAgent |
| **FR-005** | **テスト実行・検証** | 生成されたコードに対するテストを自動生成・実行し、結果を解析する。 | TesterAgent |
| **FR-006** | **バグ報告・再修正** | テスト失敗時、エラーログと修正提案をCoderAgentにフィードバックし、修正サイクルを駆動する。 | TesterAgent |
| **FR-007** | **永続的なコード管理** | 開発対象のコードベース（`/project_root`）をEFS（クラウド）またはDocker Volume（ローカル）に保存・管理する。 | CoderAgent, TesterAgent |
| **FR-008** | **外部開発環境連携** | AIエージェントとは別で起動する開発環境（PHP, MySQL, Redis等）にアクセスし、統合テストや動作検証を実行する。 | TesterAgent, CoderAgent |
| **FR-009** | **開発完了報告** | 全てのテストが成功し、タスクが完了した場合、PlannerAgent経由でユーザーに完了を報告する。 | PlannerAgent |

---

## 🛡️ 2. 非機能要件 (Non-Functional Requirements)

| ID | 要件カテゴリ | 概要 | 採用技術/方針 |
| :--- | :--- | :--- | :--- |
| **NFR-001** | **可用性** | AWS ECS Fargate上で冗長構成（複数AZ）で実行される。 | AWS ECS Fargate, Multi-AZ VPC |
| **NFR-002** | **スケーラビリティ** | 各エージェントコンテナはECS Auto Scalingにより水平スケーリング可能である。 | ECS Service Auto Scaling |
| **NFR-003** | **性能 (応答性)** | エージェント間の会話は、HTTP/JSONベースのMCPサーバーにより低レイテンシで処理されること。 | Fast MCP Server (FastAPI), ローカルネットワーク |
| **NFR-004** | **セキュリティ** | AWSリソースへのアクセスは、IAM Task Roleにより最小権限の原則に従うこと。 | IAM Task Role, VPC内でのエージェント間通信 |
| **NFR-005** | **デプロイ容易性** | AWS CDKを用いて、ローカルからAWSクラウドへのデプロイメントを完全に自動化する。 | AWS CDK (TypeScript) |
| **NFR-006** | **監視・ロギング** | 各エージェントの実行ログ、およびMCP通信の記録は、AWS CloudWatch Logsに統合されること。 | AWS CloudWatch Logs |
| **NFR-007** | **外部環境統合** | 開発環境とは独立したコンテナ群（検証環境）との通信が可能であること。 | Docker Network Bridge, Kubernetes Service Discovery |
| **NFR-008** | **コンテナオーケストレーション** | ローカル環境ではk3s、AWS環境ではEKSを使用してコンテナを管理すること。 | k3s (ローカル), Amazon EKS (AWS) |