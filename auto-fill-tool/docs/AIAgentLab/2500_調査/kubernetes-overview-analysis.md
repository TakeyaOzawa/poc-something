# Kubernetes æ¦‚è¦ãƒ»æ¦‚å¿µåˆ†æãƒ¬ãƒãƒ¼ãƒˆ

## èª¿æŸ»æ¦‚è¦

**èª¿æŸ»æ—¥**: 2025-10-31  
**èª¿æŸ»ç›®çš„**: AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹Kubernetesã®å¿…è¦æ€§ã¨é©ç”¨å¯èƒ½æ€§ã®è©•ä¾¡  
**å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ **: ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–‹ç™ºç’°å¢ƒï¼ˆAI Agents + å¤–éƒ¨é–‹ç™ºç’°å¢ƒï¼‰

---

## 1. Kubernetes æ¦‚è¦

### 1.1. Kubernetesã¨ã¯

Kubernetesã¯ã€ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã€ç®¡ç†ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ã‚³ãƒ³ãƒ†ãƒŠã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚

#### ä¸»è¦ãªç‰¹å¾´
- **å®£è¨€çš„è¨­å®š**: YAMLãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã«ã‚ˆã‚‹æœ›ã¾ã—ã„çŠ¶æ…‹ã®å®šç¾©
- **è‡ªå‹•ä¿®å¾©**: éšœå®³æ™‚ã®è‡ªå‹•å¾©æ—§ã¨ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
- **æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°**: è² è·ã«å¿œã˜ãŸè‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆ/ã‚¤ãƒ³
- **ã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒª**: å†…è”µDNSã«ã‚ˆã‚‹å‹•çš„ã‚µãƒ¼ãƒ“ã‚¹ç™ºè¦‹
- **ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ**: ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ ãªã—ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–°

### 1.2. æ ¸ã¨ãªã‚‹æ¦‚å¿µ

#### ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼æ§‹æˆ
```
Master Node (Control Plane)
â”œâ”€â”€ API Server      # REST APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ etcd           # åˆ†æ•£ã‚­ãƒ¼ãƒãƒªãƒ¥ãƒ¼ã‚¹ãƒˆã‚¢
â”œâ”€â”€ Scheduler      # Podé…ç½®æ±ºå®š
â””â”€â”€ Controller     # çŠ¶æ…‹ç®¡ç†

Worker Node
â”œâ”€â”€ kubelet        # ãƒãƒ¼ãƒ‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”œâ”€â”€ kube-proxy     # ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ—ãƒ­ã‚­ã‚·
â””â”€â”€ Container Runtime (Docker/containerd)
```

#### ä¸»è¦ãƒªã‚½ãƒ¼ã‚¹

| ãƒªã‚½ãƒ¼ã‚¹ | å½¹å‰² | ä¾‹ |
|---------|------|-----|
| **Pod** | æœ€å°ãƒ‡ãƒ—ãƒ­ã‚¤å˜ä½ï¼ˆ1ã¤ä»¥ä¸Šã®ã‚³ãƒ³ãƒ†ãƒŠï¼‰ | `nginx-pod` |
| **Deployment** | Podã®å®£è¨€çš„ç®¡ç†ï¼ˆãƒ¬ãƒ—ãƒªã‚«ã€æ›´æ–°æˆ¦ç•¥ï¼‰ | `web-deployment` |
| **Service** | Podã¸ã®å®‰å®šã—ãŸãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ | `web-service` |
| **ConfigMap** | è¨­å®šãƒ‡ãƒ¼ã‚¿ã®å¤–éƒ¨åŒ– | `app-config` |
| **Secret** | æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç† | `db-credentials` |
| **Namespace** | ãƒªã‚½ãƒ¼ã‚¹ã®è«–ç†åˆ†é›¢ | `production`, `staging` |
| **Ingress** | å¤–éƒ¨ã‹ã‚‰ã®HTTPã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ | `web-ingress` |

---

## 2. Docker Swarm ã¨ã®æ¯”è¼ƒ

### 2.1. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¯”è¼ƒ

| é …ç›® | Kubernetes | Docker Swarm |
|------|------------|--------------|
| **è¤‡é›‘ã•** | é«˜ï¼ˆå­¦ç¿’ã‚³ã‚¹ãƒˆã‚ã‚Šï¼‰ | ä½ï¼ˆDockerã®å»¶é•·ï¼‰ |
| **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£** | å¤§è¦æ¨¡ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼å¯¾å¿œ | ä¸­å°è¦æ¨¡å‘ã‘ |
| **ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ** | è±Šå¯Œï¼ˆHelm, Istioç­‰ï¼‰ | é™å®šçš„ |
| **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯** | é«˜åº¦ï¼ˆNetworkPolicyç­‰ï¼‰ | ã‚·ãƒ³ãƒ—ãƒ« |
| **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸** | å¤šæ§˜ãªãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚¿ã‚¤ãƒ— | åŸºæœ¬çš„ãªãƒœãƒªãƒ¥ãƒ¼ãƒ  |
| **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£** | RBAC, Pod Security | åŸºæœ¬çš„ãªèªè¨¼ |

### 2.2. æ©Ÿèƒ½æ¯”è¼ƒ

#### Kubernetes ã®å„ªä½æ€§
```yaml
# é«˜åº¦ãªãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥
apiVersion: apps/v1
kind: Deployment
spec:
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 1
  template:
    spec:
      containers:
      - name: app
        resources:
          requests:
            memory: "256Mi"
            cpu: "250m"
          limits:
            memory: "512Mi"
            cpu: "500m"
```

#### Docker Swarm ã®ã‚·ãƒ³ãƒ—ãƒ«ã•
```yaml
# docker-compose.yml
version: '3.8'
services:
  web:
    image: nginx
    deploy:
      replicas: 3
      update_config:
        parallelism: 1
        delay: 10s
```

### 2.3. é¸æŠæŒ‡é‡

#### Kubernetes ã‚’é¸ã¶ã¹ãã‚±ãƒ¼ã‚¹
- **å¤§è¦æ¨¡ã‚·ã‚¹ãƒ†ãƒ **: 100+ ã‚³ãƒ³ãƒ†ãƒŠ
- **ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹**: è¤‡é›‘ãªã‚µãƒ¼ãƒ“ã‚¹é–“é€šä¿¡
- **ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚º**: é«˜å¯ç”¨æ€§ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶
- **ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–**: AWS/GCP/Azureçµ±åˆ
- **DevOpsæˆç†Ÿåº¦**: CI/CDã€ç›£è¦–ã®é«˜åº¦åŒ–

#### Docker Swarm ã‚’é¸ã¶ã¹ãã‚±ãƒ¼ã‚¹
- **å°è¦æ¨¡ã‚·ã‚¹ãƒ†ãƒ **: 10-50 ã‚³ãƒ³ãƒ†ãƒŠ
- **ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆ**: ãƒ¢ãƒãƒªã‚·ãƒƒã‚¯ã€œå°è¦æ¨¡ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹
- **å­¦ç¿’ã‚³ã‚¹ãƒˆé‡è¦–**: DockerçµŒé¨“è€…ã®ã¿ã®ãƒãƒ¼ãƒ 
- **è¿…é€Ÿãªç«‹ã¡ä¸Šã’**: ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ãƒ»MVPé–‹ç™º

---

## 3. Kubernetes ä½¿ã„æ–¹

### 3.1. ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

#### k3s (æ¨å¥¨ - è»½é‡)
```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl -sfL https://get.k3s.io | sh -

# ç¢ºèª
sudo k3s kubectl get nodes

# kubectlã‚¨ã‚¤ãƒªã‚¢ã‚¹
echo 'alias kubectl="sudo k3s kubectl"' >> ~/.bashrc
```

#### minikube (é–‹ç™ºç”¨)
```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
sudo install minikube-linux-amd64 /usr/local/bin/minikube

# èµ·å‹•
minikube start --driver=docker
```

### 3.2. åŸºæœ¬çš„ãªä½¿ã„æ–¹

#### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# 1. Deploymentã®ä½œæˆ
kubectl create deployment nginx --image=nginx

# 2. Serviceã®å…¬é–‹
kubectl expose deployment nginx --port=80 --type=NodePort

# 3. çŠ¶æ…‹ç¢ºèª
kubectl get pods,services

# 4. ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
kubectl scale deployment nginx --replicas=3

# 5. å‰Šé™¤
kubectl delete deployment nginx
kubectl delete service nginx
```

#### ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã®ç®¡ç†
```yaml
# app.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: web-app
spec:
  replicas: 3
  selector:
    matchLabels:
      app: web-app
  template:
    metadata:
      labels:
        app: web-app
    spec:
      containers:
      - name: web
        image: nginx:alpine
        ports:
        - containerPort: 80
---
apiVersion: v1
kind: Service
metadata:
  name: web-service
spec:
  selector:
    app: web-app
  ports:
  - port: 80
    targetPort: 80
  type: LoadBalancer
```

```bash
# ãƒ‡ãƒ—ãƒ­ã‚¤
kubectl apply -f app.yaml

# å‰Šé™¤
kubectl delete -f app.yaml
```

### 3.3. é«˜åº¦ãªæ©Ÿèƒ½

#### ConfigMapã¨Secret
```yaml
# è¨­å®šã®å¤–éƒ¨åŒ–
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  database_url: "mysql://db:3306/myapp"
  debug_mode: "true"
---
apiVersion: v1
kind: Secret
metadata:
  name: app-secrets
type: Opaque
data:
  db_password: cGFzc3dvcmQ=  # base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
```

#### ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹åˆ†é›¢
```bash
# ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹ä½œæˆ
kubectl create namespace production
kubectl create namespace staging

# ç‰¹å®šãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹ã«ãƒ‡ãƒ—ãƒ­ã‚¤
kubectl apply -f app.yaml -n production

# ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹é–“é€šä¿¡
# service-name.namespace.svc.cluster.local
```

---

## 4. æ¡ç”¨ä¾‹ã¨ä¸è¦ãªä¾‹

### 4.1. Kubernetesæ¡ç”¨ãŒé©åˆ‡ãªä¾‹

#### ğŸ¢ ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
```yaml
# ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆä¾‹
services:
  - user-service (èªè¨¼ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†)
  - order-service (æ³¨æ–‡å‡¦ç†)
  - payment-service (æ±ºæ¸ˆå‡¦ç†)
  - notification-service (é€šçŸ¥)
  - api-gateway (APIã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤)
```

**æ¡ç”¨ç†ç”±**:
- ã‚µãƒ¼ãƒ“ã‚¹é–“ã®è¤‡é›‘ãªä¾å­˜é–¢ä¿‚
- ç‹¬ç«‹ã—ãŸã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°è¦ä»¶
- é«˜å¯ç”¨æ€§ãƒ»ç½å®³å¾©æ—§è¦ä»¶
- è¤‡æ•°ãƒãƒ¼ãƒ ã§ã®é–‹ç™º

#### ğŸš€ SaaS ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
```yaml
# ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆæ§‹æˆ
tenants:
  - tenant-a-namespace
  - tenant-b-namespace
  - tenant-c-namespace
```

**æ¡ç”¨ç†ç”±**:
- ãƒ†ãƒŠãƒ³ãƒˆé–“ã®å®Œå…¨åˆ†é›¢
- å‹•çš„ãªãƒªã‚½ãƒ¼ã‚¹å‰²ã‚Šå½“ã¦
- è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
- ç›£è¦–ãƒ»ãƒ­ã‚°é›†ç´„

#### ğŸ”¬ æ©Ÿæ¢°å­¦ç¿’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
```yaml
# MLãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
pipeline:
  - data-ingestion-job
  - preprocessing-job
  - training-job (GPU)
  - model-serving-deployment
```

**æ¡ç”¨ç†ç”±**:
- ãƒãƒƒãƒã‚¸ãƒ§ãƒ–ã¨ã‚µãƒ¼ãƒ“ã‚¹ã®æ··åœ¨
- GPU/CPUãƒªã‚½ãƒ¼ã‚¹ã®åŠ¹ç‡åˆ©ç”¨
- ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ç®¡ç†
- å®Ÿé¨“ç’°å¢ƒã®åˆ†é›¢

### 4.2. Kubernetes ãŒä¸è¦ãªä¾‹

#### ğŸ  å€‹äººãƒ–ãƒ­ã‚°ãƒ»å°è¦æ¨¡ã‚µã‚¤ãƒˆ
```yaml
# ã‚·ãƒ³ãƒ—ãƒ«æ§‹æˆ
services:
  - wordpress
  - mysql
```

**ä¸è¦ãªç†ç”±**:
- å˜ç´”ãªæ§‹æˆï¼ˆ2-3ã‚³ãƒ³ãƒ†ãƒŠï¼‰
- ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ä¸è¦
- é«˜å¯ç”¨æ€§ä¸è¦
- Docker Composeã§ååˆ†

#### ğŸ§ª ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ãƒ»MVPé–‹ç™º
```yaml
# é–‹ç™ºåˆæœŸæ®µéš
services:
  - frontend (React)
  - backend (Node.js)
  - database (PostgreSQL)
```

**ä¸è¦ãªç†ç”±**:
- è¿…é€Ÿãªé–‹ç™ºãƒ»æ¤œè¨¼ãŒå„ªå…ˆ
- è¦ä»¶ãŒä¸ç¢ºå®š
- å­¦ç¿’ã‚³ã‚¹ãƒˆãŒé–‹ç™ºé€Ÿåº¦ã‚’é˜»å®³
- å˜ä¸€é–‹ç™ºè€…ãƒ»å°ãƒãƒ¼ãƒ 

#### ğŸ“Š ãƒ‡ãƒ¼ã‚¿åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
```yaml
# ãƒãƒƒãƒå‡¦ç†ä¸­å¿ƒ
services:
  - jupyter-notebook
  - data-processor
  - report-generator
```

**ä¸è¦ãªç†ç”±**:
- å¯¾è©±çš„ãªä½œæ¥­ãŒä¸­å¿ƒ
- å®šæœŸå®Ÿè¡Œã®ãƒãƒƒãƒå‡¦ç†
- cron + Docker ã§ååˆ†
- è¤‡é›‘ãªã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¸è¦

---

## 5. AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã§ã®å¿…è¦æ€§åˆ†æ

### 5.1. ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

#### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ
```
AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå±¤:
â”œâ”€â”€ PlannerAgent (ã‚¿ã‚¹ã‚¯è¨ˆç”»)
â”œâ”€â”€ ArchitectAgent (è¨­è¨ˆ)
â”œâ”€â”€ CoderAgent (å®Ÿè£…)
â””â”€â”€ TesterAgent (ãƒ†ã‚¹ãƒˆ)

å¤–éƒ¨é–‹ç™ºç’°å¢ƒ:
â”œâ”€â”€ PHP Application
â”œâ”€â”€ MySQL Database
â”œâ”€â”€ Redis Cache
â””â”€â”€ Nginx Web Server
```

#### æŠ€è¡“çš„è¦ä»¶
- **ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡**: HTTP/MCP ãƒ—ãƒ­ãƒˆã‚³ãƒ«
- **å¤–éƒ¨ç’°å¢ƒã‚¢ã‚¯ã‚»ã‚¹**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ“ä½œ
- **ã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤**: å‹•çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: è¤‡æ•°ã‚µãƒ¼ãƒ“ã‚¹é€£æºãƒ†ã‚¹ãƒˆ

### 5.2. Kubernetesæ¡ç”¨ã®å¿…è¦æ€§è©•ä¾¡

#### âœ… æ¡ç”¨ã™ã¹ãç†ç”±

##### 1. **ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹åˆ†é›¢**
```yaml
# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ†é›¢
namespaces:
  - ai-agents      # AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå°‚ç”¨
  - external-env   # é–‹ç™ºç’°å¢ƒå°‚ç”¨
  - monitoring     # ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨é–‹ç™ºç’°å¢ƒã®å®Œå…¨åˆ†é›¢
- ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™ãƒ»ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒãƒªã‚·ãƒ¼é©ç”¨
- éšœå®³ã®å½±éŸ¿ç¯„å›²é™å®š

##### 2. **Service Discovery**
```yaml
# è‡ªå‹•ã‚µãƒ¼ãƒ“ã‚¹ç™ºè¦‹
endpoints:
  - planner-agent.ai-agents.svc.cluster.local:8080
  - mysql.external-env.svc.cluster.local:3306
  - redis.external-env.svc.cluster.local:6379
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- å‹•çš„ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè§£æ±º
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç°¡ç´ åŒ–
- ã‚µãƒ¼ãƒ“ã‚¹è¿½åŠ æ™‚ã®è‡ªå‹•èªè­˜

##### 3. **ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†**
```yaml
# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆ¥ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™
resources:
  coder-agent:
    requests: {memory: "512Mi", cpu: "500m"}
    limits: {memory: "1Gi", cpu: "1000m"}
  tester-agent:
    requests: {memory: "256Mi", cpu: "250m"}
    limits: {memory: "512Mi", cpu: "500m"}
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆ¥ã®é©åˆ‡ãªãƒªã‚½ãƒ¼ã‚¹å‰²ã‚Šå½“ã¦
- ãƒªã‚½ãƒ¼ã‚¹ç«¶åˆã®é˜²æ­¢
- ã‚³ã‚¹ãƒˆæœ€é©åŒ–

##### 4. **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**
```yaml
# è² è·ã«å¿œã˜ãŸè‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
autoscaling:
  coder-agent: 1-5 replicas
  tester-agent: 1-3 replicas
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- é–‹ç™ºã‚¿ã‚¹ã‚¯å¢—åŠ æ™‚ã®è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆ
- ã‚¢ã‚¤ãƒ‰ãƒ«æ™‚ã®ãƒªã‚½ãƒ¼ã‚¹ç¯€ç´„
- å°†æ¥ã®æ‹¡å¼µæ€§ç¢ºä¿

##### 5. **AWSçµ±åˆ**
```typescript
// CDKã§ã®EKSæ§‹æˆ
const cluster = new eks.Cluster(this, 'AiDevCluster', {
  version: eks.KubernetesVersion.V1_28,
  nodeGroups: [{
    instanceTypes: [ec2.InstanceType.of(
      ec2.InstanceClass.M6G, // Graviton (ARM64)
      ec2.InstanceSize.MEDIUM
    )]
  }]
});
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- AWS CDKã§ã®ã‚¤ãƒ³ãƒ•ãƒ© as Code
- Gravitonã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã®ã‚³ã‚¹ãƒˆå‰Šæ¸›
- AWS ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆEFSã€RDSç­‰ï¼‰ã¨ã®çµ±åˆ

#### âš ï¸ æ¤œè¨ã™ã¹ãèª²é¡Œ

##### 1. **å­¦ç¿’ã‚³ã‚¹ãƒˆ**
- Kubernetesã®æ¦‚å¿µç¿’å¾—
- YAMLãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆä½œæˆ
- ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

##### 2. **é‹ç”¨è¤‡é›‘æ€§**
- ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ç®¡ç†
- ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ä½œæ¥­
- ç›£è¦–ãƒ»ãƒ­ã‚°ç®¡ç†

##### 3. **åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
- ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒæ§‹ç¯‰
- CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆ
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

### 5.3. ä»£æ›¿æ¡ˆã¨ã®æ¯”è¼ƒ

#### Docker Compose (ç¾çŠ¶)
```yaml
# åˆ©ç‚¹
- ã‚·ãƒ³ãƒ—ãƒ«ãªè¨­å®š
- è¿…é€Ÿãªç«‹ã¡ä¸Šã’
- å­¦ç¿’ã‚³ã‚¹ãƒˆãŒä½ã„

# æ¬ ç‚¹
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£é™ç•Œ
- ã‚µãƒ¼ãƒ“ã‚¹ç™ºè¦‹ã®åˆ¶é™
- æœ¬ç•ªç’°å¢ƒã¨ã®å·®ç•°
```

#### Kubernetes (ææ¡ˆ)
```yaml
# åˆ©ç‚¹
- æœ¬æ ¼çš„ãªã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- AWSçµ±åˆ
- å°†æ¥ã®æ‹¡å¼µæ€§

# æ¬ ç‚¹
- å­¦ç¿’ã‚³ã‚¹ãƒˆ
- åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®è¤‡é›‘ã•
- é‹ç”¨ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰
```

### 5.4. æ®µéšçš„ç§»è¡Œæˆ¦ç•¥

#### Phase 1: ãƒ­ãƒ¼ã‚«ãƒ«æ¤œè¨¼ (1-2é€±é–“)
```bash
# k3sã§ã®æ¦‚å¿µå®Ÿè¨¼
1. k3sã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼æ§‹ç¯‰
2. AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚³ãƒ³ãƒ†ãƒŠåŒ–
3. åŸºæœ¬çš„ãªService Discoveryæ¤œè¨¼
4. ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹åˆ†é›¢ãƒ†ã‚¹ãƒˆ
```

#### Phase 2: æ©Ÿèƒ½å®Ÿè£… (2-3é€±é–“)
```bash
# å®Œå…¨æ©Ÿèƒ½å®Ÿè£…
1. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡ã®å®Ÿè£…
2. å¤–éƒ¨ç’°å¢ƒã‚¢ã‚¯ã‚»ã‚¹ã®å®Ÿè£…
3. ConfigMap/Secretã®æ´»ç”¨
4. ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™ã®è¨­å®š
```

#### Phase 3: AWSç§»è¡Œ (1-2é€±é–“)
```bash
# ã‚¯ãƒ©ã‚¦ãƒ‰å±•é–‹
1. CDKã§ã®EKSæ§‹ç¯‰
2. CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆ
3. ç›£è¦–ãƒ»ãƒ­ã‚°è¨­å®š
4. æœ¬ç•ªé‹ç”¨é–‹å§‹
```

---

## 6. çµè«–ã¨æ¨å¥¨äº‹é …

### 6.1. ç·åˆè©•ä¾¡

AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹Kubernetesæ¡ç”¨ã¯**æ¨å¥¨**ã—ã¾ã™ã€‚

#### ä¸»ãªæ ¹æ‹ 
1. **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®è¤‡é›‘æ€§**: 4ã¤ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ + 4ã¤ã®å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹
2. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶**: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨é–‹ç™ºç’°å¢ƒã®åˆ†é›¢
3. **å°†æ¥ã®æ‹¡å¼µæ€§**: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¿½åŠ ã€ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œ
4. **AWSçµ±åˆ**: CDKã€EKSã€Gravitonã®æ´»ç”¨
5. **é‹ç”¨åŠ¹ç‡**: Service Discoveryã€è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

### 6.2. æ¨å¥¨å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

#### ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ: k3s
```bash
# è»½é‡ã§é«˜æ©Ÿèƒ½
- ARM64æœ€é©åŒ–
- 200MBä»¥ä¸‹ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
- 30ç§’ä»¥ä¸‹ã®èµ·å‹•æ™‚é–“
- æœ¬ç•ªç’°å¢ƒã¨ã®äº’æ›æ€§
```

#### AWSç’°å¢ƒ: EKS
```bash
# ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå¯¾å¿œ
- ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹
- AWSçµ±åˆ
- Gravitonã‚µãƒãƒ¼ãƒˆ
- é«˜å¯ç”¨æ€§
```

### 6.3. æˆåŠŸè¦å› 

1. **æ®µéšçš„ç§»è¡Œ**: Docker Compose â†’ k3s â†’ EKS
2. **å­¦ç¿’æŠ•è³‡**: ãƒãƒ¼ãƒ ã®Kubernetesç¿’å¾—
3. **è‡ªå‹•åŒ–**: CI/CDã€ç›£è¦–ã®æ•´å‚™
4. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: é‹ç”¨æ‰‹é †ã®æ–‡æ›¸åŒ–

### 6.4. ãƒªã‚¹ã‚¯è»½æ¸›ç­–

1. **è¤‡é›‘æ€§ç®¡ç†**: Helmãƒãƒ£ãƒ¼ãƒˆã®æ´»ç”¨
2. **é‹ç”¨è² è·**: ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆEKSï¼‰ã®åˆ©ç”¨
3. **å­¦ç¿’ã‚³ã‚¹ãƒˆ**: æ®µéšçš„ãªæ©Ÿèƒ½å°å…¥
4. **éšœå®³å¯¾å¿œ**: é©åˆ‡ãªç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã®ç‰¹æ€§ï¼ˆè¤‡æ•°ã‚µãƒ¼ãƒ“ã‚¹ã€å‹•çš„ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã€AWSçµ±åˆï¼‰ã‚’è€ƒæ…®ã™ã‚‹ã¨ã€Kubernetesã¯æœ€é©ãªé¸æŠè‚¢ã§ã‚ã‚Šã€é•·æœŸçš„ãªæˆåŠŸã‚’æ”¯ãˆã‚‹åŸºç›¤ã¨ãªã‚Šã¾ã™ã€‚
