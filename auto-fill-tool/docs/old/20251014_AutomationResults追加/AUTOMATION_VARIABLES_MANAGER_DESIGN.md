# AutomationVariables Manager - Design Document

## æ¦‚è¦

Automation Variablesï¼ˆè‡ªå‹•åŒ–å¤‰æ•°ï¼‰ã‚’ç®¡ç†ã™ã‚‹ç”»é¢ã‚’æ–°è¦ä½œæˆã—ã¾ã™ã€‚ã“ã®ç”»é¢ã§ã¯ã€å¤‰æ•°ã®ä¸€è¦§è¡¨ç¤ºã€è¿½åŠ ã€ç·¨é›†ã€å‰Šé™¤ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

## ç¾çŠ¶åˆ†æ

### ç¾åœ¨ã®localStorageæ§‹é€ 

ç¾åœ¨ã€`automationVariables` ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼ï¼ˆè¾æ›¸å‹ï¼‰ã§ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ï¼š

```typescript
// ç¾åœ¨ã®æ§‹é€ 
{
  "automationVariables": {
    "websiteId1": {
      "websiteId": "websiteId1",
      "variables": {
        "username": "test@example.com",
        "password": "testpass123"
      },
      "status": "active",
      "updatedAt": "2025-10-15T10:00:00.000Z"
    },
    "websiteId2": { ... }
  }
}
```

### èª²é¡Œ

1. **é…åˆ—å½¢å¼ã¸ã®ç§»è¡ŒãŒå¿…è¦**: ç®¡ç†ç”»é¢ã§ä¸€è¦§è¡¨ç¤ºã—ã‚„ã™ã„é…åˆ—å½¢å¼ã¸ã®å¤‰æ›´ãŒå¿…è¦
2. **CRUDæ“ä½œã®ç”»é¢ãŒãªã„**: ç¾åœ¨ã¯å¤‰æ•°ç®¡ç†ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã§Websiteã”ã¨ã«ç·¨é›†ã™ã‚‹ã®ã¿
3. **ä¸€è¦§æ€§ã®æ¬ å¦‚**: ã™ã¹ã¦ã®AutomationVariablesã‚’æ¨ªæ–­çš„ã«ç¢ºèªãƒ»ç®¡ç†ã§ããªã„

## å¤‰æ›´å†…å®¹

### 1. localStorageæ§‹é€ ã®å¤‰æ›´

é…åˆ—å½¢å¼ã«å¤‰æ›´ã—ã€ç®¡ç†ã—ã‚„ã™ãã—ã¾ã™ï¼š

```typescript
// æ–°ã—ã„æ§‹é€ 
{
  "automationVariables": [
    {
      "id": "unique-id-1", // æ–°è¦è¿½åŠ : ä¸€æ„ãªID
      "websiteId": "websiteId1",
      "variables": {
        // å‹•çš„ãªæ§‹é€ : ãƒ¬ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã£ã¦é …ç›®åã¨æ•°ãŒå¤‰ã‚ã‚‹
        "username": "test@example.com",
        "password": "testpass123"
      },
      "status": "active",
      "updatedAt": "2025-10-15T10:00:00.000Z"
    },
    {
      "id": "unique-id-2",
      "websiteId": "websiteId2",
      "variables": {
        // åˆ¥ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã§ã¯ç•°ãªã‚‹é …ç›®æ§‹æˆ
        "api_key": "key12345",
        "token": "token67890",
        "endpoint": "https://api.example.com"
      },
      "status": "test",
      "updatedAt": "2025-10-15T11:00:00.000Z"
    }
  ]
}
```

**variables ã®å‹•çš„ãªæ§‹é€ :**
- `variables` ã¯ `{ [key: string]: string }` å‹ã§ã€ä»»æ„ã®é …ç›®ã‚’ä¿æŒå¯èƒ½
- ãƒ¬ã‚³ãƒ¼ãƒ‰ã”ã¨ã«é …ç›®åã¨æ•°ãŒç•°ãªã‚‹ï¼ˆusername/password, api_key/token ãªã©ï¼‰
- UI ã§ã®è¡¨ç¤ºæ™‚ã« Website Repository ã‹ã‚‰ã‚µã‚¤ãƒˆåã‚’å‹•çš„ã«å–å¾—

### 2. ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æ‹¡å¼µ

`AutomationVariables` ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«ä»¥ä¸‹ã‚’è¿½åŠ ï¼š
- `id`: ä¸€æ„ãªè­˜åˆ¥å­ï¼ˆUUID v4ï¼‰

**æ³¨æ„:** ã‚µã‚¤ãƒˆå (`websiteName`) ã¯ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«å«ã‚ãšã€è¡¨ç¤ºæ™‚ã« `WebsiteRepository` ã‹ã‚‰å‹•çš„ã«å–å¾—ã—ã¾ã™ã€‚

### 3. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’æ–°å½¢å¼ã«ç§»è¡Œã™ã‚‹å‡¦ç†ã‚’å®Ÿè£…ï¼š
- ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼ â†’ é…åˆ—å½¢å¼
- å„ã‚¨ãƒ³ãƒˆãƒªã« `id` ã‚’ä»˜ä¸ï¼ˆUUID v4 ã§è‡ªå‹•ç”Ÿæˆï¼‰

## ç”»é¢æ§‹æˆ

### UI ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”¤ Automation Variables ç®¡ç†                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [â• æ–°è¦ä½œæˆ] [ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ] [ğŸ“¥ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ] [â† æˆ»ã‚‹]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼: [å…¨ã‚µã‚¤ãƒˆ â–¾]                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Site Name: Example Site                                 â”‚ â”‚
â”‚ â”‚ Website ID: abc123...                                   â”‚ â”‚
â”‚ â”‚ Status: Active                                          â”‚ â”‚
â”‚ â”‚ Variables: username, password (2 variables)             â”‚ â”‚
â”‚ â”‚ Updated: 2025-10-15 10:00:00                           â”‚ â”‚
â”‚ â”‚                          [âœï¸ ç·¨é›†] [ğŸ—‘ï¸ å‰Šé™¤] [ğŸ“‹ è¤‡è£½] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Site Name: Another Site                                 â”‚ â”‚
â”‚ â”‚ ...                                                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç·¨é›†/æ–°è¦ä½œæˆãƒ¢ãƒ¼ãƒ€ãƒ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Automation Variables ã‚’ç·¨é›†           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã‚µã‚¤ãƒˆ: [Example Site â–¾]             â”‚
â”‚                                       â”‚
â”‚ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:                           â”‚
â”‚ â—‹ Active  â—‹ Inactive  â—‹ Test        â”‚
â”‚                                       â”‚
â”‚ å¤‰æ•°ä¸€è¦§:                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ username: test@example.com      â”‚  â”‚
â”‚ â”‚                      [ğŸ—‘ï¸ å‰Šé™¤] â”‚  â”‚
â”‚ â”‚ password: ********              â”‚  â”‚
â”‚ â”‚                      [ğŸ—‘ï¸ å‰Šé™¤] â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                       â”‚
â”‚ æ–°ã—ã„å¤‰æ•°ã‚’è¿½åŠ :                     â”‚
â”‚ å¤‰æ•°å: [____________]               â”‚
â”‚ å€¤:     [____________]               â”‚
â”‚ [â• è¿½åŠ ]                            â”‚
â”‚                                       â”‚
â”‚ [ğŸ’¾ ä¿å­˜] [âœ– ã‚­ãƒ£ãƒ³ã‚»ãƒ«]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ä¸€è¦§

### 1. Core Use Cases

#### GetAllAutomationVariablesUseCase
- **ç›®çš„**: ã™ã¹ã¦ã® Automation Variables ã‚’å–å¾—
- **å…¥åŠ›**: ãªã—
- **å‡ºåŠ›**: `AutomationVariables[]`

#### GetAutomationVariablesByIdUseCase
- **ç›®çš„**: ID ã§ç‰¹å®šã® Automation Variables ã‚’å–å¾—
- **å…¥åŠ›**: `id: string`
- **å‡ºåŠ›**: `AutomationVariables | null`

#### GetAutomationVariablesByWebsiteIdUseCase
- **ç›®çš„**: Website ID ã§ Automation Variables ã‚’å–å¾—
- **å…¥åŠ›**: `websiteId: string`
- **å‡ºåŠ›**: `AutomationVariables | null`

#### SaveAutomationVariablesUseCase (æ—¢å­˜)
- **ç›®çš„**: Automation Variables ã‚’ä¿å­˜/æ›´æ–°
- **å…¥åŠ›**: `AutomationVariables`
- **å‡ºåŠ›**: `void`

#### DeleteAutomationVariablesUseCase
- **ç›®çš„**: Automation Variables ã‚’å‰Šé™¤
- **å…¥åŠ›**: `id: string`
- **å‡ºåŠ›**: `void`

#### DuplicateAutomationVariablesUseCase
- **ç›®çš„**: Automation Variables ã‚’è¤‡è£½
- **å…¥åŠ›**: `id: string`
- **å‡ºåŠ›**: `AutomationVariables`

### 2. Import/Export Use Cases

#### ExportAutomationVariablesUseCase (æ—¢å­˜)
- **ç›®çš„**: CSV å½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- **å…¥åŠ›**: ãªã—
- **å‡ºåŠ›**: `string` (CSV)

#### ImportAutomationVariablesUseCase (æ—¢å­˜)
- **ç›®çš„**: CSV å½¢å¼ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- **å…¥åŠ›**: `csvText: string`
- **å‡ºåŠ›**: `void`

### 3. Migration Use Case

#### MigrateAutomationVariablesStorageUseCase
- **ç›®çš„**: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼ã‹ã‚‰é…åˆ—å½¢å¼ã¸ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- **å…¥åŠ›**: ãªã—
- **å‡ºåŠ›**: `{ migrated: boolean; count: number }`
- **å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã€ã¾ãŸã¯ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”»é¢ã‹ã‚‰æ‰‹å‹•å®Ÿè¡Œ

## å®Ÿè£…æ‰‹é †

### Phase 1: ãƒ‡ãƒ¼ã‚¿å±¤ã®æº–å‚™ (1-2æ—¥)

#### 1.1 ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æ‹¡å¼µ
- [ ] `AutomationVariables` ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã« `id` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ 
- [ ] `AutomationVariables.create()` ã§è‡ªå‹•çš„ã« UUID ã‚’ç”Ÿæˆ
- [ ] `fromExisting()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ï¼ˆãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰
- [ ] æ—¢å­˜ãƒ†ã‚¹ãƒˆã®æ›´æ–°

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `src/domain/entities/AutomationVariables.ts`
- `src/domain/entities/__tests__/AutomationVariables.test.ts`

#### 1.2 Repository ã®æ›´æ–°
- [ ] `ChromeStorageAutomationVariablesRepository` ã‚’é…åˆ—å½¢å¼ã«å¯¾å¿œ
- [ ] `loadStorage()` ã§é…åˆ—ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä¸¡æ–¹ã®å½¢å¼ã‚’ã‚µãƒãƒ¼ãƒˆï¼ˆå¾Œæ–¹äº’æ›æ€§ï¼‰
- [ ] `save()`, `load()`, `loadAll()`, `delete()` ã‚’é…åˆ—å½¢å¼ã§å‹•ä½œã™ã‚‹ã‚ˆã†ä¿®æ­£
- [ ] æ—¢å­˜ãƒ†ã‚¹ãƒˆã®æ›´æ–°

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `src/infrastructure/repositories/ChromeStorageAutomationVariablesRepository.ts`
- `src/infrastructure/repositories/__tests__/ChromeStorageAutomationVariablesRepository.test.ts`

#### 1.3 ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†ã®å®Ÿè£…
- [ ] `MigrateAutomationVariablesStorageUseCase` ã®å®Ÿè£…
- [ ] ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼ â†’ é…åˆ—å½¢å¼ã¸ã®å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯
- [ ] å„ã‚¨ãƒ³ãƒˆãƒªã« UUID ã‚’è‡ªå‹•ç”Ÿæˆ
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `src/usecases/MigrateAutomationVariablesStorageUseCase.ts`
- `src/usecases/__tests__/MigrateAutomationVariablesStorageUseCase.test.ts`

### Phase 2: Use Cases ã®å®Ÿè£… (1æ—¥)

#### 2.1 Core Use Cases
- [ ] `GetAllAutomationVariablesUseCase` ã®å®Ÿè£…
- [ ] `GetAutomationVariablesByIdUseCase` ã®å®Ÿè£…
- [ ] `GetAutomationVariablesByWebsiteIdUseCase` ã®å®Ÿè£…ï¼ˆæ—¢å­˜ã® Repository ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ï¼‰
- [ ] `DeleteAutomationVariablesUseCase` ã®å®Ÿè£…
- [ ] `DuplicateAutomationVariablesUseCase` ã®å®Ÿè£…
- [ ] ã™ã¹ã¦ã® Use Case ã®ãƒ†ã‚¹ãƒˆ

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `src/usecases/GetAllAutomationVariablesUseCase.ts`
- `src/usecases/GetAutomationVariablesByIdUseCase.ts`
- `src/usecases/DeleteAutomationVariablesUseCase.ts`
- `src/usecases/DuplicateAutomationVariablesUseCase.ts`
- å¯¾å¿œã™ã‚‹ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«

### Phase 3: Presenter ã®å®Ÿè£… (1æ—¥)

#### 3.1 Presenter ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- [ ] `IAutomationVariablesManagerView` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®šç¾©
- [ ] `AutomationVariablesManagerPresenter` ã®å®Ÿè£…
- [ ] WebsiteRepository ã‹ã‚‰ Website åã‚’å–å¾—ã—ã¦è¡¨ç¤ºãƒ‡ãƒ¼ã‚¿ã«å«ã‚ã‚‹
- [ ] Presenter ã®ãƒ†ã‚¹ãƒˆ

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `src/presentation/automation-variables-manager/AutomationVariablesManagerPresenter.ts`
- `src/presentation/automation-variables-manager/__tests__/AutomationVariablesManagerPresenter.test.ts`

### Phase 4: UI ã®å®Ÿè£… (2-3æ—¥)

#### 4.1 HTML ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
- [ ] `public/automation-variables-manager.html` ã®ä½œæˆ
- [ ] ä¸€è¦§è¡¨ç¤ºãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- [ ] ç·¨é›†/æ–°è¦ä½œæˆãƒ¢ãƒ¼ãƒ€ãƒ«
- [ ] å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
- [ ] ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ UI

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `public/automation-variables-manager.html`

#### 4.2 Controller ã®å®Ÿè£…
- [ ] `AutomationVariablesManagerController` ã®å®Ÿè£…
- [ ] DI ã‚³ãƒ³ãƒ†ãƒŠã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã®å®Ÿè£…
- [ ] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `src/presentation/automation-variables-manager/AutomationVariablesManagerController.ts`
- `src/presentation/automation-variables-manager/index.ts`

#### 4.3 ãƒ“ãƒ«ãƒ‰è¨­å®šã®æ›´æ–°
- [ ] `webpack.config.js` ã«ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã‚’è¿½åŠ 
- [ ] `manifest.json` ã«ç”»é¢ã‚’ç™»éŒ²ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `webpack.config.js`
- `public/manifest.json`

### Phase 5: å¤šè¨€èªå¯¾å¿œ (åŠæ—¥)

#### 5.1 i18n ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¿½åŠ 
- [ ] æ—¥æœ¬èªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¿½åŠ 
- [ ] è‹±èªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¿½åŠ 
- [ ] ä¸­å›½èªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¿½åŠ ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `public/_locales/ja/messages.json`
- `public/_locales/en/messages.json`
- `public/_locales/zh_CN/messages.json`

### Phase 6: çµ±åˆã¨ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ (1æ—¥)

#### 6.1 èµ·å‹•æ™‚ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] `background/index.ts` ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†ã‚’è¿½åŠ 
- [ ] åˆå›èµ·å‹•æ™‚ã«è‡ªå‹•çš„ã«å®Ÿè¡Œ
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†ãƒ•ãƒ©ã‚°ã‚’ä¿å­˜

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `src/presentation/background/index.ts`

#### 6.2 æ—¢å­˜ç”»é¢ã‹ã‚‰ã®ãƒªãƒ³ã‚¯
- [ ] `popup.html` ã«ãƒªãƒ³ã‚¯ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
- [ ] `xpath-manager.html` ã«ãƒªãƒ³ã‚¯ãƒœã‚¿ãƒ³ã‚’è¿½åŠ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `public/popup.html`
- `src/presentation/popup/WebsiteListController.ts`

### Phase 7: ãƒ†ã‚¹ãƒˆã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ (1æ—¥)

#### 7.1 E2E ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª
- [ ] æ–°è¦ä½œæˆãƒ•ãƒ­ãƒ¼
- [ ] ç·¨é›†ãƒ•ãƒ­ãƒ¼
- [ ] å‰Šé™¤ãƒ•ãƒ­ãƒ¼
- [ ] ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ•ãƒ­ãƒ¼
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ­ãƒ¼

#### 7.2 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- [ ] README ã®æ›´æ–°
- [ ] CHANGELOG ã®æ›´æ–°
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰ã®ä½œæˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `README.md`
- `CHANGELOG.md`
- `docs/USER_GUIDE.md`ï¼ˆæ–°è¦ï¼‰

## ãƒ†ã‚¹ãƒˆè¨ˆç”»

### Unit Tests

| ãƒ†ã‚¹ãƒˆå¯¾è±¡ | ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æœŸå¾…å€¤ |
|-----------|------------|--------|
| **AutomationVariables Entity** | | |
| - create() | UUID ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ | id ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒå­˜åœ¨ |
| - setVariable() | å¤‰æ•°ã‚’è¿½åŠ /æ›´æ–°ã§ãã‚‹ | æ–°ã—ã„ AutomationVariables ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ |
| - removeVariable() | å¤‰æ•°ã‚’å‰Šé™¤ã§ãã‚‹ | å¤‰æ•°ãŒå‰Šé™¤ã•ã‚ŒãŸæ–°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ |
| **Repository** | | |
| - save() | é…åˆ—å½¢å¼ã§ä¿å­˜ã•ã‚Œã‚‹ | localStorage ã«é…åˆ—ã§ä¿å­˜ |
| - load() | ID ã§å–å¾—ã§ãã‚‹ | æ­£ã—ã„ AutomationVariables ã‚’è¿”ã™ |
| - loadAll() | ã™ã¹ã¦å–å¾—ã§ãã‚‹ | å…¨ä»¶ã®é…åˆ—ã‚’è¿”ã™ |
| - delete() | å‰Šé™¤ã§ãã‚‹ | æŒ‡å®š ID ã®ãƒ‡ãƒ¼ã‚¿ãŒå‰Šé™¤ |
| - å¾Œæ–¹äº’æ›æ€§ | ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼ã‚’èª­ã¿è¾¼ã‚ã‚‹ | æ­£å¸¸ã«å¤‰æ›ã•ã‚Œã‚‹ |
| **Migration UseCase** | | |
| - execute() | ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ â†’ é…åˆ— | æ­£ã—ãå¤‰æ›ã•ã‚Œã‚‹ |
| - execute() | ID ã‚’ç”Ÿæˆ | ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒˆãƒªã« id ãŒä»˜ä¸ |
| - execute() | variables ã‚’ä¿æŒ | ã™ã¹ã¦ã®å¤‰æ•°ãŒä¿æŒã•ã‚Œã‚‹ |
| **Core UseCases** | | |
| - GetAll | ã™ã¹ã¦å–å¾— | å…¨ä»¶è¿”å´ |
| - GetById | ID ã§å–å¾— | è©²å½“ãƒ‡ãƒ¼ã‚¿è¿”å´ |
| - Delete | å‰Šé™¤ | æŒ‡å®šãƒ‡ãƒ¼ã‚¿ãŒå‰Šé™¤ |
| - Duplicate | è¤‡è£½ | æ–°ã—ã„ ID ã§è¤‡è£½ |
| **Presenter** | | |
| - loadVariables() | ä¸€è¦§è¡¨ç¤º | view.showVariables() å‘¼ã³å‡ºã— |
| - saveVariable() | ä¿å­˜æˆåŠŸ | view.showSuccess() å‘¼ã³å‡ºã— |
| - deleteVariable() | å‰Šé™¤æˆåŠŸ | view.showSuccess() å‘¼ã³å‡ºã— |
| - importVariables() | ã‚¤ãƒ³ãƒãƒ¼ãƒˆæˆåŠŸ | view.showSuccess() å‘¼ã³å‡ºã— |

### Integration Tests

1. **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ**
   - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™
   - ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
   - é…åˆ—å½¢å¼ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
   - ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ãŒä¿æŒã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

2. **CRUDæ“ä½œãƒ†ã‚¹ãƒˆ**
   - æ–°è¦ä½œæˆ â†’ ä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - ç·¨é›† â†’ å¤‰æ›´ãŒåæ˜ ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - å‰Šé™¤ â†’ ä¸€è¦§ã‹ã‚‰æ¶ˆãˆã‚‹ã“ã¨ã‚’ç¢ºèª
   - è¤‡è£½ â†’ æ–°ã—ã„ã‚¨ãƒ³ãƒˆãƒªãŒä½œæˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

3. **ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ†ã‚¹ãƒˆ**
   - ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ â†’ CSV ãŒæ­£ã—ã„å½¢å¼
   - ã‚¤ãƒ³ãƒãƒ¼ãƒˆ â†’ CSV ã‹ã‚‰æ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã‚‹
   - å¾€å¾©ãƒ†ã‚¹ãƒˆ â†’ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ â†’ ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§åŒã˜ãƒ‡ãƒ¼ã‚¿

### E2E Tests (Manual)

1. **åˆå›ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**
   - æ—§å½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŒã¤æ‹¡å¼µæ©Ÿèƒ½ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   - èµ·å‹•æ™‚ã«è‡ªå‹•ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
   - ç®¡ç†ç”»é¢ã§ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹

2. **ç®¡ç†ç”»é¢ã®æ“ä½œ**
   - æ–°è¦ä½œæˆãƒœã‚¿ãƒ³ â†’ ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º â†’ ä¿å­˜ â†’ ä¸€è¦§ã«è¿½åŠ 
   - ç·¨é›†ãƒœã‚¿ãƒ³ â†’ ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º â†’ å¤‰æ›´ â†’ ä¿å­˜ â†’ ä¸€è¦§æ›´æ–°
   - å‰Šé™¤ãƒœã‚¿ãƒ³ â†’ ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚° â†’ å‰Šé™¤ â†’ ä¸€è¦§ã‹ã‚‰å‰Šé™¤
   - è¤‡è£½ãƒœã‚¿ãƒ³ â†’ è¤‡è£½ç¢ºèª â†’ æ–°ã—ã„ã‚¨ãƒ³ãƒˆãƒªä½œæˆ

3. **ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**
   - ã‚µã‚¤ãƒˆé¸æŠ â†’ è©²å½“ã‚µã‚¤ãƒˆã®ã¿è¡¨ç¤º
   - "å…¨ã‚µã‚¤ãƒˆ" é¸æŠ â†’ ã™ã¹ã¦è¡¨ç¤º

4. **ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**
   - ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³ â†’ CSV ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
   - ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³ â†’ ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ â†’ ç¢ºèª â†’ ãƒ‡ãƒ¼ã‚¿è¿½åŠ 

## ãƒªã‚¹ã‚¯ã¨å¯¾å¿œç­–

### ãƒªã‚¹ã‚¯ 1: æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®ç ´æ
- **å¯¾å¿œ**: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å‰ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆ
- **å¯¾å¿œ**: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼ã¨é…åˆ—å½¢å¼ã®ä¸¡æ–¹ã‚’ã‚µãƒãƒ¼ãƒˆï¼ˆå¾Œæ–¹äº’æ›æ€§ï¼‰

### ãƒªã‚¹ã‚¯ 2: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¤±æ•—
- **å¯¾å¿œ**: ã‚¨ãƒ©ãƒ¼æ™‚ã¯ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ã‚’å®Ÿè£…
- **å¯¾å¿œ**: ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’è¨˜éŒ²ã—ã€å†è©¦è¡Œå¯èƒ½ã«ã™ã‚‹

### ãƒªã‚¹ã‚¯ 3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹
- **å¯¾å¿œ**: é…åˆ—ã®ã‚µã‚¤ã‚ºãŒå¤§ãã„å ´åˆã¯ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æ¤œè¨
- **å¯¾å¿œ**: ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å‡¦ç†ã‚’æœ€é©åŒ–

### ãƒªã‚¹ã‚¯ 4: æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿
- **å¯¾å¿œ**: æ—¢å­˜ã®å¤‰æ•°ç®¡ç†æ©Ÿèƒ½ã¯ç¶­æŒ
- **å¯¾å¿œ**: æ®µéšçš„ãªç§»è¡Œã‚’å¯èƒ½ã«ã™ã‚‹

## ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚ç®—

| ãƒ•ã‚§ãƒ¼ã‚º | ä½œæ¥­å†…å®¹ | è¦‹ç©æ™‚é–“ |
|---------|---------|---------|
| Phase 1 | ãƒ‡ãƒ¼ã‚¿å±¤ã®æº–å‚™ | 1-2æ—¥ |
| Phase 2 | Use Cases å®Ÿè£… | 1æ—¥ |
| Phase 3 | Presenter å®Ÿè£… | 1æ—¥ |
| Phase 4 | UI å®Ÿè£… | 2-3æ—¥ |
| Phase 5 | å¤šè¨€èªå¯¾å¿œ | 0.5æ—¥ |
| Phase 6 | çµ±åˆãƒ»ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ | 1æ—¥ |
| Phase 7 | ãƒ†ã‚¹ãƒˆãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | 1æ—¥ |
| **åˆè¨ˆ** | | **7.5-10æ—¥** |

## è¿½åŠ æ©Ÿèƒ½: å®Ÿè¡Œå±¥æ­´ã®è¡¨ç¤º

### automationResults ã®çµ±åˆ

AutomationVariables ç®¡ç†ç”»é¢ã§ã¯ã€å„å¤‰æ•°ã®æœ€æ–°ã®å®Ÿè¡Œçµæœã‚‚è¡¨ç¤ºã—ã¾ã™ã€‚

è©³ç´°ã¯ [AUTOMATION_RESULTS_DESIGN.md](./AUTOMATION_RESULTS_DESIGN.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

**ä¸»ãªè¡¨ç¤ºé …ç›®:**
- å®Ÿè¡Œã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆready, doing, success, failedï¼‰
- å®Ÿè¡Œæ™‚é–“ï¼ˆç§’ï¼‰
- çµæœè©³ç´°
- é–‹å§‹ãƒ»çµ‚äº†æ—¥æ™‚

**è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯:**
- å„ AutomationVariables ã® ID ã«å¯¾ã—ã¦ã€æœ€æ–°ã®1ä»¶ï¼ˆstartFrom ãŒæœ€æ–°ï¼‰ã‚’è¡¨ç¤º
- å®Ÿè¡Œå±¥æ­´ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ã€Œå®Ÿè¡Œå±¥æ­´ãªã—ã€ã‚’è¡¨ç¤º
- å®Ÿè¡Œä¸­ã®å ´åˆã¯ã€Œå®Ÿè¡Œä¸­...ã€ã‚’è¡¨ç¤º

**å®Ÿè£…ã¸ã®å½±éŸ¿:**
- Presenter ã§ `GetLatestAutomationResultUseCase` ã‚’å‘¼ã³å‡ºã—
- ä¸€è¦§è¡¨ç¤ºãƒ‡ãƒ¼ã‚¿ã«å®Ÿè¡Œçµæœã‚’å«ã‚ã‚‹
- UI ã§å®Ÿè¡Œçµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 

### å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã¸ã®å½±éŸ¿

å®Ÿè¡Œå±¥æ­´æ©Ÿèƒ½ã®è¿½åŠ ã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®ãƒ•ã‚§ãƒ¼ã‚ºãŒè¿½åŠ ã•ã‚Œã¾ã™ï¼š

| ãƒ•ã‚§ãƒ¼ã‚º | ä½œæ¥­å†…å®¹ | è¦‹ç©æ™‚é–“ |
|---------|---------|---------|
| Phase 1.4 | AutomationResult Entity & Repository | 0.5æ—¥ |
| Phase 2.2 | AutomationResult UseCases | 0.5æ—¥ |
| Phase 3.2 | Presenter ã«å®Ÿè¡Œçµæœå–å¾—ã‚’è¿½åŠ  | 0.5æ—¥ |
| Phase 4.4 | UI ã«å®Ÿè¡Œçµæœè¡¨ç¤ºã‚’è¿½åŠ  | 0.5æ—¥ |
| **è¿½åŠ åˆè¨ˆ** | | **2æ—¥** |

**æ›´æ–°å¾Œã®åˆè¨ˆè¦‹ç©**: **9.5-12æ—¥**

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦æ‰¿èªã‚’å¾—ã‚‹
2. Phase 1 ã‹ã‚‰é †æ¬¡å®Ÿè£…ã‚’é–‹å§‹
3. å„ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†å¾Œã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½
4. æ®µéšçš„ã«çµ±åˆã—ã¦ãƒªãƒªãƒ¼ã‚¹

## å‚è€ƒè³‡æ–™

- Clean Architecture ãƒ‘ã‚¿ãƒ¼ãƒ³: [docs/ARCHITECTURE.md](./ARCHITECTURE.md)
- æ—¢å­˜ã® XPath Manager å®Ÿè£…: `src/presentation/xpath-manager/`
- ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£è¨­è¨ˆ: `src/domain/entities/AutomationVariables.ts`
- Repository ãƒ‘ã‚¿ãƒ¼ãƒ³: `src/infrastructure/repositories/`
- å®Ÿè¡Œå±¥æ­´æ©Ÿèƒ½: [docs/AUTOMATION_RESULTS_DESIGN.md](./AUTOMATION_RESULTS_DESIGN.md)
