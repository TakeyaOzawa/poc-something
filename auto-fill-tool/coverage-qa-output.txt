
> auto-fill-tool@2.4.0 test:coverage
> jest --coverage

FAIL src/usecases/storage/__tests__/ExecuteStorageSyncUseCase.test.ts (25.969 s)
  ‚óè ExecuteStorageSyncUseCase ‚Ä∫ execute() ‚Ä∫ should handle repository load errors

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"error": "Database connection failed", "success": false, "syncDirection": "bidirectional"}

      165 |       useCase = new ExecuteStorageSyncUseCase(
      166 |         mockConfigRepository,
    > 167 |         mockExecuteReceiveDataUseCase,
          |                   ^
      168 |         mockExecuteSendDataUseCase,
      169 |         mockSyncHistoryRepository,
      170 |         mockSyncStateNotifier,

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (src/usecases/storage/__tests__/ExecuteStorageSyncUseCase.test.ts:167:19)

FAIL src/presentation/background/handlers/__tests__/ExecuteWebsiteFromPopupHandler.test.ts (26.035 s)
  ‚óè ExecuteWebsiteFromPopupHandler ‚Ä∫ handle ‚Ä∫ should successfully execute website from popup

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      86 |     );
      87 |   });
    > 88 |
         | ^
      89 |   describe('handle', () => {
      90 |     it('should successfully execute website from popup', async () => {
      91 |       const message: ExecuteWebsiteFromPopupRequest = {

      at Object.<anonymous> (src/presentation/background/handlers/__tests__/ExecuteWebsiteFromPopupHandler.test.ts:88:38)

  ‚óè ExecuteWebsiteFromPopupHandler ‚Ä∫ handle ‚Ä∫ should return error when website has no startUrl

    expect(received).toContain(expected) // indexOf

    Expected substring: "startUrl„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì"
    Received string:    "automationVariables?.getStatus is not a function"

      126 |     it('should return error when website not found', async () => {
      127 |       const message: ExecuteWebsiteFromPopupRequest = {
    > 128 |         action: MessageTypes.EXECUTE_WEBSITE_FROM_POPUP,
          |                                          ^
      129 |         websiteId: 'non_existent',
      130 |       };
      131 |

      at Object.<anonymous> (src/presentation/background/handlers/__tests__/ExecuteWebsiteFromPopupHandler.test.ts:128:42)

  ‚óè ExecuteWebsiteFromPopupHandler ‚Ä∫ handle ‚Ä∫ should return error when tab creation fails

    expect(received).toBe(expected) // Object.is equality

    Expected: "Êñ∞„Åó„ÅÑ„Çø„Éñ„ÅÆ‰ΩúÊàê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü"
    Received: "automationVariables?.getStatus is not a function"

      138 |       expect(mockLogger.error).toHaveBeenCalledWith(
      139 |         '[ExecuteWebsiteFromPopupHandler] Website not found',
    > 140 |         expect.any(Object)
          |                           ^
      141 |       );
      142 |     });
      143 |

      at Object.<anonymous> (src/presentation/background/handlers/__tests__/ExecuteWebsiteFromPopupHandler.test.ts:140:42)

  ‚óè ExecuteWebsiteFromPopupHandler ‚Ä∫ handle ‚Ä∫ should handle auto-fill execution failure

    expect(received).toBe(expected) // Object.is equality

    Expected: "XPath not found"
    Received: "automationVariables?.getStatus is not a function"

      159 |
      160 |       const response: ExecuteWebsiteFromPopupResponse = await handler.handle(message);
    > 161 |
          | ^
      162 |       expect(response.success).toBe(false);
      163 |       expect(response.data?.error).toContain('startUrl„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì');
      164 |       expect(mockLogger.error).toHaveBeenCalledWith(

      at Object.<anonymous> (src/presentation/background/handlers/__tests__/ExecuteWebsiteFromPopupHandler.test.ts:161:42)

  ‚óè ExecuteWebsiteFromPopupHandler ‚Ä∫ handle ‚Ä∫ should log all execution steps

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[ExecuteWebsiteFromPopupHandler] Creating new tab", Any<Object>
    Received
           1: "[ExecuteWebsiteFromPopupHandler] Received request", {"websiteId": "website_123"}
           2: "[ExecuteWebsiteFromPopupHandler] Website loaded", {"name": "Test Website", "startUrl": "https://example.com"}

    Number of calls: 2

      191 |         action: MessageTypes.EXECUTE_WEBSITE_FROM_POPUP,
      192 |         websiteId: 'website_123',
    > 193 |       };
          |         ^
      194 |
      195 |       mockGetWebsiteByIdUseCase.execute.mockResolvedValue({ success: true, website: mockWebsite });
      196 |

      at Object.<anonymous> (src/presentation/background/handlers/__tests__/ExecuteWebsiteFromPopupHandler.test.ts:193:37)

FAIL tests/integration/page-transition-resume.integration.test.ts (26.395 s)
  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.2: New Execution ‚Ä∫ should create AutomationResult in DOING status when starting new execution

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:239:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.2: New Execution ‚Ä∫ should save AutomationVariables with correct websiteId

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:280:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.2: New Execution ‚Ä∫ should initialize progress tracking fields correctly

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:330:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.2: New Execution ‚Ä∫ should calculate progress percentage correctly

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:375:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.3: CHANGE_URL Progress Saving ‚Ä∫ should save progress after CHANGE_URL action

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:440:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.3: CHANGE_URL Progress Saving ‚Ä∫ should save progress multiple times for multiple CHANGE_URL actions

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:506:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.3: CHANGE_URL Progress Saving ‚Ä∫ should calculate correct progress percentage after CHANGE_URL

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:555:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.4: Resume Execution ‚Ä∫ should resume execution from currentStepIndex when DOING status exists

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:607:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.4: Resume Execution ‚Ä∫ should only resume executions within 24 hours

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:663:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.4: Resume Execution ‚Ä∫ should only resume executions with matching websiteId

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:718:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.4: Resume Execution ‚Ä∫ should handle case when currentStepIndex exceeds total steps

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:767:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.5: Edge Cases ‚Ä∫ should start new execution when checkExistingExecution fails

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:812:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.5: Edge Cases ‚Ä∫ should continue execution even when AutomationResult save fails

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:851:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.5: Edge Cases ‚Ä∫ should execute successfully when AutomationVariables not found

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:878:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.5: Edge Cases ‚Ä∫ should handle repository errors gracefully during resume check

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:932:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.5: Edge Cases ‚Ä∫ should handle AutomationResult load failure in finalizeExecution

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:963:28)

PASS src/presentation/system-settings/__tests__/SystemSettingsCoordinator.test.ts
PASS src/usecases/sync/__tests__/CreateSyncConfigUseCase.test.ts
PASS src/presentation/storage-sync-manager/__tests__/StorageSyncManagerCoordinator.test.ts (7.873 s)
PASS src/presentation/xpath-manager/__tests__/XPathManagerCoordinator.test.ts (33.911 s)
PASS src/usecases/sync/__tests__/ValidateSyncConfigUseCase.test.ts
PASS src/usecases/sync/__tests__/UpdateSyncConfigUseCase.test.ts
PASS src/usecases/sync/__tests__/ListSyncConfigsUseCase.test.ts
PASS src/infrastructure/adapters/__tests__/ChromeAutoFillAdapter.comprehensive.test.ts (9.633 s)
PASS src/usecases/storage/__tests__/GetAllStorageSyncConfigsUseCase.test.ts
PASS src/presentation/content-script/__tests__/AutoFillOverlay.test.ts (13.403 s)
PASS src/presentation/storage-sync-manager/__tests__/StorageSyncManagerView.test.ts (6.587 s)
PASS src/infrastructure/auto-fill/__tests__/ChangeUrlActionExecutor.test.ts (7.1 s)
PASS src/infrastructure/auto-fill/__tests__/SelectActionExecutor.test.ts
PASS tests/performance/PageTransitionPerformance.performance.test.ts
  ‚óè Console

    console.log
      
      üìä Performance Test Results:

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:258:21)

    console.log
         Without progress saving: 1101.13ms

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:259:21)

    console.log
         With progress saving: 1132.12ms

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:260:21)

    console.log
         Overhead: 30.98ms (2.81%)

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:261:21)

    console.log
         CHANGE_URL actions: 10

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:262:21)

    console.log
         Storage writes: 10 (expected: 10)

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:263:21)

    console.log
      
      üìù Storage Write Count Test:

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:321:21)

    console.log
         Total steps: 50

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:322:21)

    console.log
         CHANGE_URL actions: 5

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:323:21)

    console.log
         Storage writes: 5

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:324:21)

    console.log
         Match: ‚úÖ

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:325:21)

    console.log
      
      ‚è±Ô∏è  Overhead Per CHANGE_URL Action:

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:403:21)

    console.log
         Total overhead: 34.91ms

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:404:21)

    console.log
         CHANGE_URL actions: 10

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:405:21)

    console.log
         Overhead per action: 3.49ms

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:406:21)

    console.log
         Expected range: 1-5ms

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:407:21)

    console.log
         Within range: ‚úÖ

      at Object.<anonymous> (tests/performance/PageTransitionPerformance.performance.test.ts:408:21)

PASS src/infrastructure/adapters/__tests__/AxiosHttpClient.test.ts
PASS src/usecases/sync/__tests__/ExecuteManualSyncUseCase.test.ts
PASS src/presentation/xpath-manager/__tests__/AutoFillExecutor.test.ts
PASS src/presentation/system-settings/__tests__/DataSyncManager.test.ts
PASS src/presentation/content-script/__tests__/XPathDialog.test.ts
PASS src/presentation/common/__tests__/DataBinder.test.ts
PASS src/infrastructure/adapters/__tests__/ChromeContextMenuAdapter.test.ts
PASS tests/integration/MasterPasswordIntegration.test.ts
PASS src/infrastructure/adapters/__tests__/SecureStorageAdapter.test.ts
PASS src/infrastructure/adapters/__tests__/SecurityIntegration.test.ts
PASS src/infrastructure/adapters/__tests__/ChromeAutoFillAdapter.select.test.ts
PASS src/infrastructure/repositories/__tests__/SecureRepositoryIntegration.test.ts
PASS src/infrastructure/adapters/__tests__/ChromeHttpClient.test.ts
PASS src/infrastructure/adapters/__tests__/WebCryptoAdapter.test.ts
PASS src/presentation/content-script/handlers/__tests__/GetXPathHandler.test.ts
PASS src/presentation/storage-sync-manager/__tests__/StorageSyncManagerPresenter.test.ts
PASS src/domain/values/__tests__/UnlockStatus.test.ts
PASS src/presentation/popup/__tests__/SettingsModalManager.test.ts
PASS src/presentation/system-settings/__tests__/AppearanceSettingsManager.test.ts
PASS src/domain/constants/__tests__/ActionPatterns.test.ts
PASS src/presentation/system-settings/__tests__/SystemSettingsPresenter.test.ts
PASS src/infrastructure/auto-fill/__tests__/CancellationCoordinator.test.ts
PASS src/usecases/system-settings/__tests__/ExportSystemSettingsUseCase.test.ts
PASS src/usecases/sync/__tests__/TestConnectionUseCase.test.ts
PASS src/presentation/unlock/__tests__/UnlockPresenter.test.ts
PASS src/usecases/storage/__tests__/UnlockStorageUseCase.test.ts
PASS src/presentation/system-settings/__tests__/PermissionsSettingsManager.test.ts
PASS src/domain/entities/__tests__/DataTransformer.test.ts
PASS src/presentation/popup/__tests__/ModalManager.test.ts
PASS src/infrastructure/adapters/__tests__/I18nAdapter.test.ts
PASS tests/e2e/MigrationWorkflow.e2e.test.ts (6.24 s)
PASS src/presentation/components/__tests__/TabManager.test.ts
PASS src/infrastructure/mappers/__tests__/AutomationVariablesMapper.test.ts
PASS src/domain/entities/__tests__/SyncState.test.ts
PASS src/presentation/automation-variables-manager/__tests__/AutomationVariablesManagerView.test.ts
PASS src/presentation/popup/__tests__/WebsiteActionHandler.test.ts
PASS src/presentation/xpath-manager/__tests__/ExportImportManager.test.ts
PASS src/domain/values/__tests__/PasswordEntropy.test.ts
PASS src/domain/services/__tests__/BatchProcessor.test.ts
PASS src/presentation/xpath-manager/__tests__/XPathManagerView.test.ts
PASS src/infrastructure/adapters/__tests__/PapaParseAdapter.test.ts
PASS src/usecases/storage/__tests__/MigrateToSecureStorageUseCase.test.ts
PASS src/presentation/xpath-manager/__tests__/XPathEditModalManager.test.ts
PASS src/infrastructure/adapters/__tests__/SpreadsheetSyncAdapter.test.ts (8.401 s)
PASS src/presentation/popup/__tests__/WebsiteListPresenter.test.ts
PASS src/domain/entities/__tests__/Website.test.ts
PASS src/domain/entities/__tests__/BatchConfig.test.ts
PASS src/presentation/popup/__tests__/PopupCoordinator.test.ts
FAIL tests/integration/TabRecording.integration.test.ts
  ‚óè Test suite failed to run

    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m52[0m:[93m30[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m52[0m       recordingId: recording.getId(),
    [7m  [0m [91m                             ~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m54[0m:[93m24[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m54[0m       tabId: recording.getTabId(),
    [7m  [0m [91m                       ~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m55[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getStatus' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m55[0m       currentStatus: recording.getStatus(),
    [7m  [0m [91m                               ~~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m56[0m:[93m29[0m - [91merror[0m[90m TS2339: [0mProperty 'getRecorderId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m56[0m       recorderId: recording.getRecorderId(),
    [7m  [0m [91m                            ~~~~~~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m59[0m:[93m20[0m - [91merror[0m[90m TS2339: [0mProperty 'isRecording' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m59[0m     if (!recording.isRecording()) {
    [7m  [0m [91m                   ~~~~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m61[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m61[0m         recordingId: recording.getId(),
    [7m  [0m [91m                               ~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m63[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'getStatus' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m63[0m         currentStatus: recording.getStatus(),
    [7m  [0m [91m                                 ~~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m64[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m64[0m         tabId: recording.getTabId(),
    [7m  [0m [91m                         ~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m66[0m:[93m7[0m - [91merror[0m[90m TS2740: [0mType 'Result<TabRecording | null, Error>' is missing the following properties from type 'TabRecording': validate, getId, getAutomationResultId, getTabId, and 21 more.

    [7m66[0m       return recording;
    [7m  [0m [91m      ~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m70[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'getRecorderId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m70[0m     const recorderId = recording.getRecorderId();
    [7m  [0m [91m                                 ~~~~~~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m73[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m73[0m         recordingId: recording.getId(),
    [7m  [0m [91m                               ~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m75[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m75[0m         tabId: recording.getTabId(),
    [7m  [0m [91m                         ~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m76[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'getStatus' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m76[0m         currentStatus: recording.getStatus(),
    [7m  [0m [91m                                 ~~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m78[0m:[93m40[0m - [91merror[0m[90m TS2339: [0mProperty 'markError' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m78[0m       const errorRecording = recording.markError('No recorderId found');
    [7m  [0m [91m                                       ~~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m86[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m86[0m         recordingId: recording.getId(),
    [7m  [0m [91m                               ~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m94[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m94[0m         recordingId: recording.getId(),
    [7m  [0m [91m                               ~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m101[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'stop' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m101[0m       const stoppedRecording = recording.stop().save(blob);
    [7m   [0m [91m                                         ~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m114[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m114[0m         recordingId: recording.getId(),
    [7m   [0m [91m                               ~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m117[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m117[0m         tabId: recording.getTabId(),
    [7m   [0m [91m                         ~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m127[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m127[0m         recordingId: recording.getId(),
    [7m   [0m [91m                               ~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m130[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m130[0m         tabId: recording.getTabId(),
    [7m   [0m [91m                         ~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m133[0m:[93m40[0m - [91merror[0m[90m TS2339: [0mProperty 'markError' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m133[0m       const errorRecording = recording.markError('Failed to stop recording');
    [7m   [0m [91m                                       ~~~~~~~~~[0m

PASS src/presentation/unlock/__tests__/UnlockView.test.ts
PASS src/presentation/xpath-manager/__tests__/XPathActionHandler.test.ts
PASS src/presentation/security-log-viewer/__tests__/SecurityLogViewerView.test.ts
PASS src/presentation/background/handlers/__tests__/CancelAutoFillHandler.test.ts
PASS src/presentation/offscreen/__tests__/OffscreenPresenter.test.ts
  ‚óè Console

    console.log
      [OffscreenPresenter] Initializing offscreen document

      at OffscreenPresenter.init (src/presentation/offscreen/OffscreenPresenter.ts:1394:13)

    console.log
      [OffscreenPresenter] Message listener registered

      at OffscreenPresenter.init (src/presentation/offscreen/OffscreenPresenter.ts:1469:13)

    console.log
      [OffscreenPresenter] Initializing offscreen document

      at OffscreenPresenter.init (src/presentation/offscreen/OffscreenPresenter.ts:1394:13)

    console.log
      [OffscreenPresenter] Message listener registered

      at OffscreenPresenter.init (src/presentation/offscreen/OffscreenPresenter.ts:1469:13)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Initializing offscreen document

      at OffscreenPresenter.init (src/presentation/offscreen/OffscreenPresenter.ts:1394:13)

    console.log
      [OffscreenPresenter] Message listener registered

      at OffscreenPresenter.init (src/presentation/offscreen/OffscreenPresenter.ts:1469:13)

    console.log
      [OffscreenPresenter] Stopping recording { recorderId: 'rec-1' }

      at OffscreenPresenter.handleStopRecording (src/presentation/offscreen/OffscreenPresenter.ts:1614:13)

    console.log
      [OffscreenPresenter] MediaRecorder stopped { recorderId: 'rec-1', chunksCount: 0 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1650:17)

    console.log
      [OffscreenPresenter] Recording blob created { recorderId: 'rec-1', blobSize: 1024 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1664:17)

    console.log
      [OffscreenPresenter] Initializing offscreen document

      at OffscreenPresenter.init (src/presentation/offscreen/OffscreenPresenter.ts:1394:13)

    console.log
      [OffscreenPresenter] Message listener registered

      at OffscreenPresenter.init (src/presentation/offscreen/OffscreenPresenter.ts:1469:13)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true, videoBitsPerSecond: 2500000 }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true, videoBitsPerSecond: 2500000 }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true, videoBitsPerSecond: 2500000 }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Recording chunk available { recorderId: 'rec-1', chunkSize: 100, totalChunks: 1 }

      at src/presentation/offscreen/OffscreenPresenter.ts:1525:17

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true, videoBitsPerSecond: 2500000 }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.error
      [OffscreenPresenter] MediaRecorder error { recorderId: 'rec-1', error: 'Test error' }



      at src/presentation/offscreen/OffscreenPresenter.ts:1536:17
      at Object.<anonymous> (src/presentation/offscreen/__tests__/OffscreenPresenter.test.ts:149:13)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true, videoBitsPerSecond: 2500000 }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true, videoBitsPerSecond: 2500000 }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.error
      [OffscreenPresenter] Failed to start recording {
        recorderId: 'rec-1',
        tabId: 123,
        error: Error: Recording rec-1 already exists
            at OffscreenPresenter.handleStartRecording (/Users/takeya_ozawa/Downloads/auto-fill-tool/src/presentation/offscreen/OffscreenPresenter.ts:1494:15)
            at Object.<anonymous> (/Users/takeya_ozawa/Downloads/auto-fill-tool/src/presentation/offscreen/__tests__/OffscreenPresenter.test.ts:158:36)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
      }



      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1585:15)
      at Object.<anonymous> (src/presentation/offscreen/__tests__/OffscreenPresenter.test.ts:158:36)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true, videoBitsPerSecond: 2500000 }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.error
      [OffscreenPresenter] Failed to start recording {
        recorderId: 'rec-1',
        tabId: 123,
        error: Error: Failed to create recorder
            at Object.<anonymous> (/Users/takeya_ozawa/Downloads/auto-fill-tool/src/presentation/offscreen/__tests__/OffscreenPresenter.test.ts:161:60)
            at Promise.then.completed (/Users/takeya_ozawa/Downloads/auto-fill-tool/node_modules/jest-circus/build/utils.js:298:28)
            at new Promise (<anonymous>)
            at callAsyncCircusFn (/Users/takeya_ozawa/Downloads/auto-fill-tool/node_modules/jest-circus/build/utils.js:231:10)
            at _callCircusTest (/Users/takeya_ozawa/Downloads/auto-fill-tool/node_modules/jest-circus/build/run.js:316:40)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at _runTest (/Users/takeya_ozawa/Downloads/auto-fill-tool/node_modules/jest-circus/build/run.js:252:3)
            at _runTestsForDescribeBlock (/Users/takeya_ozawa/Downloads/auto-fill-tool/node_modules/jest-circus/build/run.js:126:9)
            at _runTestsForDescribeBlock (/Users/takeya_ozawa/Downloads/auto-fill-tool/node_modules/jest-circus/build/run.js:121:9)
            at _runTestsForDescribeBlock (/Users/takeya_ozawa/Downloads/auto-fill-tool/node_modules/jest-circus/build/run.js:121:9)
            at run (/Users/takeya_ozawa/Downloads/auto-fill-tool/node_modules/jest-circus/build/run.js:71:3)
            at runAndTransformResultsToJestFormat (/Users/takeya_ozawa/Downloads/auto-fill-tool/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
            at jestAdapter (/Users/takeya_ozawa/Downloads/auto-fill-tool/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
            at runTestInternal (/Users/takeya_ozawa/Downloads/auto-fill-tool/node_modules/jest-runner/build/runTest.js:367:16)
            at runTest (/Users/takeya_ozawa/Downloads/auto-fill-tool/node_modules/jest-runner/build/runTest.js:444:34)
            at Object.worker (/Users/takeya_ozawa/Downloads/auto-fill-tool/node_modules/jest-runner/build/testWorker.js:106:12)
      }



      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1585:15)
      at Object.<anonymous> (src/presentation/offscreen/__tests__/OffscreenPresenter.test.ts:162:13)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true, videoBitsPerSecond: 2500000 }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.error
      [OffscreenPresenter] Failed to start recording { recorderId: 'rec-1', tabId: 123, error: 'String error' }



      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1585:15)
      at Object.<anonymous> (src/presentation/offscreen/__tests__/OffscreenPresenter.test.ts:171:13)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Stopping recording { recorderId: 'rec-1' }

      at OffscreenPresenter.handleStopRecording (src/presentation/offscreen/OffscreenPresenter.ts:1614:13)

    console.log
      [OffscreenPresenter] MediaRecorder stopped { recorderId: 'rec-1', chunksCount: 0 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1650:17)

    console.log
      [OffscreenPresenter] Recording blob created { recorderId: 'rec-1', blobSize: 1024 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1664:17)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Stopping recording { recorderId: 'rec-1' }

      at OffscreenPresenter.handleStopRecording (src/presentation/offscreen/OffscreenPresenter.ts:1614:13)

    console.log
      [OffscreenPresenter] MediaRecorder stopped { recorderId: 'rec-1', chunksCount: 0 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1650:17)

    console.log
      [OffscreenPresenter] Recording blob created { recorderId: 'rec-1', blobSize: 1024 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1664:17)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Stopping recording { recorderId: 'rec-1' }

      at OffscreenPresenter.handleStopRecording (src/presentation/offscreen/OffscreenPresenter.ts:1614:13)

    console.log
      [OffscreenPresenter] MediaRecorder stopped { recorderId: 'rec-1', chunksCount: 0 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1650:17)

    console.log
      [OffscreenPresenter] Recording blob created { recorderId: 'rec-1', blobSize: 1024 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1664:17)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Stopping recording { recorderId: 'rec-1' }

      at OffscreenPresenter.handleStopRecording (src/presentation/offscreen/OffscreenPresenter.ts:1614:13)

    console.log
      [OffscreenPresenter] MediaRecorder stopped { recorderId: 'rec-1', chunksCount: 0 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1650:17)

    console.log
      [OffscreenPresenter] Recording blob created { recorderId: 'rec-1', blobSize: 1024 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1664:17)

    console.log
      [OffscreenPresenter] Stopping recording { recorderId: 'rec-1' }

      at OffscreenPresenter.handleStopRecording (src/presentation/offscreen/OffscreenPresenter.ts:1614:13)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Stopping recording { recorderId: 'non-existent' }

      at OffscreenPresenter.handleStopRecording (src/presentation/offscreen/OffscreenPresenter.ts:1614:13)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-id' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Stopping recording { recorderId: 'rec-1' }

      at OffscreenPresenter.handleStopRecording (src/presentation/offscreen/OffscreenPresenter.ts:1614:13)

    console.log
      [OffscreenPresenter] MediaRecorder stopped { recorderId: 'rec-1', chunksCount: 0 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1650:17)

    console.log
      [OffscreenPresenter] Recording blob created { recorderId: 'rec-1', blobSize: 1024 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1664:17)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-1' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-2',
        tabId: 456,
        config: { audio: true, video: false }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-2', tabId: 456, streamId: 'stream-2' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-2', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-1',
        tabId: 123,
        config: { audio: true, video: true }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-1', tabId: 123, streamId: 'stream-1' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-1', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Starting recording {
        recorderId: 'rec-2',
        tabId: 456,
        config: { audio: true, video: false }
      }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1479:13)

    console.log
      [OffscreenPresenter] Using stream ID from background { recorderId: 'rec-2', tabId: 456, streamId: 'stream-2' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1501:15)

    console.log
      [OffscreenPresenter] MediaRecorder started { recorderId: 'rec-2', state: 'recording' }

      at OffscreenPresenter.handleStartRecording (src/presentation/offscreen/OffscreenPresenter.ts:1565:15)

    console.log
      [OffscreenPresenter] Stopping recording { recorderId: 'rec-1' }

      at OffscreenPresenter.handleStopRecording (src/presentation/offscreen/OffscreenPresenter.ts:1614:13)

    console.log
      [OffscreenPresenter] MediaRecorder stopped { recorderId: 'rec-1', chunksCount: 0 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1650:17)

    console.log
      [OffscreenPresenter] Recording blob created { recorderId: 'rec-1', blobSize: 1024 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1664:17)

    console.log
      [OffscreenPresenter] Stopping recording { recorderId: 'rec-2' }

      at OffscreenPresenter.handleStopRecording (src/presentation/offscreen/OffscreenPresenter.ts:1614:13)

    console.log
      [OffscreenPresenter] MediaRecorder stopped { recorderId: 'rec-2', chunksCount: 0 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1650:17)

    console.log
      [OffscreenPresenter] Recording blob created { recorderId: 'rec-2', blobSize: 1024 }

      at handleStop (src/presentation/offscreen/OffscreenPresenter.ts:1664:17)

PASS src/infrastructure/repositories/__tests__/SecureAutomationVariablesRepository.test.ts
PASS src/infrastructure/auto-fill/__tests__/TimeoutManager.test.ts
PASS src/infrastructure/auto-fill/__tests__/InputActionExecutor.test.ts
PASS src/domain/entities/__tests__/SystemSettings.test.ts
PASS src/domain/entities/__tests__/SyncHistory.test.ts
PASS src/infrastructure/adapters/__tests__/JSONPathDataMapper.test.ts
PASS src/domain/services/__tests__/SessionManager.test.ts
PASS src/domain/values/__tests__/MasterPasswordRequirements.test.ts
PASS src/infrastructure/repositories/__tests__/SecureXPathRepository.test.ts
PASS src/domain/services/__tests__/RetryExecutor.test.ts
PASS src/infrastructure/repositories/__tests__/ChromeStorageSyncHistoryRepository.test.ts
PASS src/domain/services/__tests__/DataTransformationService.test.ts
PASS src/presentation/master-password-setup/__tests__/MasterPasswordSetupView.test.ts
PASS tests/fixtures/__tests__/TestDataFactories.test.ts
PASS src/domain/services/__tests__/DefaultConflictResolver.test.ts
PASS src/domain/services/__tests__/XPathSelectionService.test.ts
PASS src/presentation/content-script/__tests__/ContentScriptPresenter.test.ts
PASS src/infrastructure/auto-fill/__tests__/JudgeActionExecutor.test.ts
PASS src/infrastructure/messaging/__tests__/MessageRouter.test.ts
  ‚óè Console

    console.debug
      [08:27:04.841] [TestRouter] [DEBUG] Registered handler for action: executeAutoFill

      at ConsoleLogger.debug (src/infrastructure/loggers/ConsoleLogger.ts:1217:15)

    console.info
      [08:27:04.850] [TestRouter] [INFO] Message router started listening

      at ConsoleLogger.info (src/infrastructure/loggers/ConsoleLogger.ts:1240:15)

PASS src/domain/entities/__tests__/SyncResult.test.ts
PASS src/domain/entities/__tests__/MasterPasswordPolicy.test.ts
PASS src/infrastructure/repositories/__tests__/SecureWebsiteRepository.test.ts
PASS src/domain/entities/__tests__/TabRecording.test.ts
PASS src/domain/services/__tests__/ProgressTrackingService.test.ts
PASS src/infrastructure/auto-fill/__tests__/CheckboxActionExecutor.test.ts
FAIL src/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts
  ‚óè Test suite failed to run

    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m338[0m:[93m22[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m338[0m       expect(result!.getId()).toBe(recordingId);
    [7m   [0m [91m                     ~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m486[0m:[93m22[0m - [91merror[0m[90m TS2339: [0mProperty 'getAutomationResultId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m486[0m       expect(result!.getAutomationResultId()).toBe(automationResultId);
    [7m   [0m [91m                     ~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m609[0m:[93m14[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type '0' can't be used to index type 'Result<TabRecording[], Error>'.
      Property '0' does not exist on type 'Result<TabRecording[], Error>'.

    [7m609[0m       expect(result[0].getId()).toBe('recording-1');
    [7m   [0m [91m             ~~~~~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m610[0m:[93m14[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type '1' can't be used to index type 'Result<TabRecording[], Error>'.
      Property '1' does not exist on type 'Result<TabRecording[], Error>'.

    [7m610[0m       expect(result[1].getId()).toBe('recording-2');
    [7m   [0m [91m             ~~~~~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m677[0m:[93m76[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m677[0m       jest.spyOn(repository, 'loadByAutomationResultId').mockResolvedValue(recording);
    [7m   [0m [91m                                                                           ~~~~~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m678[0m:[93m40[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 0.

    [7m678[0m       jest.spyOn(repository, 'delete').mockResolvedValue();
    [7m   [0m [91m                                       ~~~~~~~~~~~~~~~~~[0m

      [96mnode_modules/@types/jest/index.d.ts[0m:[93m1439[0m:[93m27[0m
        [7m1439[0m         mockResolvedValue(value: ResolvedValue<T>): this;
        [7m    [0m [96m                          ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'value' was not provided.
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m689[0m:[93m76[0m - [91merror[0m[90m TS2345: [0mArgument of type 'null' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m689[0m       jest.spyOn(repository, 'loadByAutomationResultId').mockResolvedValue(null);
    [7m   [0m [91m                                                                           ~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m690[0m:[93m40[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 0.

    [7m690[0m       jest.spyOn(repository, 'delete').mockResolvedValue();
    [7m   [0m [91m                                       ~~~~~~~~~~~~~~~~~[0m

      [96mnode_modules/@types/jest/index.d.ts[0m:[93m1439[0m:[93m27[0m
        [7m1439[0m         mockResolvedValue(value: ResolvedValue<T>): this;
        [7m    [0m [96m                          ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'value' was not provided.
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m831[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording[]' is not assignable to parameter of type 'Result<TabRecording[], Error> | Promise<Result<TabRecording[], Error>>'.
      Type 'TabRecording[]' is missing the following properties from type 'Result<TabRecording[], Error>': _isSuccess, isSuccess, isFailure, value, and 6 more.

    [7m831[0m       jest.spyOn(repository, 'loadAll').mockResolvedValue([recording1, recording2]);
    [7m   [0m [91m                                                          ~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m891[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type '(resultId: string) => Promise<TabRecording | null>' is not assignable to parameter of type '(resultId: string) => Promise<Result<TabRecording | null, Error>>'.
      Type 'Promise<TabRecording | null>' is not assignable to type 'Promise<Result<TabRecording | null, Error>>'.
        Type 'TabRecording | null' is not assignable to type 'Result<TabRecording | null, Error>'.
          Type 'null' is not assignable to type 'Result<TabRecording | null, Error>'.

    [7m891[0m         .mockImplementation(async (resultId: string) => {
    [7m   [0m [91m                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m901[0m:[93m22[0m - [91merror[0m[90m TS2339: [0mProperty 'getAutomationResultId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m901[0m       expect(result!.getAutomationResultId()).toBe(newerResult.getId());
    [7m   [0m [91m                     ~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m937[0m:[93m76[0m - [91merror[0m[90m TS2345: [0mArgument of type 'null' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m937[0m       jest.spyOn(repository, 'loadByAutomationResultId').mockResolvedValue(null);
    [7m   [0m [91m                                                                           ~~~~[0m

PASS src/domain/constants/__tests__/StorageKeys.test.ts
PASS src/domain/events/events/__tests__/AutoFillEvents.test.ts
PASS src/domain/utils/__tests__/SyncConfigUtils.test.ts
PASS src/presentation/master-password-setup/__tests__/MasterPasswordSetupPresenter.test.ts
PASS src/usecases/sync/__tests__/ExecuteSendDataUseCase.test.ts
PASS src/presentation/system-settings/__tests__/SystemSettingsView.test.ts
PASS src/presentation/xpath-manager/__tests__/VariableManager.test.ts
PASS src/infrastructure/mappers/__tests__/SystemSettingsMapper.test.ts
PASS src/domain/services/__tests__/URLMatchingService.test.ts
PASS src/infrastructure/adapters/__tests__/NotionSyncAdapter.test.ts
PASS src/domain/services/__tests__/StepValidationService.test.ts
PASS src/domain/events/__tests__/DomainEvent.test.ts
PASS src/domain/services/__tests__/PasswordValidator.test.ts
PASS src/domain/entities/__tests__/AutomationVariables.test.ts
PASS src/domain/services/__tests__/CSVValidationService.test.ts
PASS src/infrastructure/mappers/__tests__/JsonPathDataMapper.test.ts
PASS src/infrastructure/repositories/__tests__/ChromeWebsiteConfigRepository.test.ts
PASS src/usecases/websites/__tests__/UpdateWebsiteUseCase.test.ts
PASS src/domain/services/__tests__/VariableSubstitutionService.test.ts
PASS src/usecases/websites/__tests__/SaveWebsiteWithAutomationVariablesUseCase.test.ts
PASS src/domain/constants/__tests__/EventPattern.test.ts
PASS src/utils/__tests__/dateFormatter.test.ts
PASS src/domain/constants/__tests__/InputPattern.test.ts
PASS src/domain/values/__tests__/CommonPasswordDictionary.test.ts
PASS src/domain/entities/__tests__/RetryPolicy.test.ts
PASS src/domain/constants/__tests__/SessionConfig.test.ts
PASS src/domain/entities/__tests__/LogEntry.test.ts
PASS src/infrastructure/loggers/__tests__/ConsoleLogger.test.ts
PASS src/presentation/common/__tests__/TemplateLoader.test.ts
PASS src/presentation/system-settings/__tests__/GeneralSettingsManager.test.ts
PASS src/domain/services/__tests__/RetryPolicyService.test.ts
PASS src/infrastructure/repositories/__tests__/ChromeStorageAutomationVariablesRepository.test.ts
PASS src/domain/entities/__tests__/AutomationResult.test.ts
PASS src/infrastructure/factories/__tests__/RepositoryFactory.test.ts
PASS src/infrastructure/mappers/__tests__/XPathCollectionMapper.test.ts
PASS src/domain/entities/__tests__/CheckerState.test.ts
PASS src/domain/entities/__tests__/AutoFillEvent.test.ts
PASS src/presentation/xpath-manager/__tests__/WebsiteSelectManager.test.ts
PASS src/usecases/xpaths/__tests__/XPathUseCases.test.ts
PASS src/infrastructure/repositories/__tests__/SecureSystemSettingsRepository.test.ts
PASS src/infrastructure/adapters/__tests__/PermissionManager.test.ts
PASS src/domain/services/__tests__/WebsiteMigrationService.test.ts
PASS src/presentation/security-log-viewer/__tests__/SecurityLogViewerPresenter.test.ts
PASS src/presentation/xpath-manager/__tests__/XPathManagerPresenter.test.ts
PASS src/presentation/offscreen/__tests__/OffscreenView.test.ts
  ‚óè Console

    console.log
      [OffscreenView] Tab stream captured { streamId: 'test-stream-id', audioTracks: 1, videoTracks: 1 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:886:13)

    console.log
      [OffscreenView] MediaRecorder created { mimeType: 'video/webm;codecs=vp9', videoBitsPerSecond: 2500000 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:948:13)

    console.log
      [OffscreenView] Tab stream captured { streamId: 'test-stream-id', audioTracks: 1, videoTracks: 1 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:886:13)

    console.log
      [OffscreenView] MediaRecorder created { mimeType: 'video/webm;codecs=vp9', videoBitsPerSecond: 2500000 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:948:13)

    console.log
      [OffscreenView] Tab stream captured { streamId: 'test-stream-id', audioTracks: 1, videoTracks: 1 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:886:13)

    console.log
      [OffscreenView] MediaRecorder created { mimeType: 'video/webm;codecs=vp9', videoBitsPerSecond: 2500000 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:948:13)

    console.log
      [OffscreenView] Tab stream captured { streamId: 'test-stream-id', audioTracks: 1, videoTracks: 1 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:886:13)

    console.log
      [OffscreenView] MediaRecorder created { mimeType: 'video/webm;codecs=vp9', videoBitsPerSecond: 2500000 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:948:13)

    console.log
      [OffscreenView] Tab stream captured { streamId: 'test-stream-id', audioTracks: 1, videoTracks: 1 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:886:13)

    console.log
      [OffscreenView] MediaRecorder created { mimeType: 'video/webm;codecs=vp9', videoBitsPerSecond: 2500000 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:948:13)

    console.log
      [OffscreenView] Tab stream captured { streamId: 'test-stream-id', audioTracks: 1, videoTracks: 1 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:886:13)

    console.log
      [OffscreenView] MediaRecorder created { mimeType: 'video/webm;codecs=vp9', videoBitsPerSecond: 2500000 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:948:13)

    console.log
      [OffscreenView] Tab stream captured { streamId: 'test-stream-id', audioTracks: 1, videoTracks: 1 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:886:13)

    console.log
      [OffscreenView] MediaRecorder created { mimeType: 'video/webm;codecs=vp9', videoBitsPerSecond: 2500000 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:948:13)

    console.log
      [OffscreenView] Tab stream captured { streamId: 'test-stream-id', audioTracks: 1, videoTracks: 1 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:886:13)

    console.log
      [OffscreenView] MediaRecorder created { mimeType: 'video/webm;codecs=vp9', videoBitsPerSecond: 2500000 }

      at OffscreenView.createMediaRecorder (src/presentation/offscreen/OffscreenView.ts:948:13)

    console.error
      [OffscreenView] MediaRecorder error Event { isTrusted: [Getter] }



      at Object.recorder.onerror (src/presentation/offscreen/OffscreenView.ts:941:15)
      at Object.<anonymous> (src/presentation/offscreen/__tests__/OffscreenView.test.ts:152:31)

    console.log
      [OffscreenView] MediaRecorder started { state: 'inactive' }

      at OffscreenView.startRecording (src/presentation/offscreen/OffscreenView.ts:971:13)

    console.log
      [OffscreenView] MediaRecorder started { state: 'inactive' }

      at OffscreenView.startRecording (src/presentation/offscreen/OffscreenView.ts:971:13)

    console.log
      [OffscreenView] MediaStream tracks stopped

      at OffscreenView.stopStream (src/presentation/offscreen/OffscreenView.ts:1013:13)

    console.log
      [OffscreenView] Blob created { size: 600, chunksCount: 3 }

      at OffscreenView.createBlob (src/presentation/offscreen/OffscreenView.ts:1028:13)

    console.log
      [OffscreenView] Blob created { size: 0, chunksCount: 0 }

      at OffscreenView.createBlob (src/presentation/offscreen/OffscreenView.ts:1028:13)

PASS src/presentation/automation-variables-manager/__tests__/AutomationVariablesManagerController.test.ts
PASS src/infrastructure/repositories/__tests__/ChromeStorageXPathRepository.test.ts
FAIL src/usecases/recording/__tests__/GetRecordingByResultIdUseCase.test.ts
  ‚óè Test suite failed to run

    [96msrc/usecases/recording/__tests__/GetRecordingByResultIdUseCase.test.ts[0m:[93m52[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m52[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(mockRecording);
    [7m  [0m [91m                                                                ~~~~~~~~~~~~~[0m
    [96msrc/usecases/recording/__tests__/GetRecordingByResultIdUseCase.test.ts[0m:[93m66[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'null' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m66[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(null);
    [7m  [0m [91m                                                                ~~~~[0m
    [96msrc/usecases/recording/__tests__/GetRecordingByResultIdUseCase.test.ts[0m:[93m103[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m103[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(mockRecording);
    [7m   [0m [91m                                                                ~~~~~~~~~~~~~[0m
    [96msrc/usecases/recording/__tests__/GetRecordingByResultIdUseCase.test.ts[0m:[93m124[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m124[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(mockRecording);
    [7m   [0m [91m                                                                ~~~~~~~~~~~~~[0m

PASS src/infrastructure/adapters/__tests__/BrowserXPathGenerationAdapter.test.ts
PASS src/usecases/sync/__tests__/ExecuteReceiveDataUseCase.test.ts
PASS src/domain/services/__tests__/LockoutManager.test.ts
PASS tests/helpers/__tests__/MockLogger.test.ts
PASS src/usecases/sync/__tests__/ImportCSVUseCase.test.ts
PASS src/usecases/storage/__tests__/CheckUnlockStatusUseCase.test.ts
PASS src/usecases/storage/__tests__/LockStorageUseCase.test.ts
PASS src/usecases/automation-variables/__tests__/MigrateAutomationVariablesStorageUseCase.test.ts
PASS src/infrastructure/mappers/__tests__/WebsiteCollectionMapper.test.ts
PASS src/presentation/system-settings/__tests__/RecordingSettingsManager.test.ts
PASS src/infrastructure/auto-fill/__tests__/RetryController.test.ts
FAIL src/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts
  ‚óè Test suite failed to run

    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m63[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m63[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(recording);
    [7m  [0m [91m                                                                ~~~~~~~~~[0m
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m65[0m:[93m27[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 0.

    [7m65[0m       mockRepository.save.mockResolvedValue();
    [7m  [0m [91m                          ~~~~~~~~~~~~~~~~~[0m

      [96mnode_modules/@types/jest/index.d.ts[0m:[93m1439[0m:[93m27[0m
        [7m1439[0m         mockResolvedValue(value: ResolvedValue<T>): this;
        [7m    [0m [96m                          ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'value' was not provided.
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m92[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'null' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m92[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(null);
    [7m  [0m [91m                                                                ~~~~[0m
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m115[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m115[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(recording);
    [7m   [0m [91m                                                                ~~~~~~~~~[0m
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m142[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m142[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(recording);
    [7m   [0m [91m                                                                ~~~~~~~~~[0m
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m144[0m:[93m27[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 0.

    [7m144[0m       mockRepository.save.mockResolvedValue();
    [7m   [0m [91m                          ~~~~~~~~~~~~~~~~~[0m

      [96mnode_modules/@types/jest/index.d.ts[0m:[93m1439[0m:[93m27[0m
        [7m1439[0m         mockResolvedValue(value: ResolvedValue<T>): this;
        [7m    [0m [96m                          ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'value' was not provided.
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m175[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m175[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(recording);
    [7m   [0m [91m                                                                ~~~~~~~~~[0m
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m204[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m204[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(recording);
    [7m   [0m [91m                                                                ~~~~~~~~~[0m
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m246[0m:[93m27[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 0.

    [7m246[0m       mockRepository.save.mockResolvedValue();
    [7m   [0m [91m                          ~~~~~~~~~~~~~~~~~[0m

      [96mnode_modules/@types/jest/index.d.ts[0m:[93m1439[0m:[93m27[0m
        [7m1439[0m         mockResolvedValue(value: ResolvedValue<T>): this;
        [7m    [0m [96m                          ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'value' was not provided.

PASS src/domain/services/__tests__/SecurityEventLogger.test.ts
PASS src/infrastructure/adapters/__tests__/ChromeStorageLogAggregatorAdapter.test.ts
PASS src/domain/events/events/__tests__/SyncEvents.test.ts
PASS src/domain/entities/__tests__/WebsiteCollection.test.ts
PASS src/domain/constants/__tests__/SelectPattern.test.ts
PASS src/usecases/xpaths/__tests__/SaveXPathUseCase.test.ts
PASS tests/integration/ExportImportFlow.test.ts
PASS src/domain/events/events/__tests__/XPathEvents.test.ts
PASS src/usecases/sync/__tests__/ExportCSVUseCase.test.ts
PASS src/usecases/storage/__tests__/InitializeMasterPasswordUseCase.test.ts
PASS src/domain/values/__tests__/PasswordStrength.test.ts
PASS src/domain/constants/__tests__/ActionType.test.ts
PASS src/usecases/automation-variables/__tests__/GetAllAutomationVariablesUseCase.test.ts
PASS src/domain/values/__tests__/result.value.test.ts
PASS src/domain/services/__tests__/ActionTypeDetectorService.test.ts
PASS src/domain/events/__tests__/EventBus.test.ts
PASS src/usecases/automation-variables/__tests__/DeleteAutomationVariablesUseCase.test.ts
PASS src/usecases/system-settings/__tests__/ImportSystemSettingsUseCase.test.ts
PASS src/usecases/websites/__tests__/DeleteWebsiteUseCase.test.ts
PASS src/presentation/automation-variables-manager/__tests__/AutomationVariablesManagerPresenter.test.ts
PASS src/usecases/automation-variables/__tests__/GetAutomationResultHistoryUseCase.test.ts
PASS src/usecases/automation-variables/__tests__/DuplicateAutomationVariablesUseCase.test.ts
PASS src/infrastructure/adapters/__tests__/ChromeSchedulerAdapter.test.ts
PASS src/infrastructure/repositories/__tests__/ChromeStorageAutomationResultRepository.test.ts
PASS src/infrastructure/loggers/__tests__/BackgroundLogger.test.ts
PASS src/domain/services/__tests__/ElementValidationService.test.ts
PASS src/infrastructure/adapters/__tests__/BrowserSyncStateNotifier.test.ts
PASS src/domain/entities/__tests__/Variable.test.ts
PASS src/domain/factories/__tests__/XPathDataFactory.test.ts
PASS src/usecases/automation-variables/__tests__/ExportAutomationVariablesUseCase.test.ts
PASS src/usecases/automation-variables/__tests__/ImportAutomationVariablesUseCase.test.ts
PASS src/usecases/system-settings/__tests__/GetSystemSettingsUseCase.test.ts
PASS tests/integration/ImportValidation.test.ts
PASS src/infrastructure/repositories/__tests__/ChromeStorageWebsiteRepository.test.ts
PASS src/infrastructure/messaging/__tests__/MessageDispatcher.test.ts
PASS src/infrastructure/repositories/__tests__/ChromeStorageStorageSyncConfigRepository.test.ts
PASS src/usecases/system-settings/__tests__/UpdateSystemSettingsUseCase.test.ts
PASS src/usecases/sync/__tests__/DeleteSyncConfigUseCase.test.ts
PASS src/domain/constants/__tests__/RetryType.test.ts
PASS src/domain/constants/__tests__/ComparisonPattern.test.ts
PASS src/usecases/websites/__tests__/ImportWebsitesUseCase.test.ts
PASS src/usecases/xpaths/__tests__/DuplicateXPathUseCase.test.ts
PASS src/usecases/websites/__tests__/UpdateWebsiteStatusUseCase.test.ts
PASS src/usecases/websites/__tests__/GetWebsiteByIdUseCase.test.ts
PASS src/usecases/automation-variables/__tests__/SaveAutomationVariablesUseCase.test.ts
PASS src/domain/services/__tests__/InputPatternService.test.ts
PASS src/usecases/automation-variables/__tests__/GetAutomationVariablesByIdUseCase.test.ts
PASS src/domain/constants/__tests__/PathPattern.test.ts
PASS src/presentation/background/__tests__/XPathContextMenuHandler.test.ts
PASS src/usecases/sync/__tests__/CleanupSyncHistoriesUseCase.test.ts
PASS src/usecases/sync/__tests__/ExecuteScheduledSyncUseCase.test.ts
PASS src/infrastructure/auto-fill/__tests__/ClickActionExecutor.test.ts
PASS src/domain/values/__tests__/validation-result.value.test.ts
PASS src/infrastructure/auto-fill/__tests__/GetValueActionExecutor.test.ts
PASS src/domain/services/__tests__/NoOpLogger.test.ts
PASS src/domain/events/events/__tests__/WebsiteEvents.test.ts
PASS src/infrastructure/loggers/__tests__/LoggerFactory.test.ts
PASS src/usecases/system-settings/__tests__/ResetSystemSettingsUseCase.test.ts
PASS src/usecases/auto-fill/__tests__/ExecuteAutoFillUseCase.test.ts
PASS src/infrastructure/adapters/__tests__/ChromeNotificationAdapter.test.ts
PASS src/usecases/automation-variables/__tests__/SaveAutomationResultUseCase.test.ts
PASS src/domain/services/__tests__/CSVFormatDetectorService.test.ts
PASS src/usecases/sync/__tests__/GetSyncHistoriesUseCase.test.ts
PASS src/usecases/websites/__tests__/GetAllWebsitesUseCase.test.ts
PASS src/usecases/websites/__tests__/SaveWebsiteUseCase.test.ts
PASS src/domain/entities/__tests__/StorageSyncConfig.test.ts
PASS src/infrastructure/mappers/__tests__/StorageSyncConfigMapper.test.ts
PASS src/domain/entities/__tests__/XPathCollection.test.ts
PASS src/presentation/content-script/__tests__/ContentScriptView.test.ts
PASS src/usecases/automation-variables/__tests__/GetAutomationVariablesByWebsiteIdUseCase.test.ts
PASS src/infrastructure/repositories/__tests__/ChromeStorageSystemSettingsRepository.test.ts
PASS src/infrastructure/adapters/__tests__/ChromeStorageLockoutStorage.test.ts
PASS src/presentation/content-script/handlers/__tests__/ShowXPathDialogHandler.test.ts
PASS src/domain/constants/__tests__/MessageTypes.test.ts
PASS src/usecases/automation-variables/__tests__/GetLatestAutomationResultUseCase.test.ts
PASS src/usecases/websites/__tests__/ExportWebsitesUseCase.test.ts
PASS src/presentation/background/handlers/__tests__/ExecuteAutoFillHandler.test.ts
PASS src/usecases/xpaths/__tests__/GetXPathsByWebsiteIdUseCase.test.ts
PASS src/usecases/storage/__tests__/ExportStorageSyncConfigsUseCase.test.ts
PASS src/usecases/xpaths/__tests__/UpdateXPathUseCase.test.ts
FAIL src/presentation/content-script/__tests__/AutoFillHandler.test.ts
  ‚óè Test suite failed to run

    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m130[0m:[93m7[0m - [91merror[0m[90m TS2769: [0mNo overload matches this call.
      Overload 1 of 4, '(iterable?: Iterable<readonly [unknown, unknown]> | null | undefined): Map<unknown, unknown>', gave the following error.
        Argument of type 'Result<any[], Error>' is not assignable to parameter of type 'Iterable<readonly [unknown, unknown]>'.
          Property '[Symbol.iterator]' is missing in type 'Result<any[], Error>' but required in type 'Iterable<readonly [unknown, unknown]>'.
      Overload 2 of 4, '(entries?: readonly (readonly [unknown, unknown])[] | null | undefined): Map<unknown, unknown>', gave the following error.
        Argument of type 'Result<any[], Error>' is not assignable to parameter of type 'readonly (readonly [unknown, unknown])[]'.
          Type 'Result<any[], Error>' is missing the following properties from type 'readonly (readonly [unknown, unknown])[]': length, concat, join, slice, and 18 more.

    [7m130[0m       allAutomationVariables.map((av) => [av.getWebsiteId(), av])
    [7m   [0m [91m      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m

      [96mnode_modules/typescript/lib/lib.es2015.iterable.d.ts[0m:[93m49[0m:[93m5[0m
        [7m49[0m     [Symbol.iterator](): Iterator<T, TReturn, TNext>;
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
        '[Symbol.iterator]' is declared here.
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m130[0m:[93m46[0m - [91merror[0m[90m TS2339: [0mProperty 'getWebsiteId' does not exist on type 'AutomationVariables[]'.

    [7m130[0m       allAutomationVariables.map((av) => [av.getWebsiteId(), av])
    [7m   [0m [91m                                             ~~~~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m133[0m:[93m85[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'Result<AutomationVariables[], Error>'.

    [7m133[0m     this.logger.info('Loaded automation variables', { count: allAutomationVariables.length });
    [7m   [0m [91m                                                                                    ~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m139[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'getStatus' does not exist on type '{}'.

    [7m139[0m         const status = av?.getStatus();
    [7m   [0m [91m                           ~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m145[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'getUpdatedAt' does not exist on type '{}'.

    [7m145[0m         const dateA = avA ? new Date(avA.getUpdatedAt()).getTime() : 0;
    [7m   [0m [91m                                         ~~~~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m146[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'getUpdatedAt' does not exist on type '{}'.

    [7m146[0m         const dateB = avB ? new Date(avB.getUpdatedAt()).getTime() : 0;
    [7m   [0m [91m                                         ~~~~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m150[0m:[93m31[0m - [91merror[0m[90m TS2322: [0mType 'Map<unknown, unknown>' is not assignable to type 'Map<string, any>'.
      Type 'unknown' is not assignable to type 'string'.

    [7m150[0m     return { enabledWebsites, automationVariablesMap };
    [7m   [0m [91m                              ~~~~~~~~~~~~~~~~~~~~~~[0m

      [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m119[0m:[93m5[0m
        [7m119[0m     automationVariablesMap: Map<string, any>;
        [7m   [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~[0m
        The expected type comes from property 'automationVariablesMap' which is declared here on type '{ enabledWebsites: WebsiteData[]; automationVariablesMap: Map<string, any>; }'

FAIL src/presentation/content-script/__tests__/ContentScriptCoordinator.test.ts
  ‚óè Test suite failed to run

    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m130[0m:[93m7[0m - [91merror[0m[90m TS2769: [0mNo overload matches this call.
      Overload 1 of 4, '(iterable?: Iterable<readonly [unknown, unknown]> | null | undefined): Map<unknown, unknown>', gave the following error.
        Argument of type 'Result<any[], Error>' is not assignable to parameter of type 'Iterable<readonly [unknown, unknown]>'.
          Property '[Symbol.iterator]' is missing in type 'Result<any[], Error>' but required in type 'Iterable<readonly [unknown, unknown]>'.
      Overload 2 of 4, '(entries?: readonly (readonly [unknown, unknown])[] | null | undefined): Map<unknown, unknown>', gave the following error.
        Argument of type 'Result<any[], Error>' is not assignable to parameter of type 'readonly (readonly [unknown, unknown])[]'.
          Type 'Result<any[], Error>' is missing the following properties from type 'readonly (readonly [unknown, unknown])[]': length, concat, join, slice, and 18 more.

    [7m130[0m       allAutomationVariables.map((av) => [av.getWebsiteId(), av])
    [7m   [0m [91m      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m

      [96mnode_modules/typescript/lib/lib.es2015.iterable.d.ts[0m:[93m49[0m:[93m5[0m
        [7m49[0m     [Symbol.iterator](): Iterator<T, TReturn, TNext>;
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
        '[Symbol.iterator]' is declared here.
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m130[0m:[93m46[0m - [91merror[0m[90m TS2339: [0mProperty 'getWebsiteId' does not exist on type 'AutomationVariables[]'.

    [7m130[0m       allAutomationVariables.map((av) => [av.getWebsiteId(), av])
    [7m   [0m [91m                                             ~~~~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m133[0m:[93m85[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'Result<AutomationVariables[], Error>'.

    [7m133[0m     this.logger.info('Loaded automation variables', { count: allAutomationVariables.length });
    [7m   [0m [91m                                                                                    ~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m139[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'getStatus' does not exist on type '{}'.

    [7m139[0m         const status = av?.getStatus();
    [7m   [0m [91m                           ~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m145[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'getUpdatedAt' does not exist on type '{}'.

    [7m145[0m         const dateA = avA ? new Date(avA.getUpdatedAt()).getTime() : 0;
    [7m   [0m [91m                                         ~~~~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m146[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'getUpdatedAt' does not exist on type '{}'.

    [7m146[0m         const dateB = avB ? new Date(avB.getUpdatedAt()).getTime() : 0;
    [7m   [0m [91m                                         ~~~~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m150[0m:[93m31[0m - [91merror[0m[90m TS2322: [0mType 'Map<unknown, unknown>' is not assignable to type 'Map<string, any>'.
      Type 'unknown' is not assignable to type 'string'.

    [7m150[0m     return { enabledWebsites, automationVariablesMap };
    [7m   [0m [91m                              ~~~~~~~~~~~~~~~~~~~~~~[0m

      [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m119[0m:[93m5[0m
        [7m119[0m     automationVariablesMap: Map<string, any>;
        [7m   [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~[0m
        The expected type comes from property 'automationVariablesMap' which is declared here on type '{ enabledWebsites: WebsiteData[]; automationVariablesMap: Map<string, any>; }'

FAIL tests/e2e/PageTransitionResume.e2e.test.ts
  ‚óè Test suite failed to run

    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m430[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'Result<AutomationResult[], string>'.

    [7m430[0m       expect(allResults.length).toBe(1);
    [7m   [0m [91m                        ~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m432[0m:[93m32[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type '0' can't be used to index type 'Result<AutomationResult[], string>'.
      Property '0' does not exist on type 'Result<AutomationResult[], string>'.

    [7m432[0m       const automationResult = allResults[0];
    [7m   [0m [91m                               ~~~~~~~~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m519[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'Result<AutomationResult[], string>'.

    [7m519[0m       expect(allResults.length).toBe(1);
    [7m   [0m [91m                        ~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m521[0m:[93m29[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type '0' can't be used to index type 'Result<AutomationResult[], string>'.
      Property '0' does not exist on type 'Result<AutomationResult[], string>'.

    [7m521[0m       const updatedResult = allResults[0];
    [7m   [0m [91m                            ~~~~~~~~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m645[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'Result<AutomationResult[], string>'.

    [7m645[0m       expect(allResults.length).toBe(1);
    [7m   [0m [91m                        ~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m647[0m:[93m27[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type '0' can't be used to index type 'Result<AutomationResult[], string>'.
      Property '0' does not exist on type 'Result<AutomationResult[], string>'.

    [7m647[0m       const finalResult = allResults[0];
    [7m   [0m [91m                          ~~~~~~~~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m727[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'Result<AutomationResult[], string>'.

    [7m727[0m       expect(allResults.length).toBe(2);
    [7m   [0m [91m                        ~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m729[0m:[93m37[0m - [91merror[0m[90m TS2339: [0mProperty 'find' does not exist on type 'Result<AutomationResult[], string>'.

    [7m729[0m       const siteAFinal = allResults.find(
    [7m   [0m [91m                                    ~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m730[0m:[93m10[0m - [91merror[0m[90m TS7006: [0mParameter 'r' implicitly has an 'any' type.

    [7m730[0m         (r) => r.getAutomationVariablesId() === automationVars1.getId()
    [7m   [0m [91m         ~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m732[0m:[93m37[0m - [91merror[0m[90m TS2339: [0mProperty 'find' does not exist on type 'Result<AutomationResult[], string>'.

    [7m732[0m       const siteBFinal = allResults.find(
    [7m   [0m [91m                                    ~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m733[0m:[93m10[0m - [91merror[0m[90m TS7006: [0mParameter 'r' implicitly has an 'any' type.

    [7m733[0m         (r) => r.getAutomationVariablesId() === automationVars2.getId()
    [7m   [0m [91m         ~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m800[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'Result<AutomationResult[], string>'.

    [7m800[0m       expect(allResults.length).toBe(1);
    [7m   [0m [91m                        ~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m802[0m:[93m27[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type '0' can't be used to index type 'Result<AutomationResult[], string>'.
      Property '0' does not exist on type 'Result<AutomationResult[], string>'.

    [7m802[0m       const finalResult = allResults[0];
    [7m   [0m [91m                          ~~~~~~~~~~~~~[0m

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
Failed to collect coverage from /Users/takeya_ozawa/Downloads/auto-fill-tool/src/usecases/recording/GetLatestRecordingByVariablesIdUseCase.ts
ERROR: [96msrc/usecases/recording/GetLatestRecordingByVariablesIdUseCase.ts[0m:[93m32[0m:[93m5[0m - [91merror[0m[90m TS2740: [0mType 'Result<TabRecording | null, Error>' is missing the following properties from type 'TabRecording': validate, getId, getAutomationResultId, getTabId, and 21 more.

[7m32[0m     return recording;
[7m  [0m [91m    ~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/takeya_ozawa/Downloads/auto-fill-tool/src/usecases/recording/DeleteOldRecordingsUseCase.ts
ERROR: [96msrc/usecases/recording/DeleteOldRecordingsUseCase.ts[0m:[93m38[0m:[93m5[0m - [91merror[0m[90m TS2322: [0mType 'Result<number, Error>' is not assignable to type 'number'.

[7m38[0m     return deletedCount;
[7m  [0m [91m    ~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/takeya_ozawa/Downloads/auto-fill-tool/src/infrastructure/repositories/IndexedDBRecordingRepository.ts
ERROR: [96msrc/infrastructure/repositories/IndexedDBRecordingRepository.ts[0m:[93m466[0m:[93m9[0m - [91merror[0m[90m TS2322: [0mType 'Result<void, Error | undefined>' is not assignable to type 'Result<void, Error>'.
  Type 'Error | undefined' is not assignable to type 'Error'.
    Type 'undefined' is not assignable to type 'Error'.

[7m466[0m         return Result.failure(recordingResult.error);
[7m   [0m [91m        ~~~~~~[0m
[96msrc/infrastructure/repositories/IndexedDBRecordingRepository.ts[0m:[93m472[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType 'Result<void, Error | undefined>' is not assignable to type 'Result<void, Error>'.
  Type 'Error | undefined' is not assignable to type 'Error'.
    Type 'undefined' is not assignable to type 'Error'.

[7m472[0m           return Result.failure(deleteResult.error);
[7m   [0m [91m          ~~~~~~[0m
[96msrc/infrastructure/repositories/IndexedDBRecordingRepository.ts[0m:[93m488[0m:[93m9[0m - [91merror[0m[90m TS2416: [0mProperty 'deleteOldRecordings' in type 'IndexedDBRecordingRepository' is not assignable to the same property in base type 'RecordingStorageRepository'.
  Type '(retentionDays: number) => Promise<number>' is not assignable to type '(retentionDays: number) => Promise<Result<number, Error>>'.
    Type 'Promise<number>' is not assignable to type 'Promise<Result<number, Error>>'.
      Type 'number' is not assignable to type 'Result<number, Error>'.

[7m488[0m   async deleteOldRecordings(retentionDays: number): Promise<number> {
[7m   [0m [91m        ~~~~~~~~~~~~~~~~~~~[0m
[96msrc/infrastructure/repositories/IndexedDBRecordingRepository.ts[0m:[93m556[0m:[93m9[0m - [91merror[0m[90m TS2416: [0mProperty 'getStorageSize' in type 'IndexedDBRecordingRepository' is not assignable to the same property in base type 'RecordingStorageRepository'.
  Type '() => Promise<number>' is not assignable to type '() => Promise<Result<number, Error>>'.
    Type 'Promise<number>' is not assignable to type 'Promise<Result<number, Error>>'.
      Type 'number' is not assignable to type 'Result<number, Error>'.

[7m556[0m   async getStorageSize(): Promise<number> {
[7m   [0m [91m        ~~~~~~~~~~~~~~[0m
[96msrc/infrastructure/repositories/IndexedDBRecordingRepository.ts[0m:[93m558[0m:[93m23[0m - [91merror[0m[90m TS2339: [0mProperty 'reduce' does not exist on type 'Result<TabRecording[], Error>'.

[7m558[0m     return recordings.reduce((total, rec) => total + rec.getSizeBytes(), 0);
[7m   [0m [91m                      ~~~~~~[0m
[96msrc/infrastructure/repositories/IndexedDBRecordingRepository.ts[0m:[93m558[0m:[93m31[0m - [91merror[0m[90m TS7006: [0mParameter 'total' implicitly has an 'any' type.

[7m558[0m     return recordings.reduce((total, rec) => total + rec.getSizeBytes(), 0);
[7m   [0m [91m                              ~~~~~[0m
[96msrc/infrastructure/repositories/IndexedDBRecordingRepository.ts[0m:[93m558[0m:[93m38[0m - [91merror[0m[90m TS7006: [0mParameter 'rec' implicitly has an 'any' type.

[7m558[0m     return recordings.reduce((total, rec) => total + rec.getSizeBytes(), 0);
[7m   [0m [91m                                     ~~~[0m
STACK: 
Failed to collect coverage from /Users/takeya_ozawa/Downloads/auto-fill-tool/src/usecases/recording/GetRecordingByResultIdUseCase.ts
ERROR: [96msrc/usecases/recording/GetRecordingByResultIdUseCase.ts[0m:[93m30[0m:[93m5[0m - [91merror[0m[90m TS2740: [0mType 'Result<TabRecording | null, Error>' is missing the following properties from type 'TabRecording': validate, getId, getAutomationResultId, getTabId, and 21 more.

[7m30[0m     return recording;
[7m  [0m [91m    ~~~~~~[0m
STACK: 
Failed to collect coverage from /Users/takeya_ozawa/Downloads/auto-fill-tool/src/usecases/recording/StopTabRecordingUseCase.ts
ERROR: [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m52[0m:[93m30[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

[7m52[0m       recordingId: recording.getId(),
[7m  [0m [91m                             ~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m54[0m:[93m24[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

[7m54[0m       tabId: recording.getTabId(),
[7m  [0m [91m                       ~~~~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m55[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getStatus' does not exist on type 'Result<TabRecording | null, Error>'.

[7m55[0m       currentStatus: recording.getStatus(),
[7m  [0m [91m                               ~~~~~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m56[0m:[93m29[0m - [91merror[0m[90m TS2339: [0mProperty 'getRecorderId' does not exist on type 'Result<TabRecording | null, Error>'.

[7m56[0m       recorderId: recording.getRecorderId(),
[7m  [0m [91m                            ~~~~~~~~~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m59[0m:[93m20[0m - [91merror[0m[90m TS2339: [0mProperty 'isRecording' does not exist on type 'Result<TabRecording | null, Error>'.

[7m59[0m     if (!recording.isRecording()) {
[7m  [0m [91m                   ~~~~~~~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m61[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

[7m61[0m         recordingId: recording.getId(),
[7m  [0m [91m                               ~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m63[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'getStatus' does not exist on type 'Result<TabRecording | null, Error>'.

[7m63[0m         currentStatus: recording.getStatus(),
[7m  [0m [91m                                 ~~~~~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m64[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

[7m64[0m         tabId: recording.getTabId(),
[7m  [0m [91m                         ~~~~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m66[0m:[93m7[0m - [91merror[0m[90m TS2740: [0mType 'Result<TabRecording | null, Error>' is missing the following properties from type 'TabRecording': validate, getId, getAutomationResultId, getTabId, and 21 more.

[7m66[0m       return recording;
[7m  [0m [91m      ~~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m70[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'getRecorderId' does not exist on type 'Result<TabRecording | null, Error>'.

[7m70[0m     const recorderId = recording.getRecorderId();
[7m  [0m [91m                                 ~~~~~~~~~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m73[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

[7m73[0m         recordingId: recording.getId(),
[7m  [0m [91m                               ~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m75[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

[7m75[0m         tabId: recording.getTabId(),
[7m  [0m [91m                         ~~~~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m76[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'getStatus' does not exist on type 'Result<TabRecording | null, Error>'.

[7m76[0m         currentStatus: recording.getStatus(),
[7m  [0m [91m                                 ~~~~~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m78[0m:[93m40[0m - [91merror[0m[90m TS2339: [0mProperty 'markError' does not exist on type 'Result<TabRecording | null, Error>'.

[7m78[0m       const errorRecording = recording.markError('No recorderId found');
[7m  [0m [91m                                       ~~~~~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m86[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

[7m86[0m         recordingId: recording.getId(),
[7m  [0m [91m                               ~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m94[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

[7m94[0m         recordingId: recording.getId(),
[7m  [0m [91m                               ~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m101[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'stop' does not exist on type 'Result<TabRecording | null, Error>'.

[7m101[0m       const stoppedRecording = recording.stop().save(blob);
[7m   [0m [91m                                         ~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m114[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

[7m114[0m         recordingId: recording.getId(),
[7m   [0m [91m                               ~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m117[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

[7m117[0m         tabId: recording.getTabId(),
[7m   [0m [91m                         ~~~~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m127[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

[7m127[0m         recordingId: recording.getId(),
[7m   [0m [91m                               ~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m130[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

[7m130[0m         tabId: recording.getTabId(),
[7m   [0m [91m                         ~~~~~~~~[0m
[96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m133[0m:[93m40[0m - [91merror[0m[90m TS2339: [0mProperty 'markError' does not exist on type 'Result<TabRecording | null, Error>'.

[7m133[0m       const errorRecording = recording.markError('Failed to stop recording');
[7m   [0m [91m                                       ~~~~~~~~~[0m
STACK: 
------------------------------------------------|---------|----------|---------|---------|-------------------------------------------------------------------------------------------------
File                                            | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                               
------------------------------------------------|---------|----------|---------|---------|-------------------------------------------------------------------------------------------------
All files                                       |   92.84 |    84.41 |   94.47 |   92.96 |                                                                                                 
 domain/constants                               |     100 |      100 |     100 |     100 |                                                                                                 
  ActionPatterns.ts                             |     100 |      100 |     100 |     100 |                                                                                                 
  ActionType.ts                                 |     100 |      100 |     100 |     100 |                                                                                                 
  AutomationStatus.ts                           |     100 |      100 |     100 |     100 |                                                                                                 
  ComparisonPattern.ts                          |     100 |      100 |     100 |     100 |                                                                                                 
  ContextMenuIds.ts                             |     100 |      100 |     100 |     100 |                                                                                                 
  EventPattern.ts                               |     100 |      100 |     100 |     100 |                                                                                                 
  ExecutionStatus.ts                            |     100 |      100 |     100 |     100 |                                                                                                 
  InputPattern.ts                               |     100 |      100 |     100 |     100 |                                                                                                 
  PathPattern.ts                                |     100 |      100 |     100 |     100 |                                                                                                 
  RetryType.ts                                  |     100 |      100 |     100 |     100 |                                                                                                 
  SelectPattern.ts                              |     100 |      100 |     100 |     100 |                                                                                                 
  SelectionStrategy.ts                          |     100 |      100 |     100 |     100 |                                                                                                 
  SessionConfig.ts                              |     100 |      100 |     100 |     100 |                                                                                                 
  StorageKeys.ts                                |     100 |      100 |     100 |     100 |                                                                                                 
 domain/entities                                |   94.74 |     93.8 |   93.88 |   94.68 |                                                                                                 
  AutoFillEvent.ts                              |     100 |      100 |     100 |     100 |                                                                                                 
  AutomationResult.ts                           |     100 |    89.28 |     100 |     100 | 16-18                                                                                           
  AutomationVariables.ts                        |     100 |      100 |     100 |     100 |                                                                                                 
  BatchConfig.ts                                |     100 |      100 |     100 |     100 |                                                                                                 
  CheckerState.ts                               |   96.29 |    95.65 |     100 |   96.29 | 41                                                                                              
  DataTransformer.ts                            |   96.49 |    93.26 |     100 |   96.42 | 240-244,256,293                                                                                 
  LogEntry.ts                                   |     100 |      100 |     100 |     100 |                                                                                                 
  MasterPasswordPolicy.ts                       |     100 |      100 |     100 |     100 |                                                                                                 
  RetryPolicy.ts                                |     100 |      100 |     100 |     100 |                                                                                                 
  StorageSyncConfig.ts                          |   88.23 |      100 |   77.77 |   88.23 | 75,102-105,117-120,160-174                                                                      
  SyncHistory.ts                                |     100 |      100 |     100 |     100 |                                                                                                 
  SyncResult.ts                                 |     100 |      100 |     100 |     100 |                                                                                                 
  SyncState.ts                                  |     100 |      100 |     100 |     100 |                                                                                                 
  SystemSettings.ts                             |   59.03 |    74.35 |   60.52 |   59.03 | 113,122-125,153,193-196,205-208,217-280                                                         
  TabRecording.ts                               |     100 |    96.66 |     100 |     100 | 150-159                                                                                         
  Variable.ts                                   |     100 |      100 |     100 |     100 |                                                                                                 
  Website.ts                                    |     100 |      100 |     100 |     100 |                                                                                                 
  WebsiteCollection.ts                          |     100 |      100 |     100 |     100 |                                                                                                 
  XPathCollection.ts                            |     100 |      100 |     100 |     100 |                                                                                                 
 domain/events                                  |      95 |    77.77 |     100 |   94.73 |                                                                                                 
  DomainEvent.ts                                |     100 |      100 |     100 |     100 |                                                                                                 
  EventBus.ts                                   |     100 |    77.77 |     100 |     100 | 72-91,175                                                                                       
  EventHandler.ts                               |       0 |      100 |     100 |       0 | 6-19                                                                                            
 domain/events/events                           |     100 |      100 |     100 |     100 |                                                                                                 
  AutoFillEvents.ts                             |     100 |      100 |     100 |     100 |                                                                                                 
  SyncEvents.ts                                 |     100 |      100 |     100 |     100 |                                                                                                 
  WebsiteEvents.ts                              |     100 |      100 |     100 |     100 |                                                                                                 
  XPathEvents.ts                                |     100 |      100 |     100 |     100 |                                                                                                 
 domain/events/examples                         |       0 |        0 |       0 |       0 |                                                                                                 
  AutoFillNotificationHandler.ts                |       0 |        0 |       0 |       0 | 6-73                                                                                            
  LoggingEventHandler.ts                        |       0 |      100 |       0 |       0 | 6-33                                                                                            
  SyncMetricsHandler.ts                         |       0 |        0 |       0 |       0 | 6-111                                                                                           
 domain/factories                               |     100 |      100 |     100 |     100 |                                                                                                 
  XPathDataFactory.ts                           |     100 |      100 |     100 |     100 |                                                                                                 
 domain/services                                |   98.73 |     96.4 |     100 |   98.71 |                                                                                                 
  ActionTypeDetectorService.ts                  |     100 |      100 |     100 |     100 |                                                                                                 
  BatchProcessor.ts                             |     100 |    93.33 |     100 |     100 | 188,200                                                                                         
  CSVFormatDetectorService.ts                   |     100 |      100 |     100 |     100 |                                                                                                 
  CSVValidationService.ts                       |     100 |      100 |     100 |     100 |                                                                                                 
  DataTransformationService.ts                  |     100 |    95.65 |     100 |     100 | 80,121,152                                                                                      
  DefaultConflictResolver.ts                    |     100 |    93.33 |     100 |     100 | 66                                                                                              
  ElementValidationService.ts                   |     100 |      100 |     100 |     100 |                                                                                                 
  InputPatternService.ts                        |     100 |      100 |     100 |     100 |                                                                                                 
  LockoutManager.ts                             |     100 |      100 |     100 |     100 |                                                                                                 
  NoOpLogger.ts                                 |     100 |      100 |     100 |     100 |                                                                                                 
  PasswordValidator.ts                          |     100 |      100 |     100 |     100 |                                                                                                 
  ProgressTrackingService.ts                    |     100 |      100 |     100 |     100 |                                                                                                 
  RetryExecutor.ts                              |      92 |    77.77 |     100 |   91.83 | 83-87,162-166                                                                                   
  RetryPolicyService.ts                         |     100 |      100 |     100 |     100 |                                                                                                 
  SecurityEventLogger.ts                        |   94.44 |     87.5 |     100 |   94.44 | 116                                                                                             
  SelectionStrategyService.ts                   |      95 |       90 |     100 |   94.11 | 29                                                                                              
  SessionManager.ts                             |     100 |      100 |     100 |     100 |                                                                                                 
  StepValidationService.ts                      |    97.7 |     96.8 |     100 |    97.7 | 153,218                                                                                         
  URLMatchingService.ts                         |   96.66 |    93.33 |     100 |   96.66 | 83                                                                                              
  ValueComparisonService.ts                     |   92.59 |      100 |     100 |      92 | 51,69                                                                                           
  VariableSubstitutionService.ts                |     100 |    83.33 |     100 |     100 | 56                                                                                              
  WebsiteMigrationService.ts                    |     100 |      100 |     100 |     100 |                                                                                                 
  XPathSelectionService.ts                      |     100 |      100 |     100 |     100 |                                                                                                 
 domain/types/messaging                         |     100 |      100 |     100 |     100 |                                                                                                 
  MessageContracts.ts                           |     100 |      100 |     100 |     100 |                                                                                                 
  MessageTypes.ts                               |     100 |      100 |     100 |     100 |                                                                                                 
 domain/utils                                   |     100 |      100 |     100 |     100 |                                                                                                 
  SyncConfigUtils.ts                            |     100 |      100 |     100 |     100 |                                                                                                 
 domain/values                                  |   96.89 |    93.95 |    92.4 |   96.85 |                                                                                                 
  CommonPasswordDictionary.ts                   |   98.46 |    94.44 |     100 |   98.36 | 101                                                                                             
  MasterPasswordRequirements.ts                 |     100 |      100 |     100 |     100 |                                                                                                 
  PasswordEntropy.ts                            |   98.38 |    95.83 |     100 |   98.38 | 60                                                                                              
  PasswordStrength.ts                           |   92.77 |     89.7 |   66.66 |   92.77 | 18,170-194                                                                                      
  UnlockStatus.ts                               |     100 |    97.36 |     100 |     100 | 176                                                                                             
  result.value.ts                               |    90.9 |    85.71 |   93.33 |    90.9 | 110-113                                                                                         
  validation-result.value.ts                    |     100 |      100 |     100 |     100 |                                                                                                 
 infrastructure/adapters                        |   90.29 |    78.68 |   94.71 |   91.04 |                                                                                                 
  AxiosHttpClient.ts                            |   87.71 |    88.46 |   91.66 |   87.71 | 76,92-93,130-134,172-173                                                                        
  BrowserSyncStateNotifier.ts                   |     100 |     90.9 |     100 |     100 | 18                                                                                              
  BrowserXPathGenerationAdapter.ts              |    95.4 |    81.96 |     100 |   95.29 | 36,60-64                                                                                        
  ChromeAutoFillAdapter.ts                      |   85.37 |    70.24 |   92.85 |   85.43 | 156,170-172,213,287-289,299,308-312,321-326,339-340,391-393,406-407,424,454-455,463,514,570     
  ChromeContextMenuAdapter.ts                   |    90.9 |    82.35 |     100 |   90.69 | 27-28,50-51                                                                                     
  ChromeHttpClient.ts                           |     100 |      100 |     100 |     100 |                                                                                                 
  ChromeNotificationAdapter.ts                  |   88.23 |    76.92 |     100 |    87.5 | 40,46                                                                                           
  ChromeSchedulerAdapter.ts                     |     100 |    88.88 |     100 |     100 | 8                                                                                               
  ChromeStorageLockoutStorage.ts                |     100 |    88.88 |     100 |     100 | 7                                                                                               
  ChromeStorageLogAggregatorAdapter.ts          |     100 |    96.15 |     100 |     100 | 103                                                                                             
  CryptoAdapter.ts                              |     100 |      100 |     100 |     100 |                                                                                                 
  I18nAdapter.ts                                |     100 |    88.46 |     100 |     100 | 58,78,88                                                                                        
  JSONPathDataMapper.ts                         |   93.02 |    77.77 |     100 |   93.02 | 96,119-123                                                                                      
  NotionSyncAdapter.ts                          |   90.62 |    85.29 |     100 |   90.42 | 106-109,131-134,162-165,242,286,290                                                             
  PapaParseAdapter.ts                           |   93.18 |    96.77 |   85.71 |   95.23 | 83-84                                                                                           
  PermissionManager.ts                          |   96.42 |     87.5 |     100 |   96.29 | 239-240                                                                                         
  SecureStorageAdapter.ts                       |    96.9 |    89.65 |      95 |   97.82 | 44,83                                                                                           
  SpreadsheetSyncAdapter.ts                     |   67.17 |    58.24 |   68.18 |   72.26 | 10-18,21-23,27-32,36-39,120-124,153-157,186-190,224-227,263-267,283,315-317,321                 
 infrastructure/auto-fill                       |   85.87 |    85.46 |    92.7 |   86.03 |                                                                                                 
  CancellationCoordinator.ts                    |     100 |      100 |     100 |     100 |                                                                                                 
  ChangeUrlActionExecutor.ts                    |   83.33 |    77.14 |     100 |   83.05 | 64-65,68-69,103-105,110-112                                                                     
  CheckboxActionExecutor.ts                     |     100 |      100 |     100 |     100 |                                                                                                 
  ClickActionExecutor.ts                        |     100 |      100 |     100 |     100 |                                                                                                 
  GetValueActionExecutor.ts                     |     100 |    96.15 |     100 |     100 | 136                                                                                             
  InputActionExecutor.ts                        |   96.66 |    93.47 |     100 |   96.66 | 98-102                                                                                          
  JudgeActionExecutor.ts                        |     100 |      100 |     100 |     100 |                                                                                                 
  ProgressReporter.ts                           |    92.3 |       75 |      75 |    92.3 | 32                                                                                              
  RetryController.ts                            |     100 |      100 |     100 |     100 |                                                                                                 
  ScreenshotActionExecutor.ts                   |   13.55 |    19.35 |      25 |   14.03 | 31-152                                                                                          
  SelectActionExecutor.ts                       |     100 |      100 |     100 |     100 |                                                                                                 
  TimeoutManager.ts                             |     100 |       80 |     100 |     100 | 42,103                                                                                          
 infrastructure/factories                       |     100 |      100 |     100 |     100 |                                                                                                 
  RepositoryFactory.ts                          |     100 |      100 |     100 |     100 |                                                                                                 
 infrastructure/loggers                         |   98.78 |    93.93 |     100 |   98.78 |                                                                                                 
  BackgroundLogger.ts                           |     100 |     87.5 |     100 |     100 | 7,35-40,83                                                                                      
  ConsoleLogger.ts                              |   97.43 |      100 |     100 |   97.43 | 72                                                                                              
  LoggerFactory.ts                              |     100 |      100 |     100 |     100 |                                                                                                 
 infrastructure/mappers                         |   78.53 |    74.88 |    87.5 |   78.71 |                                                                                                 
  AutomationVariablesMapper.ts                  |   94.18 |    89.13 |     100 |   94.04 | 107-108,113,118-119                                                                             
  JsonPathDataMapper.ts                         |   95.23 |     82.6 |     100 |   95.23 | 31,65                                                                                           
  StorageSyncConfigMapper.ts                    |   94.11 |    92.85 |     100 |   94.11 | 51                                                                                              
  SystemSettingsMapper.ts                       |   40.65 |    46.34 |      30 |   41.32 | 122-256                                                                                         
  WebsiteCollectionMapper.ts                    |   98.14 |      100 |     100 |   98.11 | 67                                                                                              
  XPathCollectionMapper.ts                      |   95.94 |    92.59 |     100 |   95.89 | 92-93,159                                                                                       
 infrastructure/messaging                       |     100 |       90 |     100 |     100 |                                                                                                 
  MessageDispatcher.ts                          |     100 |    85.71 |     100 |     100 | 7                                                                                               
  MessageRouter.ts                              |     100 |     91.3 |     100 |     100 | 7,112                                                                                           
 infrastructure/repositories                    |   98.39 |     76.7 |   99.18 |   98.29 |                                                                                                 
  ChromeStorageAutomationResultRepository.ts    |    97.7 |    72.72 |     100 |    97.5 | 98-99                                                                                           
  ChromeStorageAutomationVariablesRepository.ts |   98.75 |    81.08 |   94.11 |   98.64 | 68                                                                                              
  ChromeStorageStorageSyncConfigRepository.ts   |     100 |    76.92 |     100 |     100 | 38,54,70-83,95,115,133-155                                                                      
  ChromeStorageSyncHistoryRepository.ts         |     100 |    74.28 |     100 |     100 | 6,44,58,76-109,129-155                                                                          
  ChromeStorageSystemSettingsRepository.ts      |     100 |    76.92 |     100 |     100 | 6-27,44                                                                                         
  ChromeStorageWebsiteRepository.ts             |     100 |    84.61 |     100 |     100 | 27,44                                                                                           
  ChromeStorageXPathRepository.ts               |   81.25 |    66.66 |     100 |   81.25 | 28-29,46-52                                                                                     
  ChromeWebsiteConfigRepository.ts              |     100 |     90.9 |     100 |     100 | 10                                                                                              
  SecureAutomationVariablesRepository.ts        |   98.21 |    66.66 |     100 |   98.18 | 135                                                                                             
  SecureSystemSettingsRepository.ts             |     100 |       75 |     100 |     100 | 39,64                                                                                           
  SecureWebsiteRepository.ts                    |     100 |       80 |     100 |     100 | 42,70                                                                                           
  SecureXPathRepository.ts                      |     100 |    85.71 |     100 |     100 | 43,71                                                                                           
 presentation/automation-variables-manager      |   94.14 |    83.33 |   94.11 |   94.08 |                                                                                                 
  AutomationVariablesManagerPresenter.ts        |   92.22 |    77.77 |   86.66 |   92.04 | 183-199                                                                                         
  AutomationVariablesManagerView.ts             |   95.65 |    85.18 |     100 |   95.65 | 32,118,142,194,212                                                                              
 presentation/background                        |   90.66 |       70 |     100 |   90.66 |                                                                                                 
  XPathContextMenuHandler.ts                    |   90.66 |       70 |     100 |   90.66 | 95,129,137-138,151,162-163                                                                      
 presentation/background/handlers               |    68.8 |       56 |      75 |   69.35 |                                                                                                 
  CancelAutoFillHandler.ts                      |     100 |      100 |     100 |     100 |                                                                                                 
  ExecuteAutoFillHandler.ts                     |     100 |       75 |     100 |     100 | 25-39                                                                                           
  ExecuteWebsiteFromPopupHandler.ts             |   45.07 |    36.66 |   54.54 |   45.71 | 34-43,71-130                                                                                    
 presentation/common                            |   93.16 |     87.8 |     100 |   93.04 |                                                                                                 
  DataBinder.ts                                 |    91.3 |    85.71 |     100 |   91.11 | 65,98,102,108,114-120,161                                                                       
  TemplateLoader.ts                             |     100 |      100 |     100 |     100 |                                                                                                 
 presentation/components                        |     100 |      100 |     100 |     100 |                                                                                                 
  TabManager.ts                                 |     100 |      100 |     100 |     100 |                                                                                                 
 presentation/content-script                    |   84.68 |    72.35 |   79.68 |   84.65 |                                                                                                 
  AutoFillOverlay.ts                            |   94.83 |    73.21 |     100 |   94.83 | 76,93,105,130,148-150,221,257                                                                   
  ContentScriptCoordinator.ts                   |       0 |        0 |       0 |       0 | 6-145                                                                                           
  ContentScriptPresenter.ts                     |     100 |    96.66 |     100 |     100 | 161                                                                                             
  ContentScriptView.ts                          |     100 |      100 |     100 |     100 |                                                                                                 
  XPathDialog.ts                                |   95.48 |    79.16 |     100 |   95.45 | 84-109,193,208                                                                                  
 presentation/content-script/handlers           |   93.75 |    74.07 |     100 |   93.75 |                                                                                                 
  GetXPathHandler.ts                            |   90.47 |    63.15 |     100 |   90.47 | 53,57                                                                                           
  ShowXPathDialogHandler.ts                     |     100 |      100 |     100 |     100 |                                                                                                 
 presentation/master-password-setup             |   97.27 |    94.44 |   88.46 |     100 |                                                                                                 
  MasterPasswordSetupPresenter.ts               |   95.45 |    94.44 |      70 |     100 | 114                                                                                             
  MasterPasswordSetupView.ts                    |     100 |      100 |     100 |     100 |                                                                                                 
 presentation/offscreen                         |   97.75 |    94.28 |   90.47 |   97.72 |                                                                                                 
  OffscreenPresenter.ts                         |   96.55 |     90.9 |   83.33 |   96.55 | 32,40                                                                                           
  OffscreenView.ts                              |     100 |      100 |     100 |     100 |                                                                                                 
 presentation/popup                             |   98.51 |    83.33 |     100 |   98.49 |                                                                                                 
  ModalManager.ts                               |     100 |    78.57 |     100 |     100 | 42,49,80                                                                                        
  PopupCoordinator.ts                           |   98.14 |    94.73 |     100 |   98.07 | 83                                                                                              
  SettingsModalManager.ts                       |   97.87 |       80 |     100 |   97.84 | 130,149,213                                                                                     
  WebsiteActionHandler.ts                       |     100 |       75 |     100 |     100 | 43-46                                                                                           
 presentation/security-log-viewer               |   97.83 |    85.34 |     100 |   97.76 |                                                                                                 
  SecurityLogViewerPresenter.ts                 |   98.87 |    98.24 |     100 |   98.82 | 181                                                                                             
  SecurityLogViewerView.ts                      |   97.18 |    72.88 |     100 |   97.12 | 120,168,174-176                                                                                 
 presentation/storage-sync-manager              |   97.12 |    80.39 |     100 |   97.04 |                                                                                                 
  StorageSyncManagerCoordinator.ts              |    90.9 |    73.68 |     100 |   90.62 | 39-40,66,117-122                                                                                
  StorageSyncManagerPresenter.ts                |     100 |    81.92 |     100 |     100 | 42,52,86,106,123,158,180,192,211-212,218,236,252,271,318                                        
 presentation/system-settings                   |   96.51 |    86.11 |      99 |   96.44 |                                                                                                 
  AppearanceSettingsManager.ts                  |   97.72 |    80.39 |     100 |   97.64 | 74-75                                                                                           
  DataSyncManager.ts                            |   94.89 |       75 |      95 |   94.81 | 41-42,138,163,190,244-245                                                                       
  GeneralSettingsManager.ts                     |     100 |      100 |     100 |     100 |                                                                                                 
  PermissionsSettingsManager.ts                 |     100 |    89.28 |     100 |     100 | 149-179                                                                                         
  RecordingSettingsManager.ts                   |     100 |      100 |     100 |     100 |                                                                                                 
  SystemSettingsPresenter.ts                    |   91.27 |    85.71 |     100 |   91.21 | 142,161,165,173-175,184,190,200-202,252-253                                                     
  SystemSettingsView.ts                         |     100 |    90.62 |     100 |     100 | 43-53,89                                                                                        
 presentation/unlock                            |    96.6 |       85 |   91.07 |   98.97 |                                                                                                 
  UnlockPresenter.ts                            |   94.44 |     86.2 |   79.16 |   98.29 | 194,219                                                                                         
  UnlockView.ts                                 |     100 |    81.81 |     100 |     100 | 66,109-115                                                                                      
 presentation/xpath-manager                     |   95.33 |     80.6 |   97.16 |    95.3 |                                                                                                 
  AutoFillExecutor.ts                           |     100 |    90.32 |     100 |     100 | 7,84,91                                                                                         
  ExportImportManager.ts                        |   91.86 |    70.58 |   93.75 |   91.86 | 147-153                                                                                         
  VariableManager.ts                            |   92.15 |    79.41 |     100 |   92.15 | 128-129,135-136,142-143,151-152                                                                 
  WebsiteSelectManager.ts                       |     100 |       75 |     100 |     100 | 46-52                                                                                           
  XPathActionHandler.ts                         |     100 |      100 |     100 |     100 |                                                                                                 
  XPathEditModalManager.ts                      |     100 |      100 |     100 |     100 |                                                                                                 
  XPathManagerCoordinator.ts                    |   88.88 |    63.63 |     100 |   88.46 | 36-37,61,93-98                                                                                  
  XPathManagerPresenter.ts                      |   92.07 |       55 |   92.85 |      92 | 171-182                                                                                         
  XPathManagerView.ts                           |   97.91 |    84.61 |    92.3 |   97.91 | 62                                                                                              
 usecases/auto-fill                             |   67.68 |    60.46 |   68.75 |   68.09 |                                                                                                 
  ExecuteAutoFillUseCase.ts                     |   67.68 |    60.46 |   68.75 |   68.09 | 44-49,65-68,76-77,85-94,109,153-194,210-213,229-233,251-255,259-262,269-276,284,300,346-349,369 
 usecases/automation-variables                  |   98.81 |    78.82 |     100 |   98.78 |                                                                                                 
  DeleteAutomationVariablesUseCase.ts           |     100 |       75 |     100 |     100 | 18,23                                                                                           
  DuplicateAutomationVariablesUseCase.ts        |     100 |      100 |     100 |     100 |                                                                                                 
  ExportAutomationVariablesUseCase.ts           |     100 |       75 |     100 |     100 | 17                                                                                              
  GetAllAutomationVariablesUseCase.ts           |     100 |       75 |     100 |     100 | 15                                                                                              
  GetAutomationResultHistoryUseCase.ts          |     100 |       75 |     100 |     100 | 16                                                                                              
  GetAutomationVariablesByIdUseCase.ts          |     100 |    83.33 |     100 |     100 | 16                                                                                              
  GetAutomationVariablesByWebsiteIdUseCase.ts   |     100 |    83.33 |     100 |     100 | 16                                                                                              
  GetLatestAutomationResultUseCase.ts           |     100 |    83.33 |     100 |     100 | 16                                                                                              
  ImportAutomationVariablesUseCase.ts           |   94.44 |    66.66 |     100 |   93.93 | 56,61                                                                                           
  MigrateAutomationVariablesStorageUseCase.ts   |     100 |    86.66 |     100 |     100 | 7,43                                                                                            
  SaveAutomationResultUseCase.ts                |     100 |       75 |     100 |     100 | 16                                                                                              
  SaveAutomationVariablesUseCase.ts             |     100 |       75 |     100 |     100 | 16                                                                                              
 usecases/recording                             |       0 |        0 |       0 |       0 |                                                                                                 
  StartTabRecordingUseCase.ts                   |       0 |        0 |       0 |       0 | 6-104                                                                                           
 usecases/storage                               |   97.85 |    82.35 |     100 |   97.83 |                                                                                                 
  CheckUnlockStatusUseCase.ts                   |     100 |     90.9 |     100 |     100 | 34                                                                                              
  ExecuteStorageSyncUseCase.ts                  |     100 |      100 |     100 |     100 |                                                                                                 
  ExportStorageSyncConfigsUseCase.ts            |     100 |     87.5 |     100 |     100 | 11                                                                                              
  GetAllStorageSyncConfigsUseCase.ts            |     100 |      100 |     100 |     100 |                                                                                                 
  InitializeMasterPasswordUseCase.ts            |     100 |      100 |     100 |     100 |                                                                                                 
  LockStorageUseCase.ts                         |     100 |      100 |     100 |     100 |                                                                                                 
  MigrateToSecureStorageUseCase.ts              |   94.73 |    71.42 |     100 |   94.62 | 38,70-71,150,223                                                                                
  UnlockStorageUseCase.ts                       |     100 |       75 |     100 |     100 | 27-41,56                                                                                        
 usecases/sync                                  |    97.1 |    90.88 |   98.91 |   97.06 |                                                                                                 
  CleanupSyncHistoriesUseCase.ts                |     100 |       75 |     100 |     100 | 43                                                                                              
  CreateSyncConfigUseCase.ts                    |     100 |    94.73 |     100 |     100 | 40-41                                                                                           
  DeleteSyncConfigUseCase.ts                    |     100 |      100 |     100 |     100 |                                                                                                 
  ExecuteManualSyncUseCase.ts                   |   88.18 |       75 |   83.33 |   88.18 | 80,166,259,268-285                                                                              
  ExecuteReceiveDataUseCase.ts                  |   98.63 |    86.95 |     100 |   98.55 | 128                                                                                             
  ExecuteScheduledSyncUseCase.ts                |   98.63 |      100 |     100 |   98.63 | 62                                                                                              
  ExecuteSendDataUseCase.ts                     |   97.97 |    91.07 |     100 |   97.82 | 106,170                                                                                         
  ExportCSVUseCase.ts                           |     100 |      100 |     100 |     100 |                                                                                                 
  GetSyncHistoriesUseCase.ts                    |     100 |    85.71 |     100 |     100 | 55                                                                                              
  ImportCSVUseCase.ts                           |     100 |      100 |     100 |     100 |                                                                                                 
  ListSyncConfigsUseCase.ts                     |     100 |     92.3 |     100 |     100 | 13                                                                                              
  TestConnectionUseCase.ts                      |     100 |    92.85 |     100 |     100 | 40                                                                                              
  UpdateSyncConfigUseCase.ts                    |   96.77 |       94 |     100 |   96.77 | 102,132                                                                                         
  ValidateSyncConfigUseCase.ts                  |   96.42 |    97.77 |     100 |   96.42 | 73,82                                                                                           
 usecases/system-settings                       |   96.77 |    90.47 |     100 |   96.77 |                                                                                                 
  ExportSystemSettingsUseCase.ts                |     100 |      100 |     100 |     100 |                                                                                                 
  GetSystemSettingsUseCase.ts                   |     100 |      100 |     100 |     100 |                                                                                                 
  ImportSystemSettingsUseCase.ts                |    90.9 |       50 |     100 |    90.9 | 20                                                                                              
  ResetSystemSettingsUseCase.ts                 |     100 |      100 |     100 |     100 |                                                                                                 
  UpdateSystemSettingsUseCase.ts                |   88.88 |       50 |     100 |   88.88 | 16                                                                                              
 usecases/websites                              |   95.73 |    69.38 |     100 |   95.67 |                                                                                                 
  DeleteWebsiteUseCase.ts                       |   96.55 |       70 |     100 |   96.55 | 57                                                                                              
  ExportWebsitesUseCase.ts                      |     100 |       75 |     100 |     100 | 23                                                                                              
  GetAllWebsitesUseCase.ts                      |     100 |       75 |     100 |     100 | 17                                                                                              
  GetWebsiteByIdUseCase.ts                      |     100 |    83.33 |     100 |     100 | 17                                                                                              
  ImportWebsitesUseCase.ts                      |     100 |    83.33 |     100 |     100 | 29                                                                                              
  SaveWebsiteUseCase.ts                         |     100 |       75 |     100 |     100 | 19,30                                                                                           
  SaveWebsiteWithAutomationVariablesUseCase.ts  |   90.32 |       75 |     100 |   90.32 | 40,69,89                                                                                        
  UpdateWebsiteStatusUseCase.ts                 |   86.95 |    43.75 |     100 |   86.95 | 18,34,52                                                                                        
  UpdateWebsiteUseCase.ts                       |     100 |       70 |     100 |     100 | 18,29-37                                                                                        
 usecases/xpaths                                |   89.47 |    70.31 |     100 |   89.14 |                                                                                                 
  DeleteXPathUseCase.ts                         |   86.66 |    66.66 |     100 |   86.66 | 14,22                                                                                           
  DuplicateXPathUseCase.ts                      |      90 |     62.5 |     100 |      90 | 14,44                                                                                           
  ExportXPathsUseCase.ts                        |    90.9 |       50 |     100 |    90.9 | 17                                                                                              
  GetAllXPathsUseCase.ts                        |    87.5 |       50 |     100 |    87.5 | 14                                                                                              
  GetXPathsByWebsiteIdUseCase.ts                |      90 |       50 |     100 |   88.88 | 15                                                                                              
  ImportXPathsUseCase.ts                        |   91.17 |     62.5 |     100 |   90.32 | 29,51,56                                                                                        
  SaveXPathUseCase.ts                           |   88.23 |       90 |     100 |   88.23 | 15,38                                                                                           
  UpdateXPathUseCase.ts                         |   88.88 |     62.5 |     100 |   88.88 | 14,26                                                                                           
 utils                                          |     100 |      100 |     100 |     100 |                                                                                                 
  dateFormatter.ts                              |     100 |      100 |     100 |     100 |                                                                                                 
------------------------------------------------|---------|----------|---------|---------|-------------------------------------------------------------------------------------------------
Summary of all failing tests
FAIL src/usecases/storage/__tests__/ExecuteStorageSyncUseCase.test.ts (25.969 s)
  ‚óè ExecuteStorageSyncUseCase ‚Ä∫ execute() ‚Ä∫ should handle repository load errors

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"error": "Database connection failed", "success": false, "syncDirection": "bidirectional"}

      165 |       useCase = new ExecuteStorageSyncUseCase(
      166 |         mockConfigRepository,
    > 167 |         mockExecuteReceiveDataUseCase,
          |                   ^
      168 |         mockExecuteSendDataUseCase,
      169 |         mockSyncHistoryRepository,
      170 |         mockSyncStateNotifier,

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (src/usecases/storage/__tests__/ExecuteStorageSyncUseCase.test.ts:167:19)

FAIL src/presentation/background/handlers/__tests__/ExecuteWebsiteFromPopupHandler.test.ts (26.035 s)
  ‚óè ExecuteWebsiteFromPopupHandler ‚Ä∫ handle ‚Ä∫ should successfully execute website from popup

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      86 |     );
      87 |   });
    > 88 |
         | ^
      89 |   describe('handle', () => {
      90 |     it('should successfully execute website from popup', async () => {
      91 |       const message: ExecuteWebsiteFromPopupRequest = {

      at Object.<anonymous> (src/presentation/background/handlers/__tests__/ExecuteWebsiteFromPopupHandler.test.ts:88:38)

  ‚óè ExecuteWebsiteFromPopupHandler ‚Ä∫ handle ‚Ä∫ should return error when website has no startUrl

    expect(received).toContain(expected) // indexOf

    Expected substring: "startUrl„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì"
    Received string:    "automationVariables?.getStatus is not a function"

      126 |     it('should return error when website not found', async () => {
      127 |       const message: ExecuteWebsiteFromPopupRequest = {
    > 128 |         action: MessageTypes.EXECUTE_WEBSITE_FROM_POPUP,
          |                                          ^
      129 |         websiteId: 'non_existent',
      130 |       };
      131 |

      at Object.<anonymous> (src/presentation/background/handlers/__tests__/ExecuteWebsiteFromPopupHandler.test.ts:128:42)

  ‚óè ExecuteWebsiteFromPopupHandler ‚Ä∫ handle ‚Ä∫ should return error when tab creation fails

    expect(received).toBe(expected) // Object.is equality

    Expected: "Êñ∞„Åó„ÅÑ„Çø„Éñ„ÅÆ‰ΩúÊàê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü"
    Received: "automationVariables?.getStatus is not a function"

      138 |       expect(mockLogger.error).toHaveBeenCalledWith(
      139 |         '[ExecuteWebsiteFromPopupHandler] Website not found',
    > 140 |         expect.any(Object)
          |                           ^
      141 |       );
      142 |     });
      143 |

      at Object.<anonymous> (src/presentation/background/handlers/__tests__/ExecuteWebsiteFromPopupHandler.test.ts:140:42)

  ‚óè ExecuteWebsiteFromPopupHandler ‚Ä∫ handle ‚Ä∫ should handle auto-fill execution failure

    expect(received).toBe(expected) // Object.is equality

    Expected: "XPath not found"
    Received: "automationVariables?.getStatus is not a function"

      159 |
      160 |       const response: ExecuteWebsiteFromPopupResponse = await handler.handle(message);
    > 161 |
          | ^
      162 |       expect(response.success).toBe(false);
      163 |       expect(response.data?.error).toContain('startUrl„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì');
      164 |       expect(mockLogger.error).toHaveBeenCalledWith(

      at Object.<anonymous> (src/presentation/background/handlers/__tests__/ExecuteWebsiteFromPopupHandler.test.ts:161:42)

  ‚óè ExecuteWebsiteFromPopupHandler ‚Ä∫ handle ‚Ä∫ should log all execution steps

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[ExecuteWebsiteFromPopupHandler] Creating new tab", Any<Object>
    Received
           1: "[ExecuteWebsiteFromPopupHandler] Received request", {"websiteId": "website_123"}
           2: "[ExecuteWebsiteFromPopupHandler] Website loaded", {"name": "Test Website", "startUrl": "https://example.com"}

    Number of calls: 2

      191 |         action: MessageTypes.EXECUTE_WEBSITE_FROM_POPUP,
      192 |         websiteId: 'website_123',
    > 193 |       };
          |         ^
      194 |
      195 |       mockGetWebsiteByIdUseCase.execute.mockResolvedValue({ success: true, website: mockWebsite });
      196 |

      at Object.<anonymous> (src/presentation/background/handlers/__tests__/ExecuteWebsiteFromPopupHandler.test.ts:193:37)

FAIL tests/integration/page-transition-resume.integration.test.ts (26.395 s)
  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.2: New Execution ‚Ä∫ should create AutomationResult in DOING status when starting new execution

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:239:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.2: New Execution ‚Ä∫ should save AutomationVariables with correct websiteId

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:280:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.2: New Execution ‚Ä∫ should initialize progress tracking fields correctly

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:330:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.2: New Execution ‚Ä∫ should calculate progress percentage correctly

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:375:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.3: CHANGE_URL Progress Saving ‚Ä∫ should save progress after CHANGE_URL action

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:440:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.3: CHANGE_URL Progress Saving ‚Ä∫ should save progress multiple times for multiple CHANGE_URL actions

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:506:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.3: CHANGE_URL Progress Saving ‚Ä∫ should calculate correct progress percentage after CHANGE_URL

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:555:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.4: Resume Execution ‚Ä∫ should resume execution from currentStepIndex when DOING status exists

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:607:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.4: Resume Execution ‚Ä∫ should only resume executions within 24 hours

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:663:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.4: Resume Execution ‚Ä∫ should only resume executions with matching websiteId

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:718:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.4: Resume Execution ‚Ä∫ should handle case when currentStepIndex exceeds total steps

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:767:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.5: Edge Cases ‚Ä∫ should start new execution when checkExistingExecution fails

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:812:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.5: Edge Cases ‚Ä∫ should continue execution even when AutomationResult save fails

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:851:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.5: Edge Cases ‚Ä∫ should execute successfully when AutomationVariables not found

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:878:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.5: Edge Cases ‚Ä∫ should handle repository errors gracefully during resume check

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:932:28)

  ‚óè Page Transition Resume Integration Tests ‚Ä∫ Task 4.5: Edge Cases ‚Ä∫ should handle AutomationResult load failure in finalizeExecution

    TypeError: Cannot read properties of undefined (reading 'getByWebsiteId')



      at ExecuteAutoFillUseCase.loadAndValidateXPaths (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3972:46)
      at ExecuteAutoFillUseCase.startNewExecution (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:4004:32)
      at ExecuteAutoFillUseCase.execute (src/usecases/auto-fill/ExecuteAutoFillUseCase.ts:3805:12)
      at Object.<anonymous> (tests/integration/page-transition-resume.integration.test.ts:963:28)

FAIL tests/integration/TabRecording.integration.test.ts
  ‚óè Test suite failed to run

    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m52[0m:[93m30[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m52[0m       recordingId: recording.getId(),
    [7m  [0m [91m                             ~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m54[0m:[93m24[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m54[0m       tabId: recording.getTabId(),
    [7m  [0m [91m                       ~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m55[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getStatus' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m55[0m       currentStatus: recording.getStatus(),
    [7m  [0m [91m                               ~~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m56[0m:[93m29[0m - [91merror[0m[90m TS2339: [0mProperty 'getRecorderId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m56[0m       recorderId: recording.getRecorderId(),
    [7m  [0m [91m                            ~~~~~~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m59[0m:[93m20[0m - [91merror[0m[90m TS2339: [0mProperty 'isRecording' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m59[0m     if (!recording.isRecording()) {
    [7m  [0m [91m                   ~~~~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m61[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m61[0m         recordingId: recording.getId(),
    [7m  [0m [91m                               ~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m63[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'getStatus' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m63[0m         currentStatus: recording.getStatus(),
    [7m  [0m [91m                                 ~~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m64[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m64[0m         tabId: recording.getTabId(),
    [7m  [0m [91m                         ~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m66[0m:[93m7[0m - [91merror[0m[90m TS2740: [0mType 'Result<TabRecording | null, Error>' is missing the following properties from type 'TabRecording': validate, getId, getAutomationResultId, getTabId, and 21 more.

    [7m66[0m       return recording;
    [7m  [0m [91m      ~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m70[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'getRecorderId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m70[0m     const recorderId = recording.getRecorderId();
    [7m  [0m [91m                                 ~~~~~~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m73[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m73[0m         recordingId: recording.getId(),
    [7m  [0m [91m                               ~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m75[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m75[0m         tabId: recording.getTabId(),
    [7m  [0m [91m                         ~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m76[0m:[93m34[0m - [91merror[0m[90m TS2339: [0mProperty 'getStatus' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m76[0m         currentStatus: recording.getStatus(),
    [7m  [0m [91m                                 ~~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m78[0m:[93m40[0m - [91merror[0m[90m TS2339: [0mProperty 'markError' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m78[0m       const errorRecording = recording.markError('No recorderId found');
    [7m  [0m [91m                                       ~~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m86[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m86[0m         recordingId: recording.getId(),
    [7m  [0m [91m                               ~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m94[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m94[0m         recordingId: recording.getId(),
    [7m  [0m [91m                               ~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m101[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'stop' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m101[0m       const stoppedRecording = recording.stop().save(blob);
    [7m   [0m [91m                                         ~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m114[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m114[0m         recordingId: recording.getId(),
    [7m   [0m [91m                               ~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m117[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m117[0m         tabId: recording.getTabId(),
    [7m   [0m [91m                         ~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m127[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m127[0m         recordingId: recording.getId(),
    [7m   [0m [91m                               ~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m130[0m:[93m26[0m - [91merror[0m[90m TS2339: [0mProperty 'getTabId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m130[0m         tabId: recording.getTabId(),
    [7m   [0m [91m                         ~~~~~~~~[0m
    [96msrc/usecases/recording/StopTabRecordingUseCase.ts[0m:[93m133[0m:[93m40[0m - [91merror[0m[90m TS2339: [0mProperty 'markError' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m133[0m       const errorRecording = recording.markError('Failed to stop recording');
    [7m   [0m [91m                                       ~~~~~~~~~[0m

FAIL src/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts
  ‚óè Test suite failed to run

    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m338[0m:[93m22[0m - [91merror[0m[90m TS2339: [0mProperty 'getId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m338[0m       expect(result!.getId()).toBe(recordingId);
    [7m   [0m [91m                     ~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m486[0m:[93m22[0m - [91merror[0m[90m TS2339: [0mProperty 'getAutomationResultId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m486[0m       expect(result!.getAutomationResultId()).toBe(automationResultId);
    [7m   [0m [91m                     ~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m609[0m:[93m14[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type '0' can't be used to index type 'Result<TabRecording[], Error>'.
      Property '0' does not exist on type 'Result<TabRecording[], Error>'.

    [7m609[0m       expect(result[0].getId()).toBe('recording-1');
    [7m   [0m [91m             ~~~~~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m610[0m:[93m14[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type '1' can't be used to index type 'Result<TabRecording[], Error>'.
      Property '1' does not exist on type 'Result<TabRecording[], Error>'.

    [7m610[0m       expect(result[1].getId()).toBe('recording-2');
    [7m   [0m [91m             ~~~~~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m677[0m:[93m76[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m677[0m       jest.spyOn(repository, 'loadByAutomationResultId').mockResolvedValue(recording);
    [7m   [0m [91m                                                                           ~~~~~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m678[0m:[93m40[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 0.

    [7m678[0m       jest.spyOn(repository, 'delete').mockResolvedValue();
    [7m   [0m [91m                                       ~~~~~~~~~~~~~~~~~[0m

      [96mnode_modules/@types/jest/index.d.ts[0m:[93m1439[0m:[93m27[0m
        [7m1439[0m         mockResolvedValue(value: ResolvedValue<T>): this;
        [7m    [0m [96m                          ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'value' was not provided.
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m689[0m:[93m76[0m - [91merror[0m[90m TS2345: [0mArgument of type 'null' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m689[0m       jest.spyOn(repository, 'loadByAutomationResultId').mockResolvedValue(null);
    [7m   [0m [91m                                                                           ~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m690[0m:[93m40[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 0.

    [7m690[0m       jest.spyOn(repository, 'delete').mockResolvedValue();
    [7m   [0m [91m                                       ~~~~~~~~~~~~~~~~~[0m

      [96mnode_modules/@types/jest/index.d.ts[0m:[93m1439[0m:[93m27[0m
        [7m1439[0m         mockResolvedValue(value: ResolvedValue<T>): this;
        [7m    [0m [96m                          ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'value' was not provided.
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m831[0m:[93m59[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording[]' is not assignable to parameter of type 'Result<TabRecording[], Error> | Promise<Result<TabRecording[], Error>>'.
      Type 'TabRecording[]' is missing the following properties from type 'Result<TabRecording[], Error>': _isSuccess, isSuccess, isFailure, value, and 6 more.

    [7m831[0m       jest.spyOn(repository, 'loadAll').mockResolvedValue([recording1, recording2]);
    [7m   [0m [91m                                                          ~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m891[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type '(resultId: string) => Promise<TabRecording | null>' is not assignable to parameter of type '(resultId: string) => Promise<Result<TabRecording | null, Error>>'.
      Type 'Promise<TabRecording | null>' is not assignable to type 'Promise<Result<TabRecording | null, Error>>'.
        Type 'TabRecording | null' is not assignable to type 'Result<TabRecording | null, Error>'.
          Type 'null' is not assignable to type 'Result<TabRecording | null, Error>'.

    [7m891[0m         .mockImplementation(async (resultId: string) => {
    [7m   [0m [91m                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m901[0m:[93m22[0m - [91merror[0m[90m TS2339: [0mProperty 'getAutomationResultId' does not exist on type 'Result<TabRecording | null, Error>'.

    [7m901[0m       expect(result!.getAutomationResultId()).toBe(newerResult.getId());
    [7m   [0m [91m                     ~~~~~~~~~~~~~~~~~~~~~[0m
    [96msrc/infrastructure/repositories/__tests__/IndexedDBRecordingRepository.test.ts[0m:[93m937[0m:[93m76[0m - [91merror[0m[90m TS2345: [0mArgument of type 'null' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m937[0m       jest.spyOn(repository, 'loadByAutomationResultId').mockResolvedValue(null);
    [7m   [0m [91m                                                                           ~~~~[0m

FAIL src/usecases/recording/__tests__/GetRecordingByResultIdUseCase.test.ts
  ‚óè Test suite failed to run

    [96msrc/usecases/recording/__tests__/GetRecordingByResultIdUseCase.test.ts[0m:[93m52[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m52[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(mockRecording);
    [7m  [0m [91m                                                                ~~~~~~~~~~~~~[0m
    [96msrc/usecases/recording/__tests__/GetRecordingByResultIdUseCase.test.ts[0m:[93m66[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'null' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m66[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(null);
    [7m  [0m [91m                                                                ~~~~[0m
    [96msrc/usecases/recording/__tests__/GetRecordingByResultIdUseCase.test.ts[0m:[93m103[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m103[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(mockRecording);
    [7m   [0m [91m                                                                ~~~~~~~~~~~~~[0m
    [96msrc/usecases/recording/__tests__/GetRecordingByResultIdUseCase.test.ts[0m:[93m124[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m124[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(mockRecording);
    [7m   [0m [91m                                                                ~~~~~~~~~~~~~[0m

FAIL src/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts
  ‚óè Test suite failed to run

    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m63[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m63[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(recording);
    [7m  [0m [91m                                                                ~~~~~~~~~[0m
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m65[0m:[93m27[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 0.

    [7m65[0m       mockRepository.save.mockResolvedValue();
    [7m  [0m [91m                          ~~~~~~~~~~~~~~~~~[0m

      [96mnode_modules/@types/jest/index.d.ts[0m:[93m1439[0m:[93m27[0m
        [7m1439[0m         mockResolvedValue(value: ResolvedValue<T>): this;
        [7m    [0m [96m                          ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'value' was not provided.
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m92[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'null' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m92[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(null);
    [7m  [0m [91m                                                                ~~~~[0m
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m115[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m115[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(recording);
    [7m   [0m [91m                                                                ~~~~~~~~~[0m
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m142[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m142[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(recording);
    [7m   [0m [91m                                                                ~~~~~~~~~[0m
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m144[0m:[93m27[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 0.

    [7m144[0m       mockRepository.save.mockResolvedValue();
    [7m   [0m [91m                          ~~~~~~~~~~~~~~~~~[0m

      [96mnode_modules/@types/jest/index.d.ts[0m:[93m1439[0m:[93m27[0m
        [7m1439[0m         mockResolvedValue(value: ResolvedValue<T>): this;
        [7m    [0m [96m                          ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'value' was not provided.
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m175[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m175[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(recording);
    [7m   [0m [91m                                                                ~~~~~~~~~[0m
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m204[0m:[93m65[0m - [91merror[0m[90m TS2345: [0mArgument of type 'TabRecording' is not assignable to parameter of type 'Result<TabRecording | null, Error> | Promise<Result<TabRecording | null, Error>>'.

    [7m204[0m       mockRepository.loadByAutomationResultId.mockResolvedValue(recording);
    [7m   [0m [91m                                                                ~~~~~~~~~[0m
    [96msrc/usecases/recording/__tests__/StopTabRecordingUseCase.test.ts[0m:[93m246[0m:[93m27[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 0.

    [7m246[0m       mockRepository.save.mockResolvedValue();
    [7m   [0m [91m                          ~~~~~~~~~~~~~~~~~[0m

      [96mnode_modules/@types/jest/index.d.ts[0m:[93m1439[0m:[93m27[0m
        [7m1439[0m         mockResolvedValue(value: ResolvedValue<T>): this;
        [7m    [0m [96m                          ~~~~~~~~~~~~~~~~~~~~~~~[0m
        An argument for 'value' was not provided.

FAIL src/presentation/content-script/__tests__/AutoFillHandler.test.ts
  ‚óè Test suite failed to run

    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m130[0m:[93m7[0m - [91merror[0m[90m TS2769: [0mNo overload matches this call.
      Overload 1 of 4, '(iterable?: Iterable<readonly [unknown, unknown]> | null | undefined): Map<unknown, unknown>', gave the following error.
        Argument of type 'Result<any[], Error>' is not assignable to parameter of type 'Iterable<readonly [unknown, unknown]>'.
          Property '[Symbol.iterator]' is missing in type 'Result<any[], Error>' but required in type 'Iterable<readonly [unknown, unknown]>'.
      Overload 2 of 4, '(entries?: readonly (readonly [unknown, unknown])[] | null | undefined): Map<unknown, unknown>', gave the following error.
        Argument of type 'Result<any[], Error>' is not assignable to parameter of type 'readonly (readonly [unknown, unknown])[]'.
          Type 'Result<any[], Error>' is missing the following properties from type 'readonly (readonly [unknown, unknown])[]': length, concat, join, slice, and 18 more.

    [7m130[0m       allAutomationVariables.map((av) => [av.getWebsiteId(), av])
    [7m   [0m [91m      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m

      [96mnode_modules/typescript/lib/lib.es2015.iterable.d.ts[0m:[93m49[0m:[93m5[0m
        [7m49[0m     [Symbol.iterator](): Iterator<T, TReturn, TNext>;
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
        '[Symbol.iterator]' is declared here.
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m130[0m:[93m46[0m - [91merror[0m[90m TS2339: [0mProperty 'getWebsiteId' does not exist on type 'AutomationVariables[]'.

    [7m130[0m       allAutomationVariables.map((av) => [av.getWebsiteId(), av])
    [7m   [0m [91m                                             ~~~~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m133[0m:[93m85[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'Result<AutomationVariables[], Error>'.

    [7m133[0m     this.logger.info('Loaded automation variables', { count: allAutomationVariables.length });
    [7m   [0m [91m                                                                                    ~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m139[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'getStatus' does not exist on type '{}'.

    [7m139[0m         const status = av?.getStatus();
    [7m   [0m [91m                           ~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m145[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'getUpdatedAt' does not exist on type '{}'.

    [7m145[0m         const dateA = avA ? new Date(avA.getUpdatedAt()).getTime() : 0;
    [7m   [0m [91m                                         ~~~~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m146[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'getUpdatedAt' does not exist on type '{}'.

    [7m146[0m         const dateB = avB ? new Date(avB.getUpdatedAt()).getTime() : 0;
    [7m   [0m [91m                                         ~~~~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m150[0m:[93m31[0m - [91merror[0m[90m TS2322: [0mType 'Map<unknown, unknown>' is not assignable to type 'Map<string, any>'.
      Type 'unknown' is not assignable to type 'string'.

    [7m150[0m     return { enabledWebsites, automationVariablesMap };
    [7m   [0m [91m                              ~~~~~~~~~~~~~~~~~~~~~~[0m

      [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m119[0m:[93m5[0m
        [7m119[0m     automationVariablesMap: Map<string, any>;
        [7m   [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~[0m
        The expected type comes from property 'automationVariablesMap' which is declared here on type '{ enabledWebsites: WebsiteData[]; automationVariablesMap: Map<string, any>; }'

FAIL src/presentation/content-script/__tests__/ContentScriptCoordinator.test.ts
  ‚óè Test suite failed to run

    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m130[0m:[93m7[0m - [91merror[0m[90m TS2769: [0mNo overload matches this call.
      Overload 1 of 4, '(iterable?: Iterable<readonly [unknown, unknown]> | null | undefined): Map<unknown, unknown>', gave the following error.
        Argument of type 'Result<any[], Error>' is not assignable to parameter of type 'Iterable<readonly [unknown, unknown]>'.
          Property '[Symbol.iterator]' is missing in type 'Result<any[], Error>' but required in type 'Iterable<readonly [unknown, unknown]>'.
      Overload 2 of 4, '(entries?: readonly (readonly [unknown, unknown])[] | null | undefined): Map<unknown, unknown>', gave the following error.
        Argument of type 'Result<any[], Error>' is not assignable to parameter of type 'readonly (readonly [unknown, unknown])[]'.
          Type 'Result<any[], Error>' is missing the following properties from type 'readonly (readonly [unknown, unknown])[]': length, concat, join, slice, and 18 more.

    [7m130[0m       allAutomationVariables.map((av) => [av.getWebsiteId(), av])
    [7m   [0m [91m      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m

      [96mnode_modules/typescript/lib/lib.es2015.iterable.d.ts[0m:[93m49[0m:[93m5[0m
        [7m49[0m     [Symbol.iterator](): Iterator<T, TReturn, TNext>;
        [7m  [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
        '[Symbol.iterator]' is declared here.
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m130[0m:[93m46[0m - [91merror[0m[90m TS2339: [0mProperty 'getWebsiteId' does not exist on type 'AutomationVariables[]'.

    [7m130[0m       allAutomationVariables.map((av) => [av.getWebsiteId(), av])
    [7m   [0m [91m                                             ~~~~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m133[0m:[93m85[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'Result<AutomationVariables[], Error>'.

    [7m133[0m     this.logger.info('Loaded automation variables', { count: allAutomationVariables.length });
    [7m   [0m [91m                                                                                    ~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m139[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'getStatus' does not exist on type '{}'.

    [7m139[0m         const status = av?.getStatus();
    [7m   [0m [91m                           ~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m145[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'getUpdatedAt' does not exist on type '{}'.

    [7m145[0m         const dateA = avA ? new Date(avA.getUpdatedAt()).getTime() : 0;
    [7m   [0m [91m                                         ~~~~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m146[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'getUpdatedAt' does not exist on type '{}'.

    [7m146[0m         const dateB = avB ? new Date(avB.getUpdatedAt()).getTime() : 0;
    [7m   [0m [91m                                         ~~~~~~~~~~~~[0m
    [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m150[0m:[93m31[0m - [91merror[0m[90m TS2322: [0mType 'Map<unknown, unknown>' is not assignable to type 'Map<string, any>'.
      Type 'unknown' is not assignable to type 'string'.

    [7m150[0m     return { enabledWebsites, automationVariablesMap };
    [7m   [0m [91m                              ~~~~~~~~~~~~~~~~~~~~~~[0m

      [96msrc/presentation/content-script/AutoFillHandler.ts[0m:[93m119[0m:[93m5[0m
        [7m119[0m     automationVariablesMap: Map<string, any>;
        [7m   [0m [96m    ~~~~~~~~~~~~~~~~~~~~~~[0m
        The expected type comes from property 'automationVariablesMap' which is declared here on type '{ enabledWebsites: WebsiteData[]; automationVariablesMap: Map<string, any>; }'

FAIL tests/e2e/PageTransitionResume.e2e.test.ts
  ‚óè Test suite failed to run

    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m430[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'Result<AutomationResult[], string>'.

    [7m430[0m       expect(allResults.length).toBe(1);
    [7m   [0m [91m                        ~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m432[0m:[93m32[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type '0' can't be used to index type 'Result<AutomationResult[], string>'.
      Property '0' does not exist on type 'Result<AutomationResult[], string>'.

    [7m432[0m       const automationResult = allResults[0];
    [7m   [0m [91m                               ~~~~~~~~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m519[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'Result<AutomationResult[], string>'.

    [7m519[0m       expect(allResults.length).toBe(1);
    [7m   [0m [91m                        ~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m521[0m:[93m29[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type '0' can't be used to index type 'Result<AutomationResult[], string>'.
      Property '0' does not exist on type 'Result<AutomationResult[], string>'.

    [7m521[0m       const updatedResult = allResults[0];
    [7m   [0m [91m                            ~~~~~~~~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m645[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'Result<AutomationResult[], string>'.

    [7m645[0m       expect(allResults.length).toBe(1);
    [7m   [0m [91m                        ~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m647[0m:[93m27[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type '0' can't be used to index type 'Result<AutomationResult[], string>'.
      Property '0' does not exist on type 'Result<AutomationResult[], string>'.

    [7m647[0m       const finalResult = allResults[0];
    [7m   [0m [91m                          ~~~~~~~~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m727[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'Result<AutomationResult[], string>'.

    [7m727[0m       expect(allResults.length).toBe(2);
    [7m   [0m [91m                        ~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m729[0m:[93m37[0m - [91merror[0m[90m TS2339: [0mProperty 'find' does not exist on type 'Result<AutomationResult[], string>'.

    [7m729[0m       const siteAFinal = allResults.find(
    [7m   [0m [91m                                    ~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m730[0m:[93m10[0m - [91merror[0m[90m TS7006: [0mParameter 'r' implicitly has an 'any' type.

    [7m730[0m         (r) => r.getAutomationVariablesId() === automationVars1.getId()
    [7m   [0m [91m         ~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m732[0m:[93m37[0m - [91merror[0m[90m TS2339: [0mProperty 'find' does not exist on type 'Result<AutomationResult[], string>'.

    [7m732[0m       const siteBFinal = allResults.find(
    [7m   [0m [91m                                    ~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m733[0m:[93m10[0m - [91merror[0m[90m TS7006: [0mParameter 'r' implicitly has an 'any' type.

    [7m733[0m         (r) => r.getAutomationVariablesId() === automationVars2.getId()
    [7m   [0m [91m         ~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m800[0m:[93m25[0m - [91merror[0m[90m TS2339: [0mProperty 'length' does not exist on type 'Result<AutomationResult[], string>'.

    [7m800[0m       expect(allResults.length).toBe(1);
    [7m   [0m [91m                        ~~~~~~[0m
    [96mtests/e2e/PageTransitionResume.e2e.test.ts[0m:[93m802[0m:[93m27[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type '0' can't be used to index type 'Result<AutomationResult[], string>'.
      Property '0' does not exist on type 'Result<AutomationResult[], string>'.

    [7m802[0m       const finalResult = allResults[0];
    [7m   [0m [91m                          ~~~~~~~~~~~~~[0m


Test Suites: 10 failed, 230 passed, 240 total
Tests:       22 failed, 5371 passed, 5393 total
Snapshots:   0 total
Time:        87.665 s
Ran all test suites.
