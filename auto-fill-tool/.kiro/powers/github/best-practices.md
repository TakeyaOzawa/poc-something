# GitHub Power - ベストプラクティス

## セキュリティ

### Personal Access Token の管理

- **最小権限の原則**: 必要最小限の権限のみを付与
- **定期的な更新**: トークンは定期的に更新
- **環境変数での管理**: ハードコーディングは避ける

### 推奨権限設定

```
repo (リポジトリへのフルアクセス)
├── repo:status (コミットステータスへのアクセス)
├── repo_deployment (デプロイメントステータスへのアクセス)
├── public_repo (パブリックリポジトリへのアクセス)
└── repo:invite (リポジトリへの招待)

workflow (GitHub Actionsワークフロー)
read:org (組織の読み取り)
```

## コード管理

### ブランチ戦略

- **main/master**: 本番環境用の安定ブランチ
- **develop**: 開発用の統合ブランチ  
- **feature/***: 機能開発用ブランチ
- **hotfix/***: 緊急修正用ブランチ

### コミットメッセージ

```
feat: 新機能の追加
fix: バグ修正
docs: ドキュメントの更新
style: コードスタイルの修正
refactor: リファクタリング
test: テストの追加・修正
chore: その他の変更
```

## プルリクエスト

プルリクエストを作成する際は、`.github/pull_request_template.md`のフォーマットに従ってください。

### 必須セクション

1. **Notion のリンク**: 関連するNotionページのURL
2. **やったこと**: このプルリクエストで実装した内容
3. **やらないこと**: このプルリクエストで対応しない内容（今後の対応予定も記載）
4. **動作確認**: 実施した動作確認の内容と結果
5. **その他**: レビュワーへの参考情報や注意点

### テンプレート例

```markdown
## Notion のリンク

-   https://example.com

## やったこと

-   このプルリクで何をしたのか？

## やらないこと

-   このプルリクでやらないことは何か？（あれば。無いなら「無し」で OK）（やらない場合は、いつやるのかを明記する。）

## 動作確認

-   どのような動作確認を行ったのか？　結果はどうか？

## その他

-   レビュワーへの参考情報（実装上の懸念点や注意点などあれば記載）
```

### GitHub Copilotレビュー指示

プルリクエストには以下のCopilotレビュー指示を含めることが推奨されています：

```html
<!--
GitHub Copilotへの指示：
このプルリクエストを日本語でレビューしてください。
コード品質、設計、セキュリティ、パフォーマンスの観点から評価し、
改善提案があれば具体的に提示してください。
-->
```

### GitHubパワーでのプルリクエスト作成

GitHubパワーを使用してプルリクエストを作成する際は、以下の点に注意してください：

- `body`パラメータに上記のテンプレート形式を使用する
- 日本語で記載する
- 必要に応じてCopilotレビュー指示を含める
- 適切なブランチ名を使用する（例：`feature/MDXA-1234-description`）

```javascript
// プルリクエスト作成例
mcp_github_create_pull_request({
  owner: "volareinc",
  repo: "carmo-system-console", 
  title: "MDXA-1234: 機能追加の説明",
  head: "feature/MDXA-1234-new-feature",
  base: "main",
  body: `## Notion のリンク

-   https://notion.so/MDXA-1234

## やったこと

-   新機能Xを実装
-   バリデーション処理を追加

## やらないこと

-   UI改善（次のスプリントで対応予定）

## 動作確認

-   ローカル環境でテスト実行：成功
-   手動動作確認：問題なし

## その他

-   既存のAPIとの互換性を維持`
})
```

### PR作成時のチェックリスト

- [ ] 適切なタイトルと説明
- [ ] 関連するイシューの参照
- [ ] テストの実行確認
- [ ] コードレビューの依頼
- [ ] CI/CDの通過確認

### レビュー観点

- コードの品質
- セキュリティの考慮
- パフォーマンスへの影響
- テストカバレッジ
- ドキュメントの更新

## 自動化

### 推奨する自動承認設定

```json
"autoApprove": [
  "create_pull_request",
  "create_issue",
  "create_branch"
]
```

### 注意が必要な操作

- `merge_pull_request`: マージ前の確認が重要
- `create_repository`: **無効化済み** - 新規リポジトリ作成は安全のため無効化されています
- `fork_repository`: **無効化済み** - リポジトリフォークは安全のため無効化されています
- `push_files`: 大量ファイル更新時は事前確認